var fk=Object.defineProperty,pk=Object.defineProperties;var gk=Object.getOwnPropertyDescriptors;var xl=Object.getOwnPropertySymbols,mk=Object.getPrototypeOf,pT=Object.prototype.hasOwnProperty,gT=Object.prototype.propertyIsEnumerable,yk=Reflect.get;var fT=(n,e,t)=>e in n?fk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})pT.call(e,t)&&fT(n,t,e[t]);if(xl)for(var t of xl(e))gT.call(e,t)&&fT(n,t,e[t]);return n},ae=(n,e)=>pk(n,gk(e));var mT=(n,e)=>{var t={};for(var r in n)pT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&xl)for(var r of xl(n))e.indexOf(r)<0&&gT.call(n,r)&&(t[r]=n[r]);return t};var Wr=(n,e,t)=>yk(mk(n),t,e);var I=(n,e,t)=>new Promise((r,i)=>{var s=l=>{try{a(t.next(l))}catch(u){i(u)}},o=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});function Lp(n,e){return Object.is(n,e)}var it=null,Ol=!1,Vp=1,_n=Symbol("SIGNAL");function ye(n){let e=it;return it=n,e}function jp(){return it}var ba={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Da(n){if(Ol)throw new Error("");if(it===null)return;it.consumerOnSignalRead(n);let e=it.nextProducerIndex++;if(jl(it),e<it.producerNode.length&&it.producerNode[e]!==n&&Ta(it)){let t=it.producerNode[e];Vl(t,it.producerIndexOfThis[e])}it.producerNode[e]!==n&&(it.producerNode[e]=n,it.producerIndexOfThis[e]=Ta(it)?vT(n,it,e):0),it.producerLastReadVersion[e]=n.version}function yT(){Vp++}function Up(n){if(!(Ta(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Vp)){if(!n.producerMustRecompute(n)&&!zp(n)){Fp(n);return}n.producerRecomputeValue(n),Fp(n)}}function Bp(n){if(n.liveConsumerNode===void 0)return;let e=Ol;Ol=!0;try{for(let t of n.liveConsumerNode)t.dirty||vk(t)}finally{Ol=e}}function $p(){return it?.consumerAllowSignalWrites!==!1}function vk(n){n.dirty=!0,Bp(n),n.consumerMarkedDirty?.(n)}function Fp(n){n.dirty=!1,n.lastCleanEpoch=Vp}function Ll(n){return n&&(n.nextProducerIndex=0),ye(n)}function Hp(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ta(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function zp(n){jl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Up(t),r!==t.version))return!0}return!1}function qp(n){if(jl(n),Ta(n))for(let e=0;e<n.producerNode.length;e++)Vl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function vT(n,e,t){if(_T(n),n.liveConsumerNode.length===0&&ET(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=vT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vl(n,e){if(_T(n),n.liveConsumerNode.length===1&&ET(n))for(let r=0;r<n.producerNode.length;r++)Vl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jl(i),i.producerIndexOfThis[r]=e}}function Ta(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function _T(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function ET(n){return n.producerNode!==void 0}function Gp(n,e){let t=Object.create(_k);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Up(t),Da(t),t.value===Fl)throw t.error;return t.value};return r[_n]=t,r}var xp=Symbol("UNSET"),Op=Symbol("COMPUTING"),Fl=Symbol("ERRORED"),_k=ae(O({},ba),{value:xp,dirty:!0,error:null,equal:Lp,kind:"computed",producerMustRecompute(n){return n.value===xp||n.value===Op},producerRecomputeValue(n){if(n.value===Op)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Op;let t=Ll(n),r,i=!1;try{r=n.computation(),ye(null),i=e!==xp&&e!==Fl&&r!==Fl&&n.equal(e,r)}catch(s){r=Fl,n.error=s}finally{Hp(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Ek(){throw new Error}var wT=Ek;function IT(n){wT(n)}function Wp(n){wT=n}var wk=null;function Kp(n,e){let t=Object.create(Ul);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Da(t),t.value);return r[_n]=t,r}function Ca(n,e){$p()||IT(n),n.equal(n.value,e)||(n.value=e,Ik(n))}function Qp(n,e){$p()||IT(n),Ca(n,e(n.value))}var Ul=ae(O({},ba),{equal:Lp,value:void 0,kind:"signal"});function Ik(n){n.version++,yT(),Bp(n),wk?.()}function Yp(n){let e=ye(null);try{return n()}finally{ye(e)}}var Zp;function Sa(){return Zp}function gr(n){let e=Zp;return Zp=n,e}var Bl=Symbol("NotFound");function ie(n){return typeof n=="function"}function As(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $l=As(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Aa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(s){e=s instanceof $l?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{TT(s)}catch(o){e=e??[],o instanceof $l?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $l(e)}}add(e){var t;if(e&&e!==this)if(this.closed)TT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Aa(t,e)}remove(e){let{_finalizers:t}=this;t&&Aa(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var Jp=Ze.EMPTY;function Hl(n){return n instanceof Ze||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function TT(n){ie(n)?n():n.unsubscribe()}var En={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Rs={setTimeout(n,e,...t){let{delegate:r}=Rs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Rs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zl(n){Rs.setTimeout(()=>{let{onUnhandledError:e}=En;if(e)e(n);else throw n})}function Ra(){}var bT=Xp("C",void 0,void 0);function DT(n){return Xp("E",void 0,n)}function CT(n){return Xp("N",n,void 0)}function Xp(n,e,t){return{kind:n,value:e,error:t}}var Ci=null;function Ms(n){if(En.useDeprecatedSynchronousErrorHandling){let e=!Ci;if(e&&(Ci={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ci;if(Ci=null,t)throw r}}else n()}function ST(n){En.useDeprecatedSynchronousErrorHandling&&Ci&&(Ci.errorThrown=!0,Ci.error=n)}var Si=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hl(e)&&e.add(this)):this.destination=Ak}static create(e,t,r){return new Ns(e,t,r)}next(e){this.isStopped?tg(CT(e),this):this._next(e)}error(e){this.isStopped?tg(DT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?tg(bT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ck=Function.prototype.bind;function eg(n,e){return Ck.call(n,e)}var ng=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ql(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ql(r)}else ql(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ql(t)}}},Ns=class extends Si{constructor(e,t,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&En.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&eg(e.next,s),error:e.error&&eg(e.error,s),complete:e.complete&&eg(e.complete,s)}):i=e}this.destination=new ng(i)}};function ql(n){En.useDeprecatedSynchronousErrorHandling?ST(n):zl(n)}function Sk(n){throw n}function tg(n,e){let{onStoppedNotification:t}=En;t&&Rs.setTimeout(()=>t(n,e))}var Ak={closed:!0,next:Ra,error:Sk,complete:Ra};var Ps=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qt(n){return n}function rg(...n){return ig(n)}function ig(n){return n.length===0?qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=Mk(t)?t:new Ns(t,r,i);return Ms(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=AT(r),new r((i,s)=>{let o=new Ns({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ps](){return this}pipe(...t){return ig(t)(this)}toPromise(t){return t=AT(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function AT(n){var e;return(e=n??En.Promise)!==null&&e!==void 0?e:Promise}function Rk(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function Mk(n){return n&&n instanceof Si||Rk(n)&&Hl(n)}function sg(n){return ie(n?.lift)}function we(n){return e=>{if(sg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(n,e,t,r,i){return new og(n,e,t,r,i)}var og=class extends Si{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ks(){return we((n,e)=>{let t=null;n._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var xs=class extends Ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ze;let t=this.getSubject();e.add(this.source.subscribe(ve(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ze.EMPTY)}return e}refCount(){return ks()(this)}};var RT=As(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends Ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Gl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new RT}next(t){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Jp:(this.currentObservers=null,s.push(t),new Ze(()=>{this.currentObservers=null,Aa(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Ce;return t.source=this,t}}return n.create=(e,t)=>new Gl(e,t),n})(),Gl=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jp}};var Ge=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xt=new Ce(n=>n.complete());function MT(n){return n&&ie(n.schedule)}function NT(n){return n[n.length-1]}function Wl(n){return ie(NT(n))?n.pop():void 0}function Kr(n){return MT(NT(n))?n.pop():void 0}function Kl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function kT(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function l(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function PT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(n){return this instanceof Ai?(this.v=n,this):new Ai(n)}function xT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(_){return Promise.resolve(_).then(y,p)}}function a(y,_){r[y]&&(i[y]=function(A){return new Promise(function(M,L){s.push([y,A,M,L])>1||l(y,A)})},_&&(i[y]=_(i[y])))}function l(y,_){try{u(r[y](_))}catch(A){g(s[0][3],A)}}function u(y){y.value instanceof Ai?Promise.resolve(y.value.v).then(h,p):g(s[0][2],y)}function h(y){l("next",y)}function p(y){l("throw",y)}function g(y,_){y(_),s.shift(),s.length&&l(s[0][0],s[0][1])}}function OT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof PT=="function"?PT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var Ql=n=>n&&typeof n.length=="number"&&typeof n!="function";function Yl(n){return ie(n?.then)}function Zl(n){return ie(n[Ps])}function Jl(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function Xl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Nk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var eu=Nk();function tu(n){return ie(n?.[eu])}function nu(n){return xT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ai(t.read());if(i)return yield Ai(void 0);yield yield Ai(r)}}finally{t.releaseLock()}})}function ru(n){return ie(n?.getReader)}function Je(n){if(n instanceof Ce)return n;if(n!=null){if(Zl(n))return Pk(n);if(Ql(n))return kk(n);if(Yl(n))return xk(n);if(Jl(n))return FT(n);if(tu(n))return Ok(n);if(ru(n))return Fk(n)}throw Xl(n)}function Pk(n){return new Ce(e=>{let t=n[Ps]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kk(n){return new Ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function xk(n){return new Ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zl)})}function Ok(n){return new Ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function FT(n){return new Ce(e=>{Lk(n,e).catch(t=>e.error(t))})}function Fk(n){return FT(nu(n))}function Lk(n,e){var t,r,i,s;return kT(this,void 0,void 0,function*(){try{for(t=OT(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ot(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function iu(n,e=0){return we((t,r)=>{t.subscribe(ve(r,i=>Ot(r,n,()=>r.next(i),e),()=>Ot(r,n,()=>r.complete(),e),i=>Ot(r,n,()=>r.error(i),e)))})}function su(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function LT(n,e){return Je(n).pipe(su(e),iu(e))}function VT(n,e){return Je(n).pipe(su(e),iu(e))}function jT(n,e){return new Ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function UT(n,e){return new Ce(t=>{let r;return Ot(t,e,()=>{r=n[eu](),Ot(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function ou(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ce(t=>{Ot(t,e,()=>{let r=n[Symbol.asyncIterator]();Ot(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function BT(n,e){return ou(nu(n),e)}function $T(n,e){if(n!=null){if(Zl(n))return LT(n,e);if(Ql(n))return jT(n,e);if(Yl(n))return VT(n,e);if(Jl(n))return ou(n,e);if(tu(n))return UT(n,e);if(ru(n))return BT(n,e)}throw Xl(n)}function Ae(n,e){return e?$T(n,e):Je(n)}function ee(...n){let e=Kr(n);return Ae(n,e)}function nn(n,e){let t=ie(n)?n:()=>n,r=i=>i.error(t());return new Ce(e?i=>e.schedule(r,0,i):r)}function ag(n){return!!n&&(n instanceof Ce||ie(n.lift)&&ie(n.subscribe))}var mr=As(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function le(n,e){return we((t,r)=>{let i=0;t.subscribe(ve(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:Vk}=Array;function jk(n,e){return Vk(e)?n(...e):n(e)}function au(n){return le(e=>jk(n,e))}var{isArray:Uk}=Array,{getPrototypeOf:Bk,prototype:$k,keys:Hk}=Object;function cu(n){if(n.length===1){let e=n[0];if(Uk(e))return{args:e,keys:null};if(zk(e)){let t=Hk(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function zk(n){return n&&typeof n=="object"&&Bk(n)===$k}function lu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ma(...n){let e=Kr(n),t=Wl(n),{args:r,keys:i}=cu(n);if(r.length===0)return Ae([],e);let s=new Ce(qk(r,e,i?o=>lu(i,o):qt));return t?s.pipe(au(t)):s}function qk(n,e,t=qt){return r=>{HT(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)HT(e,()=>{let u=Ae(n[l],e),h=!1;u.subscribe(ve(r,p=>{s[l]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function HT(n,e,t){n?Ot(t,n,e):e()}function zT(n,e,t,r,i,s,o,a){let l=[],u=0,h=0,p=!1,g=()=>{p&&!l.length&&!u&&e.complete()},y=A=>u<r?_(A):l.push(A),_=A=>{s&&e.next(A),u++;let M=!1;Je(t(A,h++)).subscribe(ve(e,L=>{i?.(L),s?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(u--;l.length&&u<r;){let L=l.shift();o?Ot(e,o,()=>_(L)):_(L)}g()}catch(L){e.error(L)}}))};return n.subscribe(ve(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Ye(n,e,t=1/0){return ie(e)?Ye((r,i)=>le((s,o)=>e(r,s,i,o))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),we((r,i)=>zT(r,i,n,t)))}function Os(n=1/0){return Ye(qt,n)}function qT(){return Os(1)}function Fs(...n){return qT()(Ae(n,Kr(n)))}function uu(n){return new Ce(e=>{Je(n()).subscribe(e)})}function cg(...n){let e=Wl(n),{args:t,keys:r}=cu(n),i=new Ce(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let h=0;h<o;h++){let p=!1;Je(t[h]).subscribe(ve(s,g=>{p||(p=!0,u--),a[h]=g},()=>l--,void 0,()=>{(!l||!p)&&(u||s.next(r?lu(r,a):a),s.complete())}))}});return e?i.pipe(au(e)):i}function Gt(n,e){return we((t,r)=>{let i=0;t.subscribe(ve(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Rt(n){return we((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ve(t,void 0,void 0,o=>{s=Je(n(o,Rt(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function GT(n,e,t,r,i){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(ve(o,h=>{let p=u++;l=a?n(l,h,p):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function Qr(n,e){return ie(e)?Ye(n,e,1):Ye(n,1)}function Yr(n){return we((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function yr(n){return n<=0?()=>xt:we((e,t)=>{let r=0;e.subscribe(ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function du(n=Gk){return we((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Gk(){return new mr}function Na(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,s)=>n(i,s,r)):qt,yr(1),t?Yr(e):du(()=>new mr))}function Ls(n){return n<=0?()=>xt:we((e,t)=>{let r=[];e.subscribe(ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function lg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,s)=>n(i,s,r)):qt,Ls(1),t?Yr(e):du(()=>new mr))}function ug(n,e){return we(GT(n,e,arguments.length>=2,!0))}function dg(...n){let e=Kr(n);return we((t,r)=>{(e?Fs(n,t,e):Fs(n,t)).subscribe(r)})}function rn(n,e){return we((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ve(r,l=>{i?.unsubscribe();let u=0,h=s++;Je(n(l,h)).subscribe(i=ve(r,p=>r.next(e?e(l,p,h,u++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function hg(n){return we((e,t)=>{Je(n).subscribe(ve(t,()=>t.complete(),Ra)),!t.closed&&e.subscribe(t)})}function gt(n,e,t){let r=ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ve(s,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),s.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):qt}var Wk="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",x=class extends Error{code;constructor(e,t){super(kb(e,t)),this.code=e}};function Kk(n){return`NG0${Math.abs(n)}`}function kb(n,e){return`${Kk(n)}${e?": "+e:""}`}var xb=Symbol("InputSignalNode#UNSET"),Qk=ae(O({},Ul),{transformFn:void 0,applyValueToInputSignal(n,e){Ca(n,e)}});function Ob(n,e){let t=Object.create(Qk);t.value=n,t.transformFn=e?.transform;function r(){if(Da(t),t.value===xb){let i=null;throw new x(-950,i)}return t.value}return r[_n]=t,r}function $a(n){return{toString:n}.toString()}var hu="__parameters__";function Yk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Fb(n,e,t){return $a(()=>{let r=Yk(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,u,h){let p=l.hasOwnProperty(hu)?l[hu]:Object.defineProperty(l,hu,{value:[]})[hu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function ke(n){for(let e in n)if(n[e]===ke)return e;throw Error("Could not find renamed property on target object.")}function Zk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Lt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Lt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function WT(n,e){return n?e?`${n} ${e}`:n:e||""}var Jk=ke({__forward_ref__:ke});function $i(n){return n.__forward_ref__=$i,n.toString=function(){return Lt(this())},n}function Mt(n){return Lb(n)?n():n}function Lb(n){return typeof n=="function"&&n.hasOwnProperty(Jk)&&n.__forward_ref__===$i}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function zu(n){return KT(n,jb)||KT(n,Ub)}function Vb(n){return zu(n)!==null}function KT(n,e){return n.hasOwnProperty(e)?n[e]:null}function Xk(n){let e=n&&(n[jb]||n[Ub]);return e||null}function QT(n){return n&&(n.hasOwnProperty(YT)||n.hasOwnProperty(ex))?n[YT]:null}var jb=ke({\u0275prov:ke}),YT=ke({\u0275inj:ke}),Ub=ke({ngInjectableDef:ke}),ex=ke({ngInjectorDef:ke}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Bb(n){return n&&!!n.\u0275providers}var tx=ke({\u0275cmp:ke}),nx=ke({\u0275dir:ke}),rx=ke({\u0275pipe:ke}),ix=ke({\u0275mod:ke}),_u=ke({\u0275fac:ke}),Oa=ke({__NG_ELEMENT_ID__:ke}),ZT=ke({__NG_ENV_ID__:ke});function Fa(n){return typeof n=="string"?n:n==null?"":String(n)}function sx(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Fa(n)}function $b(n,e){throw new x(-200,n)}function gm(n,e){throw new x(-201,!1)}var ue=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ue||{}),Cg;function Hb(){return Cg}function Ft(n){let e=Cg;return Cg=n,e}function zb(n,e,t){let r=zu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ue.Optional)return null;if(e!==void 0)return e;gm(n,"Injector")}var ox={},Ri=ox,Sg="__NG_DI_FLAG__",Eu=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Bl:Ri,r)}},wu="ngTempTokenPath",ax="ngTokenPath",cx=/\n/gm,lx="\u0275",JT="__source";function ux(n,e=ue.Default){if(Sa()===void 0)throw new x(-203,!1);if(Sa()===null)return zb(n,void 0,e);{let t=Sa(),r;return t instanceof Eu?r=t.injector:r=t,r.get(n,e&ue.Optional?null:void 0,e)}}function J(n,e=ue.Default){return(Hb()||ux)(Mt(n),e)}function P(n,e=ue.Default){return J(n,qu(e))}function qu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ag(n){let e=[];for(let t=0;t<n.length;t++){let r=Mt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new x(900,!1);let i,s=ue.Default;for(let o=0;o<r.length;o++){let a=r[o],l=dx(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function qb(n,e){return n[Sg]=e,n.prototype[Sg]=e,n}function dx(n){return n[Sg]}function hx(n,e,t,r){let i=n[wu];throw e[JT]&&i.unshift(e[JT]),n.message=fx(`
`+n.message,i,t,r),n[ax]=i,n[wu]=null,n}function fx(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==lx?n.slice(2):n;let i=Lt(e);if(Array.isArray(e))i=e.map(Lt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Lt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(cx,`
  `)}`}var px=qb(Fb("Optional"),8);var gx=qb(Fb("SkipSelf"),4);function Ni(n,e){let t=n.hasOwnProperty(_u);return t?n[_u]:null}function mm(n,e){n.forEach(t=>Array.isArray(t)?mm(t,e):e(t))}function Gb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Iu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function mx(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function yx(n,e,t){let r=Ha(n,e);return r>=0?n[r|1]=t:(r=~r,mx(n,r,e,t)),r}function fg(n,e){let t=Ha(n,e);if(t>=0)return n[t|1]}function Ha(n,e){return vx(n,e,1)}function vx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Pi={},sn=[],La=new K(""),Wb=new K("",-1),Kb=new K(""),Tu=class{get(e,t=Ri){if(t===Ri){let r=new Error(`NullInjectorError: No provider for ${Lt(e)}!`);throw r.name="NullInjectorError",r}return t}};function Qb(n,e){let t=n[ix]||null;if(!t&&e===!0)throw new Error(`Type ${Lt(n)} does not have '\u0275mod' property.`);return t}function ki(n){return n[tx]||null}function _x(n){return n[nx]||null}function Ex(n){return n[rx]||null}function ym(n){return{\u0275providers:n}}function vm(...n){return{\u0275providers:Yb(!0,n),\u0275fromNgModule:!0}}function Yb(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return mm(e,o=>{let a=o;Rg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Zb(i,s),t}function Zb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_m(i,s=>{e(s,r)})}}function Rg(n,e,t,r){if(n=Mt(n),!n)return!1;let i=null,s=QT(n),o=!s&&ki(n);if(!s&&!o){let l=n.ngModule;if(s=QT(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)Rg(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{mm(s.imports,h=>{Rg(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&Zb(u,e)}if(!a){let u=Ni(i)||(()=>new i);e({provide:i,useFactory:u,deps:sn},i),e({provide:Kb,useValue:i,multi:!0},i),e({provide:La,useValue:()=>J(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let u=n;_m(l,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function _m(n,e){for(let t of n)Bb(t)&&(t=t.\u0275providers),Array.isArray(t)?_m(t,e):e(t)}var wx=ke({provide:String,useValue:ke});function Jb(n){return n!==null&&typeof n=="object"&&wx in n}function Ix(n){return!!(n&&n.useExisting)}function Tx(n){return!!(n&&n.useFactory)}function zs(n){return typeof n=="function"}function bx(n){return!!n.useClass}var Gu=new K(""),pu={},XT={},pg;function Em(){return pg===void 0&&(pg=new Tu),pg}var Vt=class{},Va=class extends Vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Ng(e,o=>this.processProvider(o)),this.records.set(Wb,Vs(void 0,this)),i.has("environment")&&this.records.set(Vt,Vs(void 0,this));let s=this.records.get(Gu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Kb,sn,ue.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Bl:Ri,r)}destroy(){ka(this),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return ka(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ka(this);let t=gr(this),r=Ft(void 0),i;try{return e()}finally{gr(t),Ft(r)}}get(e,t=Ri,r=ue.Default){if(ka(this),e.hasOwnProperty(ZT))return e[ZT](this);r=qu(r);let i,s=gr(this),o=Ft(void 0);try{if(!(r&ue.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=Rx(e)&&zu(e);u&&this.injectableDefInScope(u)?l=Vs(Mg(e),pu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,r)}let a=r&ue.Self?Em():this.parent;return t=r&ue.Optional&&t===Ri?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[wu]=a[wu]||[]).unshift(Lt(e)),s)throw a;return hx(a,e,"R3InjectorError",this.source)}else throw a}finally{Ft(o),gr(s)}}resolveInjectorInitializers(){let e=ye(null),t=gr(this),r=Ft(void 0),i;try{let s=this.get(La,sn,ue.Self);for(let o of s)o()}finally{gr(t),Ft(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Lt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Mt(e);let t=zs(e)?e:Mt(e&&e.provide),r=Cx(e);if(!zs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Vs(void 0,pu,!0),i.factory=()=>Ag(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ye(null);try{return t.value===XT?$b(Lt(e)):t.value===pu&&(t.value=XT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Ax(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Mt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Mg(n){let e=zu(n),t=e!==null?e.factory:Ni(n);if(t!==null)return t;if(n instanceof K)throw new x(204,!1);if(n instanceof Function)return Dx(n);throw new x(204,!1)}function Dx(n){if(n.length>0)throw new x(204,!1);let t=Xk(n);return t!==null?()=>t.factory(n):()=>new n}function Cx(n){if(Jb(n))return Vs(void 0,n.useValue);{let e=Xb(n);return Vs(e,pu)}}function Xb(n,e,t){let r;if(zs(n)){let i=Mt(n);return Ni(i)||Mg(i)}else if(Jb(n))r=()=>Mt(n.useValue);else if(Tx(n))r=()=>n.useFactory(...Ag(n.deps||[]));else if(Ix(n))r=(i,s)=>J(Mt(n.useExisting),s!==void 0&&s&ue.Optional?ue.Optional:void 0);else{let i=Mt(n&&(n.useClass||n.provide));if(Sx(n))r=()=>new i(...Ag(n.deps));else return Ni(i)||Mg(i)}return r}function ka(n){if(n.destroyed)throw new x(205,!1)}function Vs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Sx(n){return!!n.deps}function Ax(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Rx(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function Ng(n,e){for(let t of n)Array.isArray(t)?Ng(t,e):t&&Bb(t)?Ng(t.\u0275providers,e):e(t)}function un(n,e){let t;n instanceof Va?(ka(n),t=n):t=new Eu(n);let r,i=gr(t),s=Ft(void 0);try{return e()}finally{gr(i),Ft(s)}}function eD(){return Hb()!==void 0||Sa()!=null}function Mx(n){if(!eD())throw new x(-203,!1)}function Nx(n){return typeof n=="function"}var Er=0,Ee=1,se=2,Nt=3,In=4,bn=5,bu=6,Du=7,jt=8,xi=9,Xr=10,at=11,ja=12,eb=13,Xs=14,Un=15,qs=16,js=17,Gs=18,Wu=19,tD=20,Zr=21,gg=22,Cu=23,on=24,$s=25,cn=26,nD=1;var Oi=7,Su=8,Au=9,an=10;function Jr(n){return Array.isArray(n)&&typeof n[nD]=="object"}function wr(n){return Array.isArray(n)&&n[nD]===!0}function wm(n){return(n.flags&4)!==0}function eo(n){return n.componentOffset>-1}function Ku(n){return(n.flags&1)===1}function Bn(n){return!!n.template}function Ru(n){return(n[se]&512)!==0}function to(n){return(n[se]&256)===256}var Pg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function rD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Hi=(()=>{let n=()=>iD;return n.ngInherit=!0,n})();function iD(n){return n.type.prototype.ngOnChanges&&(n.setInput=kx),Px}function Px(){let n=oD(this),e=n?.current;if(e){let t=n.previous;if(t===Pi)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function kx(n,e,t,r,i){let s=this.declaredInputs[r],o=oD(n)||xx(n,{previous:Pi,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new Pg(u&&u.currentValue,t,l===Pi),rD(n,e,i,t)}var sD="__ngSimpleChanges__";function oD(n){return n[sD]||null}function xx(n,e){return n[sD]=e}var tb=null;var Me=function(n,e=null,t){tb?.(n,e,t)},Ox="svg",Fx="math";function $n(n){for(;Array.isArray(n);)n=n[Er];return n}function aD(n,e){return $n(e[n])}function Gn(n,e){return $n(e[n.index])}function cD(n,e){return n.data[e]}function Lx(n,e){return n[e]}function Hn(n,e){let t=e[n];return Jr(t)?t:t[Er]}function Im(n){return(n[se]&128)===128}function Vx(n){return wr(n[Nt])}function Ws(n,e){return e==null?null:n[e]}function lD(n){n[js]=0}function uD(n){n[se]&1024||(n[se]|=1024,Im(n)&&za(n))}function jx(n,e){for(;n>0;)e=e[Xs],n--;return e}function Qu(n){return!!(n[se]&9216||n[on]?.dirty)}function kg(n){n[Xr].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Qu(n)&&za(n)}function za(n){n[Xr].changeDetectionScheduler?.notify(0);let e=Fi(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Im(e)));)e=Fi(e)}function dD(n,e){if(to(n))throw new x(911,!1);n[Zr]===null&&(n[Zr]=[]),n[Zr].push(e)}function Ux(n,e){if(n[Zr]===null)return;let t=n[Zr].indexOf(e);t!==-1&&n[Zr].splice(t,1)}function Fi(n){let e=n[Nt];return wr(e)?e[Nt]:e}function hD(n){return n[Du]??=[]}function fD(n){return n.cleanup??=[]}var pe={lFrame:wD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var xg=!1;function Bx(){return pe.lFrame.elementDepthCount}function $x(){pe.lFrame.elementDepthCount++}function Hx(){pe.lFrame.elementDepthCount--}function Tm(){return pe.bindingsEnabled}function zx(){return pe.skipHydrationRootTNode!==null}function qx(n){return pe.skipHydrationRootTNode===n}function Gx(){pe.skipHydrationRootTNode=null}function xe(){return pe.lFrame.lView}function Pt(){return pe.lFrame.tView}function mt(n){return pe.lFrame.contextLView=n,n[jt]}function yt(n){return pe.lFrame.contextLView=null,n}function Wt(){let n=pD();for(;n!==null&&n.type===64;)n=n.parent;return n}function pD(){return pe.lFrame.currentTNode}function Wx(){let n=pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function zi(n,e){let t=pe.lFrame;t.currentTNode=n,t.isParent=e}function bm(){return pe.lFrame.isParent}function gD(){pe.lFrame.isParent=!1}function mD(){return xg}function nb(n){let e=xg;return xg=n,e}function Kx(){let n=pe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Qx(){return pe.lFrame.bindingIndex}function Yx(n){return pe.lFrame.bindingIndex=n}function Dm(){return pe.lFrame.bindingIndex++}function yD(n){let e=pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Zx(){return pe.lFrame.inI18n}function Jx(n,e){let t=pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Og(e)}function Xx(){return pe.lFrame.currentDirectiveIndex}function Og(n){pe.lFrame.currentDirectiveIndex=n}function eO(n){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function vD(n){pe.lFrame.currentQueryIndex=n}function tO(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[bn]:null}function _D(n,e,t){if(t&ue.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ue.Host);)if(i=tO(s),i===null||(s=s[Xs],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=pe.lFrame=ED();return r.currentTNode=e,r.lView=n,!0}function Cm(n){let e=ED(),t=n[Ee];pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ED(){let n=pe.lFrame,e=n===null?null:n.child;return e===null?wD(n):e}function wD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ID(){let n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var TD=ID;function Sm(){let n=ID();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function nO(n){return(pe.lFrame.contextLView=jx(n,pe.lFrame.contextLView))[jt]}function qi(){return pe.lFrame.selectedIndex}function Li(n){pe.lFrame.selectedIndex=n}function Am(){let n=pe.lFrame;return cD(n.tView,n.selectedIndex)}function rO(){return pe.lFrame.currentNamespace}var bD=!0;function Yu(){return bD}function Zu(n){bD=n}function iO(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=iD(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Rm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function gu(n,e,t){DD(n,e,3,t)}function mu(n,e,t,r){(n[se]&3)===t&&DD(n,e,t,r)}function mg(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function DD(n,e,t,r){let i=r!==void 0?n[js]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[js]+=65536),(a<s||s==-1)&&(sO(n,t,e,l),n[js]=(n[js]&4294901760)+l+2),l++}function rb(n,e){Me(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),Me(5,n,e)}}function sO(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[se]>>14<n[js]>>16&&(n[se]&3)===e&&(n[se]+=16384,rb(a,s)):rb(a,s)}var Hs=-1,Vi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function oO(n){return(n.flags&8)!==0}function aO(n){return(n.flags&16)!==0}function cO(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];uO(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function lO(n){return n===3||n===4||n===6}function uO(n){return n.charCodeAt(0)===64}function Ks(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ib(n,t,i,null,e[++r]):ib(n,t,i,null,null))}}return n}function ib(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function CD(n){return n!==Hs}function Mu(n){return n&32767}function dO(n){return n>>16}function Nu(n,e){let t=dO(n),r=e;for(;t>0;)r=r[Xs],t--;return r}var Fg=!0;function Pu(n){let e=Fg;return Fg=n,e}var hO=256,SD=hO-1,AD=5,fO=0,jn={};function pO(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Oa)&&(r=t[Oa]),r==null&&(r=t[Oa]=fO++);let i=r&SD,s=1<<i;e.data[n+(i>>AD)]|=s}function ku(n,e){let t=RD(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,yg(r.data,n),yg(e,null),yg(r.blueprint,null));let i=Mm(n,e),s=n.injectorIndex;if(CD(i)){let o=Mu(i),a=Nu(i,e),l=a[Ee].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function yg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function RD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Mm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=xD(i),r===null)return Hs;if(t++,i=i[Xs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Hs}function Lg(n,e,t){pO(n,e,t)}function MD(n,e,t){if(t&ue.Optional||n!==void 0)return n;gm(e,"NodeInjector")}function ND(n,e,t,r){if(t&ue.Optional&&r===void 0&&(r=null),(t&(ue.Self|ue.Host))===0){let i=n[xi],s=Ft(void 0);try{return i?i.get(e,r,t&ue.Optional):zb(e,r,t&ue.Optional)}finally{Ft(s)}}return MD(r,e,t)}function PD(n,e,t,r=ue.Default,i){if(n!==null){if(e[se]&2048&&!(r&ue.Self)){let o=_O(n,e,t,r,jn);if(o!==jn)return o}let s=kD(n,e,t,r,jn);if(s!==jn)return s}return ND(e,t,r,i)}function kD(n,e,t,r,i){let s=yO(t);if(typeof s=="function"){if(!_D(e,n,r))return r&ue.Host?MD(i,t,r):ND(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ue.Optional))gm(t);else return o}finally{TD()}}else if(typeof s=="number"){let o=null,a=RD(n,e),l=Hs,u=r&ue.Host?e[Un][bn]:null;for((a===-1||r&ue.SkipSelf)&&(l=a===-1?Mm(n,e):e[a+8],l===Hs||!ob(r,!1)?a=-1:(o=e[Ee],a=Mu(l),e=Nu(l,e)));a!==-1;){let h=e[Ee];if(sb(s,a,h.data)){let p=gO(a,e,t,o,r,u);if(p!==jn)return p}l=e[a+8],l!==Hs&&ob(r,e[Ee].data[a+8]===u)&&sb(s,a,e)?(o=h,a=Mu(l),e=Nu(l,e)):a=-1}}return i}function gO(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],l=r==null?eo(a)&&Fg:r!=o&&(a.type&3)!==0,u=i&ue.Host&&s===a,h=mO(a,o,t,l,u);return h!==null?xu(e,o,h,a,i):jn}function mO(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,u=n.directiveEnd,h=s>>20,p=r?a:a+h,g=i?a+h:u;for(let y=p;y<g;y++){let _=o[y];if(y<l&&t===_||y>=l&&_.type===t)return y}if(i){let y=o[l];if(y&&Bn(y)&&y.type===t)return l}return null}function xu(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Vi){let a=s;a.resolving&&$b(sx(o[t]));let l=Pu(a.canSeeViewProviders);a.resolving=!0;let u,h=a.injectImpl?Ft(a.injectImpl):null,p=_D(n,r,ue.Default);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&iO(t,o[t],e)}finally{h!==null&&Ft(h),Pu(l),a.resolving=!1,TD()}}return s}function yO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Oa)?n[Oa]:void 0;return typeof e=="number"?e>=0?e&SD:vO:e}function sb(n,e,t){let r=1<<n;return!!(t[e+(n>>AD)]&r)}function ob(n,e){return!(n&ue.Self)&&!(n&ue.Host&&e)}var Mi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return PD(this._tNode,this._lView,e,qu(r),t)}};function vO(){return new Mi(Wt(),xe())}function no(n){return $a(()=>{let e=n.prototype.constructor,t=e[_u]||Vg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[_u]||Vg(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Vg(n){return Lb(n)?()=>{let e=Vg(Mt(n));return e&&e()}:Ni(n)}function _O(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[se]&2048&&!Ru(o);){let a=kD(s,o,t,r|ue.Self,jn);if(a!==jn)return a;let l=s.parent;if(!l){let u=o[tD];if(u){let h=u.get(t,jn,r);if(h!==jn)return h}l=xD(o),o=o[Xs]}s=l}return i}function xD(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[bn]:null}function ab(n,e=null,t=null,r){let i=OD(n,e,t,r);return i.resolveInjectorInitializers(),i}function OD(n,e=null,t=null,r,i=new Set){let s=[t||sn,vm(n)];return r=r||(typeof n=="object"?void 0:Lt(n)),new Va(s,e||Em(),r||null,i)}var ln=class n{static THROW_IF_NOT_FOUND=Ri;static NULL=new Tu;static create(e,t){if(Array.isArray(e))return ab({name:""},t,e,"");{let r=e.name??"";return ab({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>J(Wb)});static __NG_ELEMENT_ID__=-1};var EO=new K("");EO.__NG_ELEMENT_ID__=n=>{let e=Wt();if(e===null)throw new x(204,!1);if(e.type&2)return e.value;if(n&ue.Optional)return null;throw new x(204,!1)};var FD=!1,qa=(()=>{class n{static __NG_ELEMENT_ID__=wO;static __NG_ENV_ID__=t=>t}return n})(),jg=class extends qa{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return to(t)?(e(),()=>{}):(dD(t,e),()=>Ux(t,e))}};function wO(){return new jg(xe())}var Qs=class{},LD=new K("",{providedIn:"root",factory:()=>!1});var VD=new K(""),jD=new K(""),ro=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ge(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})();var Ug=class extends st{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,eD()&&(this.destroyRef=P(qa,{optional:!0})??void 0,this.pendingTasks=P(ro,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ot=Ug;function Ou(...n){}function UD(n){let e,t;function r(){n=Ou;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function cb(n){return queueMicrotask(()=>n()),()=>{n=Ou}}var Nm="isAngularZone",Fu=Nm+"_ID",IO=0,We=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ot(!1);onMicrotaskEmpty=new ot(!1);onStable=new ot(!1);onError=new ot(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=FD}=e;if(typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,DO(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Nm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new x(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,TO,Ou,Ou);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},TO={};function Pm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function bO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){UD(()=>{n.callbackScheduled=!1,Bg(n),n.isCheckStableRunning=!0,Pm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Bg(n)}function DO(n){let e=()=>{bO(n)},t=IO++;n._inner=n._inner.fork({name:"angular",properties:{[Nm]:!0,[Fu]:t,[Fu+t]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(CO(l))return r.invokeTask(s,o,a,l);try{return lb(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ub(n)}},onInvoke:(r,i,s,o,a,l,u)=>{try{return lb(n),r.invoke(s,o,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!SO(l)&&e(),ub(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Bg(n),Pm(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Bg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function lb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ub(n){n._nesting--,Pm(n)}var $g=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ot;onMicrotaskEmpty=new ot;onStable=new ot;onError=new ot;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function CO(n){return BD(n,"__ignore_ng_zone__")}function SO(n){return BD(n,"__scheduler_tick__")}function BD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},AO=new K("",{providedIn:"root",factory:()=>{let n=P(We),e=P(zn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function db(n,e){return Ob(n,e)}function RO(n){return Ob(xb,n)}var $D=(db.required=RO,db);function MO(){return Ju(Wt(),xe())}function Ju(n,e){return new Gi(Gn(n,e))}var Gi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=MO}return n})();function Ga(n,e){let t=Kp(n,e?.equal),r=t[_n];return t.set=i=>Ca(r,i),t.update=i=>Qp(r,i),t.asReadonly=NO.bind(t),t}function NO(){let n=this[_n];if(n.readonlyFn===void 0){let e=()=>this();e[_n]=n,n.readonlyFn=e}return n.readonlyFn}function HD(n){return(n.flags&128)===128}var zD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zD||{}),qD=new Map,PO=0;function kO(){return PO++}function xO(n){qD.set(n[Wu],n)}function Hg(n){qD.delete(n[Wu])}var hb="__ngContext__";function io(n,e){Jr(e)?(n[hb]=e[Wu],xO(e)):n[hb]=e}function GD(n){return KD(n[ja])}function WD(n){return KD(n[In])}function KD(n){for(;n!==null&&!wr(n);)n=n[In];return n}var zg;function QD(n){zg=n}function OO(){if(zg!==void 0)return zg;if(typeof document<"u")return document;throw new x(210,!1)}var Xu=new K("",{providedIn:"root",factory:()=>FO}),FO="ng",km=new K(""),so=new K("",{providedIn:"platform",factory:()=>"unknown"});var xm=new K(""),Om=new K("",{providedIn:"root",factory:()=>OO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var LO="h",VO="b";var YD=!1,jO=new K("",{providedIn:"root",factory:()=>YD});var Fm=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Fm||{}),oo=new K(""),fb=new Set;function Wi(n){fb.has(n)||(fb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ZD=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=UO}return n})();function UO(){return new ZD(xe(),Wt())}var Us=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Us||{}),JD=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),BO=[Us.EarlyRead,Us.Write,Us.MixedReadWrite,Us.Read],$O=(()=>{class n{ngZone=P(We);scheduler=P(Qs);errorHandler=P(zn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(oo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Me(16),this.executing=!0;for(let r of BO)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Me(17)}register(t){let{view:r}=t;r!==void 0?((r[$s]??=[]).push(t),za(r),r[se]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Fm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),qg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[$s];e&&(this.view[$s]=e.filter(t=>t!==this))}};function Lm(n,e){!e?.injector&&Mx(Lm);let t=e?.injector??P(ln);return Wi("NgAfterNextRender"),zO(n,t,e,!0)}function HO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function zO(n,e,t,r){let i=e.get(JD);i.impl??=e.get($O);let s=e.get(oo,null,{optional:!0}),o=t?.phase??Us.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(qa):null,l=e.get(ZD,null,{optional:!0}),u=new qg(i.impl,HO(n,o),l?.view,r,a,s?.snapshot(null));return i.impl.register(u),u}var qO=()=>null;function XD(n,e,t=!1){return qO(n,e,t)}function eC(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];vD(s),a.contentQueries(2,e[o],o)}}}finally{ye(r)}}}function Gg(n,e,t){vD(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function Vm(n,e,t){if(wm(e)){let r=ye(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{ye(r)}}}var qn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(qn||{});var Wg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wk})`}};function tC(n){return n instanceof Wg?n.changingThisBreaksApplicationSecurity:n}var GO=/^>|^->|<!--|-->|--!>|<!-$/g,WO=/(<|>)/g,KO="\u200B$1\u200B";function QO(n){return n.replace(GO,e=>e.replace(WO,KO))}function nC(n){return n instanceof Function?n():n}function YO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var rC="ng-template";function ZO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&YO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(jm(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function jm(n){return n.type===4&&n.value!==rC}function JO(n,e,t){let r=n.type===4&&!t?rC:n.value;return e===r}function XO(n,e,t){let r=4,i=n.attrs,s=i!==null?n1(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!wn(r)&&!wn(l))return!1;if(o&&wn(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!JO(n,l,t)||l===""&&e.length===1){if(wn(r))return!1;o=!0}}else if(r&8){if(i===null||!ZO(n,i,l,t)){if(wn(r))return!1;o=!0}}else{let u=e[++a],h=e1(l,i,jm(n),t);if(h===-1){if(wn(r))return!1;o=!0;continue}if(u!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(wn(r))return!1;o=!0}}}}return wn(r)||o}function wn(n){return(n&1)===0}function e1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return r1(e,n)}function t1(n,e,t=!1){for(let r=0;r<e.length;r++)if(XO(n,e[r],t))return!0;return!1}function n1(n){for(let e=0;e<n.length;e++){let t=n[e];if(lO(t))return e}return n.length}function r1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function pb(n,e){return n?":not("+e.trim()+")":e}function i1(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!wn(o)&&(e+=pb(s,i),i=""),r=o,s=s||!wn(r);t++}return i!==""&&(e+=pb(s,i)),e}function s1(n){return n.map(i1).join(",")}function o1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!wn(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var Wn={};function a1(n,e){return n.createText(e)}function c1(n,e,t){n.setValue(e,t)}function l1(n,e){return n.createComment(QO(e))}function iC(n,e,t){return n.createElement(e,t)}function Lu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function sC(n,e,t){n.appendChild(e,t)}function gb(n,e,t,r,i){r!==null?Lu(n,e,t,r,i):sC(n,e,t)}function u1(n,e,t){n.removeChild(null,e,t)}function d1(n,e,t){n.setAttribute(e,"style",t)}function h1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function oC(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&cO(n,e,r),i!==null&&h1(n,e,i),s!==null&&d1(n,e,s)}function Um(n,e,t,r,i,s,o,a,l,u,h){let p=cn+r,g=p+i,y=f1(p,g),_=typeof u=="function"?u():u;return y[Ee]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1,ssrId:h}}function f1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Wn);return t}function p1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Um(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bm(n,e,t,r,i,s,o,a,l,u,h){let p=e.blueprint.slice();return p[Er]=i,p[se]=r|4|128|8|64|1024,(u!==null||n&&n[se]&2048)&&(p[se]|=2048),lD(p),p[Nt]=p[Xs]=n,p[jt]=t,p[Xr]=o||n&&n[Xr],p[at]=a||n&&n[at],p[xi]=l||n&&n[xi]||null,p[bn]=s,p[Wu]=kO(),p[bu]=h,p[tD]=u,p[Un]=e.type==2?n[Un]:p,p}function g1(n,e,t){let r=Gn(e,n),i=p1(t),s=n[Xr].rendererFactory,o=$m(n,Bm(n,i,null,aC(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function aC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function cC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $m(n,e){return n[ja]?n[eb][In]=e:n[ja]=e,n[eb]=e,e}function Y(n=1){lC(Pt(),xe(),qi()+n,!1)}function lC(n,e,t,r){if(!r)if((e[se]&3)===3){let s=n.preOrderCheckHooks;s!==null&&gu(e,s,t)}else{let s=n.preOrderHooks;s!==null&&mu(e,s,0,t)}Li(t)}var ed=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ed||{});function Kg(n,e,t,r){let i=ye(null);try{let[s,o,a]=n.inputs[t],l=null;(o&ed.SignalBased)!==0&&(l=e[s][_n]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,s):rD(e,l,s,r)}finally{ye(i)}}function uC(n,e,t,r,i){let s=qi(),o=r&2;try{Li(-1),o&&e.length>cn&&lC(n,e,cn,!1),Me(o?2:0,i),t(r,i)}finally{Li(s),Me(o?3:1,i)}}function td(n,e,t){w1(n,e,t),(t.flags&64)===64&&I1(n,e,t)}function Hm(n,e,t=Gn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function m1(n,e,t,r){let s=r.get(jO,YD)||t===qn.ShadowDom,o=n.selectRootElement(e,s);return y1(o),o}function y1(n){v1(n)}var v1=()=>null;function _1(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function dC(n,e,t,r,i,s,o,a){if(!a&&qm(e,n,t,r,i)){eo(e)&&E1(t,e.index);return}if(e.type&3){let l=Gn(e,t);r=_1(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)}else e.type&12}function E1(n,e){let t=Hn(e,n);t[se]&16||(t[se]|=64)}function w1(n,e,t){let r=t.directiveStart,i=t.directiveEnd;eo(t)&&g1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||ku(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],l=xu(e,n,o,t);if(io(l,e),s!==null&&C1(e,o-r,l,a,t,s),Bn(a)){let u=Hn(t.index,e);u[jt]=xu(e,n,o,t)}}}function I1(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=Xx();try{Li(s);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Og(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&T1(l,u)}}finally{Li(-1),Og(o)}}function T1(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zm(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];t1(e,s.selectors,!1)&&(r??=[],Bn(s)?r.unshift(s):r.push(s))}return r}function b1(n,e,t,r,i,s){let o=Gn(n,e);D1(e[at],o,s,n.value,t,r,i)}function D1(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Fa(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function C1(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],u=o[a+1];Kg(r,t,l,u)}}function S1(n,e){let t=n[xi],r=t?t.get(zn,null):null;r&&r.handleError(e)}function qm(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let l=0;l<o.length;l+=2){let u=o[l],h=o[l+1],p=e.data[u];Kg(p,t[u],h,i),a=!0}if(s)for(let l of s){let u=t[l],h=e.data[l];Kg(h,u,r,i),a=!0}return a}function A1(n,e){let t=Hn(e,n),r=t[Ee];R1(r,t);let i=t[Er];i!==null&&t[bu]===null&&(t[bu]=XD(i,t[xi])),Me(18),Gm(r,t,t[jt]),Me(19,t[jt])}function R1(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Gm(n,e,t){Cm(e);try{let r=n.viewQuery;r!==null&&Gg(1,r,t);let i=n.template;i!==null&&uC(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Gs]?.finishViewCreation(n),n.staticContentQueries&&eC(n,e),n.staticViewQueries&&Gg(2,n.viewQuery,t);let s=n.components;s!==null&&M1(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Sm()}}function M1(n,e){for(let t=0;t<e.length;t++)A1(n,e[t])}function N1(n,e,t,r){let i=ye(null);try{let s=e.tView,a=n[se]&4096?4096:16,l=Bm(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[qs]=u;let h=n[Gs];return h!==null&&(l[Gs]=h.createEmbeddedView(s)),Gm(s,l,t),l}finally{ye(i)}}function mb(n,e){return!e||e.firstChild===null||HD(n)}var P1;function Wm(n,e){return P1(n,e)}var _r=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_r||{});function hC(n){return(n.flags&32)===32}function Bs(n,e,t,r,i){if(r!=null){let s,o=!1;wr(r)?s=r:Jr(r)&&(o=!0,r=r[Er]);let a=$n(r);n===0&&t!==null?i==null?sC(e,t,a):Lu(e,t,a,i||null,!0):n===1&&t!==null?Lu(e,t,a,i||null,!0):n===2?u1(e,a,o):n===3&&e.destroyNode(a),s!=null&&z1(e,n,s,t,i)}}function k1(n,e){fC(n,e),e[Er]=null,e[bn]=null}function x1(n,e,t,r,i,s){r[Er]=i,r[bn]=e,rd(n,r,t,1,i,s)}function fC(n,e){e[Xr].changeDetectionScheduler?.notify(9),rd(n,e,e[at],2,null,null)}function O1(n){let e=n[ja];if(!e)return vg(n[Ee],n);for(;e;){let t=null;if(Jr(e))t=e[ja];else{let r=e[an];r&&(t=r)}if(!t){for(;e&&!e[In]&&e!==n;)Jr(e)&&vg(e[Ee],e),e=e[Nt];e===null&&(e=n),Jr(e)&&vg(e[Ee],e),t=e&&e[In]}e=t}}function Km(n,e){let t=n[Au],r=t.indexOf(e);t.splice(r,1)}function pC(n,e){if(to(e))return;let t=e[at];t.destroyNode&&rd(n,e,t,3,null,null),O1(e)}function vg(n,e){if(to(e))return;let t=ye(null);try{e[se]&=-129,e[se]|=256,e[on]&&qp(e[on]),L1(n,e),F1(n,e),e[Ee].type===1&&e[at].destroy();let r=e[qs];if(r!==null&&wr(e[Nt])){r!==e[Nt]&&Km(r,e);let i=e[Gs];i!==null&&i.detachView(n)}Hg(e)}finally{ye(t)}}function F1(n,e){let t=n.cleanup,r=e[Du];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[Du]=null);let i=e[Zr];if(i!==null){e[Zr]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Cu];if(s!==null){e[Cu]=null;for(let o of s)o.destroy()}}function L1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Vi)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Me(4,a,l);try{l.call(a)}finally{Me(5,a,l)}}else{Me(4,i,s);try{s.call(i)}finally{Me(5,i,s)}}}}}function V1(n,e,t){return j1(n,e.parent,t)}function j1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Er];if(eo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qn.None||i===qn.Emulated)return null}return Gn(r,t)}function U1(n,e,t){return $1(n,e,t)}function B1(n,e,t){return n.type&40?Gn(n,t):null}var $1=B1,yb;function nd(n,e,t,r){let i=V1(n,r,e),s=e[at],o=r.parent||e[bn],a=U1(o,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)gb(s,i,t[l],a,!1);else gb(s,i,t,a,!1);yb!==void 0&&yb(s,r,e,t,i)}function xa(n,e){if(e!==null){let t=e.type;if(t&3)return Gn(e,n);if(t&4)return Qg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return xa(n,r);{let i=n[e.index];return wr(i)?Qg(-1,i):$n(i)}}else{if(t&128)return xa(n,e.next);if(t&32)return Wm(e,n)()||$n(n[e.index]);{let r=gC(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Fi(n[Un]);return xa(i,r)}else return xa(n,e.next)}}}return null}function gC(n,e){if(e!==null){let r=n[Un][bn],i=e.projection;return r.projection[i]}return null}function Qg(n,e){let t=an+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return xa(r,i)}return e[Oi]}function Qm(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(o&&e===0&&(a&&io($n(a),r),t.flags|=2),!hC(t))if(l&8)Qm(n,e,t.child,r,i,s,!1),Bs(e,n,i,a,s);else if(l&32){let u=Wm(t,r),h;for(;h=u();)Bs(e,n,i,h,s);Bs(e,n,i,a,s)}else l&16?H1(n,e,r,t,i,s):Bs(e,n,i,a,s);t=o?t.projectionNext:t.next}}function rd(n,e,t,r,i,s){Qm(t,r,n.firstChild,e,i,s,!1)}function H1(n,e,t,r,i,s){let o=t[Un],l=o[bn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let h=l[u];Bs(e,n,i,h,s)}else{let u=l,h=o[Nt];HD(r)&&(u.flags|=128),Qm(n,e,u,h,i,s,!0)}}function z1(n,e,t,r,i){let s=t[Oi],o=$n(t);s!==o&&Bs(e,n,r,s,i);for(let a=an;a<t.length;a++){let l=t[a];rd(l[Ee],l,n,e,r,s)}}function q1(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:_r.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_r.Important),n.setStyle(t,r,i,s))}}function Vu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push($n(s)),wr(s)&&G1(s,r);let o=t.type;if(o&8)Vu(n,e,t.child,r);else if(o&32){let a=Wm(t,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=gC(e,t);if(Array.isArray(a))r.push(...a);else{let l=Fi(e[Un]);Vu(l[Ee],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function G1(n,e){for(let t=an;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Vu(r[Ee],r,i,e)}n[Oi]!==n[Er]&&e.push(n[Oi])}function mC(n){if(n[$s]!==null){for(let e of n[$s])e.impl.addSequence(e);n[$s].length=0}}var yC=[];function W1(n){return n[on]??K1(n)}function K1(n){let e=yC.pop()??Object.create(Y1);return e.lView=n,e}function Q1(n){n.lView[on]!==n&&(n.lView=null,yC.push(n))}var Y1=ae(O({},ba),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{za(n.lView)},consumerOnSignalRead(){this.lView[on]=this}});function Z1(n){let e=n[on]??Object.create(J1);return e.lView=n,e}var J1=ae(O({},ba),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Fi(n.lView);for(;e&&!vC(e[Ee]);)e=Fi(e);e&&uD(e)},consumerOnSignalRead(){this.lView[on]=this}});function vC(n){return n.type!==2}function _C(n){if(n[Cu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Cu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[se]&8192)}}var X1=100;function EC(n,e=!0,t=0){let i=n[Xr].rendererFactory,s=!1;s||i.begin?.();try{eF(n,t)}catch(o){throw e&&S1(n,o),o}finally{s||i.end?.()}}function eF(n,e){let t=mD();try{nb(!0),Yg(n,e);let r=0;for(;Qu(n);){if(r===X1)throw new x(103,!1);r++,Yg(n,1)}}finally{nb(t)}}function tF(n,e,t,r){if(to(e))return;let i=e[se],s=!1,o=!1;Cm(e);let a=!0,l=null,u=null;s||(vC(n)?(u=W1(e),l=Ll(u)):jp()===null?(a=!1,u=Z1(e),l=Ll(u)):e[on]&&(qp(e[on]),e[on]=null));try{lD(e),Yx(n.bindingStartIndex),t!==null&&uC(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let y=n.preOrderCheckHooks;y!==null&&gu(e,y,null)}else{let y=n.preOrderHooks;y!==null&&mu(e,y,0,null),mg(e,0)}if(o||nF(e),_C(e),wC(e,0),n.contentQueries!==null&&eC(n,e),!s)if(h){let y=n.contentCheckHooks;y!==null&&gu(e,y)}else{let y=n.contentHooks;y!==null&&mu(e,y,1),mg(e,1)}iF(n,e);let p=n.components;p!==null&&TC(e,p,0);let g=n.viewQuery;if(g!==null&&Gg(2,g,r),!s)if(h){let y=n.viewCheckHooks;y!==null&&gu(e,y)}else{let y=n.viewHooks;y!==null&&mu(e,y,2),mg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[gg]){for(let y of e[gg])y();e[gg]=null}s||(mC(e),e[se]&=-73)}catch(h){throw s||za(e),h}finally{u!==null&&(Hp(u,l),a&&Q1(u)),Sm()}}function wC(n,e){for(let t=GD(n);t!==null;t=WD(t))for(let r=an;r<t.length;r++){let i=t[r];IC(i,e)}}function nF(n){for(let e=GD(n);e!==null;e=WD(e)){if(!(e[se]&2))continue;let t=e[Au];for(let r=0;r<t.length;r++){let i=t[r];uD(i)}}}function rF(n,e,t){Me(18);let r=Hn(e,n);IC(r,t),Me(19,r[jt])}function IC(n,e){Im(n)&&Yg(n,e)}function Yg(n,e){let r=n[Ee],i=n[se],s=n[on],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&zp(s)),o||=!1,s&&(s.dirty=!1),n[se]&=-9217,o)tF(r,n,r.template,n[jt]);else if(i&8192){_C(n),wC(n,1);let a=r.components;a!==null&&TC(n,a,1),mC(n)}}function TC(n,e,t){for(let r=0;r<e.length;r++)rF(n,e[r],t)}function iF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Li(~i);else{let s=i,o=t[++r],a=t[++r];Jx(o,s);let l=e[s];Me(24,l),a(2,l),Me(25,l)}}}finally{Li(-1)}}function Ym(n,e){let t=mD()?64:1088;for(n[Xr].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=Fi(n);if(Ru(n)&&!r)return n;n=r}return null}function bC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function sF(n,e,t,r=!0){let i=e[Ee];if(oF(i,e,n,t),r){let o=Qg(t,n),a=e[at],l=a.parentNode(n[Oi]);l!==null&&x1(i,n[bn],a,e,l,o)}let s=e[bu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Zg(n,e){if(n.length<=an)return;let t=an+e,r=n[t];if(r){let i=r[qs];i!==null&&i!==n&&Km(i,r),e>0&&(n[t-1][In]=r[In]);let s=Iu(n,an+e);k1(r[Ee],r);let o=s[Gs];o!==null&&o.detachView(s[Ee]),r[Nt]=null,r[In]=null,r[se]&=-129}return r}function oF(n,e,t,r){let i=an+r,s=t.length;r>0&&(t[i-1][In]=e),r<s-an?(e[In]=t[i],Gb(t,an+r,e)):(t.push(e),e[In]=null),e[Nt]=t;let o=e[qs];o!==null&&t!==o&&DC(o,e);let a=e[Gs];a!==null&&a.insertView(n),kg(e),e[se]|=128}function DC(n,e){let t=n[Au],r=e[Nt];if(Jr(r))n[se]|=2;else{let i=r[Nt][Un];e[Un]!==i&&(n[se]|=2)}t===null?n[Au]=[e]:t.push(e)}var Ua=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ee];return Vu(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return to(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(wr(e)){let t=e[Su],r=t?t.indexOf(this):-1;r>-1&&(Zg(e,r),Iu(t,r))}this._attachedToViewContainer=!1}pC(this._lView[Ee],this._lView)}onDestroy(e){dD(this._lView,e)}markForCheck(){Ym(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){kg(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,EC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ru(this._lView),t=this._lView[qs];t!==null&&!e&&Km(t,this._lView),fC(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e;let t=Ru(this._lView),r=this._lView[qs];r!==null&&!t&&DC(r,this._lView),kg(this._lView)}};var id=(()=>{class n{static __NG_ELEMENT_ID__=lF}return n})(),aF=id,cF=class extends aF{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=N1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ua(i)}};function lF(){return uF(Wt(),xe())}function uF(n,e){return n.type&4?new cF(e,n,Ju(n,e)):null}function sd(n,e,t,r,i){let s=n.data[e];if(s===null)s=dF(n,e,t,r,i),Zx()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=Wx();s.injectorIndex=o===null?-1:o.injectorIndex}return zi(s,!0),s}function dF(n,e,t,r,i){let s=pD(),o=bm(),a=o?s:s&&s.parent,l=n.data[e]=fF(n,a,t,e,r,i);return hF(n,l,s,o),l}function hF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function fF(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return zx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var D9=new RegExp(`^(\\d+)*(${VO}|${LO})*(.*)`);var pF=()=>null;function vb(n,e){return pF(n,e)}var gF=class{},CC=class{},Jg=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Lt(e)}.`)}},od=class{static NULL=new Jg},ei=class{},ao=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>mF()}return n})();function mF(){let n=xe(),e=Wt(),t=Hn(e.index,n);return(Jr(t)?t:n)[at]}var yF=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var _g={},Xg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=qu(r);let i=this.injector.get(e,_g,r);return i!==_g||t===_g?i:this.parentInjector.get(e,t,r)}};function em(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=WT(i,a);else if(s==2){let l=a,u=e[++o];r=WT(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ne(n,e=ue.Default){let t=xe();if(t===null)return J(n,e);let r=Wt();return PD(r,t,Mt(n),e)}function SC(){let n="invalid";throw new Error(n)}function Zm(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a,l=null,u=null,h=_F(o);h===null?a=o:[a,l,u]=h,IF(n,e,t,a,s,l,u)}s!==null&&r!==null&&vF(t,r,s)}function vF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new x(-301,!1);r.push(e[i],s)}}function _F(n){let e=null,t=!1;for(let o=0;o<n.length;o++){let a=n[o];if(o===0&&Bn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,s=null;for(let o of n)o.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,s??=new Map,EF(o,r,s,i)),o===e&&(r??=[],r.push(o));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,s]):null}function EF(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function wF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function IF(n,e,t,r,i,s,o){let a=r.length,l=!1;for(let g=0;g<a;g++){let y=r[g];!l&&Bn(y)&&(l=!0,wF(n,t,g)),Lg(ku(t,e),n,y.type)}AF(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let u=!1,h=!1,p=cC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=Ks(t.mergedAttrs,y.hostAttrs),bF(n,t,e,p,y),SF(p,y,i),o!==null&&o.has(y)){let[A,M]=o.get(y);t.directiveToIndex.set(y.type,[p,A+t.directiveStart,M+t.directiveStart])}else(s===null||!s.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let _=y.type.prototype;!u&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}TF(n,t,s)}function TF(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))_b(0,e,i,r),_b(1,e,i,r),wb(e,r,!1);else{let s=t.get(i);Eb(0,e,s,r),Eb(1,e,s,r),wb(e,r,!0)}}}function _b(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),AC(e,s)}}function Eb(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),AC(e,o)}}function AC(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function wb(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||jm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let h of u)if(h===e){o??=[],o.push(l,r[a+1]);break}}else if(t&&s.hasOwnProperty(l)){let u=s[l];for(let h=0;h<u.length;h+=2)if(u[h]===e){o??=[],o.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function bF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ni(i.type,!0)),o=new Vi(s,Bn(i),Ne);n.blueprint[r]=o,t[r]=o,DF(n,e,r,cC(n,t,i.hostVars,Wn),i)}function DF(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;CF(o)!=a&&o.push(a),o.push(t,r,s)}}function CF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function SF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Bn(e)&&(t[""]=n)}}function AF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function RC(n,e,t,r,i,s,o,a){let l=e.consts,u=Ws(l,o),h=sd(e,n,2,r,u);return s&&Zm(e,t,h,Ws(l,a),i),h.mergedAttrs=Ks(h.mergedAttrs,h.attrs),h.attrs!==null&&em(h,h.attrs,!1),h.mergedAttrs!==null&&em(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function MC(n,e){Rm(n,e),wm(e)&&n.queries.elementEnd(e)}var ju=class extends od{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ki(e);return new Ys(t,this.ngModule)}};function RF(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&ed.SignalBased)!==0};return i&&(s.transform=i),s})}function MF(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function NF(n,e,t){let r=e instanceof Vt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Xg(t,r):t}function PF(n){let e=n.get(ei,null);if(e===null)throw new x(407,!1);let t=n.get(yF,null),r=n.get(Qs,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function kF(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return iC(e,t,t==="svg"?Ox:t==="math"?Fx:null)}var Ys=class extends CC{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=RF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=MF(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=s1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Me(22);let s=ye(null);try{let o=this.componentDef,a=r?["ng-version","19.2.11"]:o1(this.componentDef.selectors[0]),l=Um(0,null,null,1,0,null,null,null,null,[a],null),u=NF(o,i||this.ngModule,e),h=PF(u),p=h.rendererFactory.createRenderer(null,o),g=r?m1(p,r,o.encapsulation,u):kF(o,p),y=Bm(null,l,null,512|aC(o),null,null,h,p,u,null,XD(g,u,!0));y[cn]=g,Cm(y);let _=null;try{let A=RC(cn,l,y,"#host",()=>[this.componentDef],!0,0);g&&(oC(p,g,A),io(g,y)),td(l,y,A),Vm(l,A,y),MC(l,A),t!==void 0&&xF(A,this.ngContentSelectors,t),_=Hn(A.index,y),y[jt]=_[jt],Gm(l,y,null)}catch(A){throw _!==null&&Hg(_),Hg(y),A}finally{Me(23),Sm()}return new tm(this.componentType,y)}finally{ye(s)}}},tm=class extends gF{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=cD(t[Ee],cn),this.location=Ju(this._tNode,t),this.instance=Hn(this._tNode.index,t)[jt],this.hostView=this.changeDetectorRef=new Ua(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=qm(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let o=Hn(r.index,i);Ym(o,1)}get injector(){return new Mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var co=(()=>{class n{static __NG_ELEMENT_ID__=OF}return n})();function OF(){let n=Wt();return LF(n,xe())}var FF=co,NC=class extends FF{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ju(this._hostTNode,this._hostLView)}get injector(){return new Mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Mm(this._hostTNode,this._hostLView);if(CD(e)){let t=Nu(e,this._hostLView),r=Mu(e),i=t[Ee].data[r+8];return new Mi(i,t)}else return new Mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ib(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-an}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=vb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,mb(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!Nx(e),a;if(o)a=t;else{let _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let l=o?e:new Ys(ki(e)),u=r||this.parentInjector;if(!s&&l.ngModule==null){let A=(o?u:this.parentInjector).get(Vt,null);A&&(s=A)}let h=ki(l.componentType??{}),p=vb(this._lContainer,h?.id??null),g=p?.firstChild??null,y=l.create(u,i,g,s);return this.insertImpl(y.hostView,a,mb(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Vx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Nt],u=new NC(l,l[bn],l[Nt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return sF(o,i,s,r),e.attachToViewContainerRef(),Gb(Eg(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ib(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Zg(this._lContainer,t);r&&(Iu(Eg(this._lContainer),t),pC(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=Zg(this._lContainer,t);return r&&Iu(Eg(this._lContainer),t)!=null?new Ua(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ib(n){return n[Su]}function Eg(n){return n[Su]||(n[Su]=[])}function LF(n,e){let t,r=e[n.index];return wr(r)?t=r:(t=bC(r,e,null,n),e[n.index]=t,$m(e,t)),jF(t,e,n,r),new NC(t,n,e)}function VF(n,e){let t=n[at],r=t.createComment(""),i=Gn(e,n),s=t.parentNode(i);return Lu(t,s,r,t.nextSibling(i),!1),r}var jF=$F,UF=()=>!1;function BF(n,e,t){return UF(n,e,t)}function $F(n,e,t,r){if(n[Oi])return;let i;t.type&8?i=$n(r):i=VF(e,t),n[Oi]=i}var Zs=class{},Jm=class{};var nm=class extends Zs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ju(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=Qb(e);this._bootstrapComponents=nC(s.bootstrap),this._r3Injector=OD(e,t,[{provide:Zs,useValue:this},{provide:od,useValue:this.componentFactoryResolver},...r],Lt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rm=class extends Jm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new nm(this.moduleType,e,[])}};var Uu=class extends Zs{injector;componentFactoryResolver=new ju(this);instance=null;constructor(e){super();let t=new Va([...e.providers,{provide:Zs,useValue:this},{provide:od,useValue:this.componentFactoryResolver}],e.parent||Em(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wa(n,e,t=null){return new Uu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var HF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Yb(!1,t.type),i=r.length>0?Wa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(J(Vt))})}return n})();function dn(n){return $a(()=>{let e=kC(n),t=ae(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(HF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qn.Emulated,styles:n.styles||sn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Wi("NgStandalone"),xC(t);let r=n.dependencies;return t.directiveDefs=Tb(r,!1),t.pipeDefs=Tb(r,!0),t.id=KF(t),t})}function zF(n){return ki(n)||_x(n)}function qF(n){return n!==null}function Dn(n){return $a(()=>({type:n.type,bootstrap:n.bootstrap||sn,declarations:n.declarations||sn,imports:n.imports||sn,exports:n.exports||sn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function GF(n,e){if(n==null)return Pi;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=ed.None,l=null),t[s]=[r,a,l],e[s]=o}return t}function WF(n){if(n==null)return Pi;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function bt(n){return $a(()=>{let e=kC(n);return xC(e),e})}function PC(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function kC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Pi,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||sn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:GF(n.inputs,e),outputs:WF(n.outputs),debugInfo:null}}function xC(n){n.features?.forEach(e=>e(n))}function Tb(n,e){if(!n)return null;let t=e?Ex:zF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(qF)}function KF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function QF(n){return Object.getPrototypeOf(n.prototype).constructor}function Ir(n){let e=QF(n.type),t=!0,r=[n];for(;e;){let i;if(Bn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=wg(n.inputs),o.declaredInputs=wg(n.declaredInputs),o.outputs=wg(n.outputs);let a=i.hostBindings;a&&eL(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&JF(n,l),u&&XF(n,u),YF(n,i),Zk(n.outputs,i.outputs),Bn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ir&&(t=!1)}}e=Object.getPrototypeOf(e)}ZF(r)}function YF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function ZF(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ks(i.hostAttrs,t=Ks(t,i.hostAttrs))}}function wg(n){return n===Pi?{}:n===sn?[]:n}function JF(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function XF(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function eL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function OC(n){return nL(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function tL(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function nL(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function rL(n,e,t){return n[e]=t}function ji(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function iL(n,e,t,r){let i=ji(n,e,t);return ji(n,e+1,r)||i}function sL(n,e,t,r,i,s,o,a,l){let u=e.consts,h=sd(e,n,4,o||null,a||null);Tm()&&Zm(e,t,h,Ws(u,l),zm),h.mergedAttrs=Ks(h.mergedAttrs,h.attrs),Rm(e,h);let p=h.tView=Um(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function oL(n,e,t,r,i,s,o,a,l,u){let h=t+cn,p=e.firstCreatePass?sL(h,e,n,r,i,s,o,a,l):e.data[h];zi(p,!1);let g=aL(e,n,p,t);Yu()&&nd(e,n,g,p),io(g,n);let y=bC(g,n,g,p);return n[h]=y,$m(n,y),BF(y,p,n),Ku(p)&&td(e,n,p),l!=null&&Hm(n,p,u),p}function Xe(n,e,t,r,i,s,o,a){let l=xe(),u=Pt(),h=Ws(u.consts,s);return oL(l,u,n,e,t,r,i,h,o,a),Xe}var aL=cL;function cL(n,e,t,r){return Zu(!0),e[at].createComment("")}var FC=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var LC=new K("");var lL=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new im})}return n})(),im=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function ti(n){return!!n&&typeof n.then=="function"}function Xm(n){return!!n&&typeof n.subscribe=="function"}var VC=new K("");function ey(n){return ym([{provide:VC,multi:!0,useValue:n}])}var jC=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(VC,{optional:!0})??[];injector=P(ln);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=un(this.injector,i);if(ti(s))t.push(s);else if(Xm(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ad=new K("");function uL(){Wp(()=>{throw new x(600,!1)})}function dL(n){return n.isBoundToModule}var hL=10;var Ui=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(AO);afterRenderManager=P(JD);zonelessEnabled=P(LD);rootEffectScheduler=P(lL);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new st;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=P(ro).hasPendingTasks.pipe(le(t=>!t));constructor(){P(oo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(Vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=ln.NULL){Me(10);let s=t instanceof CC;if(!this._injector.get(jC).done){let y="";throw new x(405,y)}let a;s?a=t:a=this._injector.get(od).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=dL(a)?void 0:this._injector.get(Zs),u=r||a.selector,h=a.create(i,[],u,l),p=h.location.nativeElement,g=h.injector.get(LC,null);return g?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),yu(this.components,h),g?.unregisterApplication(p)}),this._loadComponent(h),Me(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Me(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new x(101,!1);let t=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ye(t),this.afterTick.next(),Me(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ei,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<hL;)Me(14),this.synchronizeOnce(),Me(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)fL(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Qu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;yu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ad,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new x(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fL(n,e,t,r){if(!t&&!Qu(n))return;EC(n,e,t&&!r?0:1)}function Ka(n,e,t,r){let i=xe(),s=Dm();if(ji(i,s,e)){let o=Pt(),a=Am();b1(a,i,n,e,t,r)}return Ka}function UC(n,e,t,r){return ji(n,Dm(),t)?e+Fa(t)+r:Wn}function pL(n,e,t,r,i,s){let o=Qx(),a=iL(n,o,t,i);return yD(2),a?e+Fa(t)+r+Fa(i)+s:Wn}function fu(n,e){return n<<17|e<<2}function Bi(n){return n>>17&32767}function gL(n){return(n&2)==2}function mL(n,e){return n&131071|e<<17}function sm(n){return n|2}function Js(n){return(n&131068)>>2}function Ig(n,e){return n&-131069|e<<2}function yL(n){return(n&1)===1}function om(n){return n|1}function vL(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Bi(o),l=Js(o);n[r]=t;let u=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ha(p,h)>0)&&(u=!0)}else h=t;if(i)if(l!==0){let g=Bi(n[a+1]);n[r+1]=fu(g,a),g!==0&&(n[g+1]=Ig(n[g+1],r)),n[a+1]=mL(n[a+1],r)}else n[r+1]=fu(a,0),a!==0&&(n[a+1]=Ig(n[a+1],r)),a=r;else n[r+1]=fu(l,0),a===0?a=r:n[l+1]=Ig(n[l+1],r),l=r;u&&(n[r+1]=sm(n[r+1])),bb(n,h,r,!0),bb(n,h,r,!1),_L(e,h,n,r,s),o=fu(a,l),s?e.classBindings=o:e.styleBindings=o}function _L(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ha(s,e)>=0&&(t[r+1]=om(t[r+1]))}function bb(n,e,t,r){let i=n[t+1],s=e===null,o=r?Bi(i):Js(i),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],u=n[o+1];EL(l,e)&&(a=!0,n[o+1]=r?om(u):sm(u)),o=r?Bi(u):Js(u)}a&&(n[t+1]=r?sm(i):om(i))}function EL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ha(n,e)>=0:!1}function Re(n,e,t){let r=xe(),i=Dm();if(ji(r,i,e)){let s=Pt(),o=Am();dC(s,o,r,n,e,r[at],t,!1)}return Re}function Db(n,e,t,r,i){qm(e,n,t,i?"class":"style",r)}function ty(n,e,t){return BC(n,e,t,!1),ty}function vt(n,e){return BC(n,e,null,!0),vt}function BC(n,e,t,r){let i=xe(),s=Pt(),o=yD(2);if(s.firstUpdatePass&&IL(s,n,o,r),e!==Wn&&ji(i,o,e)){let a=s.data[qi()];SL(s,a,i,i[at],n,i[o+1]=AL(e,t),r,o)}}function wL(n,e){return e>=n.expandoStartIndex}function IL(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[qi()],o=wL(n,t);RL(s,r)&&e===null&&!o&&(e=!1),e=TL(i,s,e,r),vL(i,s,e,t,o,r)}}function TL(n,e,t,r){let i=eO(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Tg(null,n,e,t,r),t=Ba(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Tg(i,n,e,t,r),s===null){let l=bL(n,e,r);l!==void 0&&Array.isArray(l)&&(l=Tg(null,n,e,l[1],r),l=Ba(l,e.attrs,r),DL(n,e,r,l))}else s=CL(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function bL(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Js(r)!==0)return n[Bi(r)]}function DL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Bi(i)]=r}function CL(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ba(r,o,t)}return Ba(r,e.attrs,t)}function Tg(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ba(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ba(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),yx(n,o,t?!0:e[++s]))}return n===void 0?null:n}function SL(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],h=yL(u)?Cb(l,e,t,i,Js(u),o):void 0;if(!Bu(h)){Bu(s)||gL(u)&&(s=Cb(l,null,t,i,a,o));let p=aD(qi(),t);q1(r,o,p,i,s)}}function Cb(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),h=u?l[1]:l,p=h===null,g=t[i+1];g===Wn&&(g=p?sn:void 0);let y=p?fg(g,r):h===r?g:void 0;if(u&&!Bu(y)&&(y=fg(l,r)),Bu(y)&&(a=y,o))return a;let _=n[i+1];i=o?Bi(_):Js(_)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=fg(l,r))}return a}function Bu(n){return n!==void 0}function AL(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Lt(tC(n)))),n}function RL(n,e){return(n.flags&(e?8:16))!==0}function V(n,e,t,r){let i=xe(),s=Pt(),o=cn+n,a=i[at],l=s.firstCreatePass?RC(o,s,i,e,zm,Tm(),t,r):s.data[o],u=ML(s,i,l,a,e,n);i[o]=u;let h=Ku(l);return zi(l,!0),oC(a,u,l),!hC(l)&&Yu()&&nd(s,i,u,l),(Bx()===0||h)&&io(u,i),$x(),h&&(td(s,i,l),Vm(s,l,i)),r!==null&&Hm(i,l),V}function F(){let n=Wt();bm()?gD():(n=n.parent,zi(n,!1));let e=n;qx(e)&&Gx(),Hx();let t=Pt();return t.firstCreatePass&&MC(t,e),e.classesWithoutHost!=null&&oO(e)&&Db(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&aO(e)&&Db(t,e,xe(),e.stylesWithoutHost,!1),F}function Oe(n,e,t,r){return V(n,e,t,r),F(),Oe}var ML=(n,e,t,r,i,s)=>(Zu(!0),iC(r,i,rO()));function NL(n,e,t,r,i){let s=e.consts,o=Ws(s,r),a=sd(e,n,8,"ng-container",o);o!==null&&em(a,o,!0);let l=Ws(s,i);return Tm()&&Zm(e,t,a,l,zm),a.mergedAttrs=Ks(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function ny(n,e,t){let r=xe(),i=Pt(),s=n+cn,o=i.firstCreatePass?NL(s,i,r,e,t):i.data[s];zi(o,!0);let a=PL(i,r,o,n);return r[s]=a,Yu()&&nd(i,r,a,o),io(a,r),Ku(o)&&(td(i,r,o),Vm(i,o,r)),t!=null&&Hm(r,o),ny}function ry(){let n=Wt(),e=Pt();return bm()?gD():(n=n.parent,zi(n,!1)),e.firstCreatePass&&(Rm(e,n),wm(n)&&e.queries.elementEnd(n)),ry}var PL=(n,e,t,r)=>(Zu(!0),l1(e[at],""));function Kn(){return xe()}var $u="en-US";var kL=$u;function xL(n){typeof n=="string"&&(kL=n.toLowerCase().replace(/_/g,"-"))}function Sb(n,e,t){return function r(i){if(i===Function)return t;let s=eo(n)?Hn(n.index,e):e;Ym(s,5);let o=e[jt],a=Ab(e,o,t,i),l=r.__ngNextListenerFn__;for(;l;)a=Ab(e,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function Ab(n,e,t,r){let i=ye(null);try{return Me(6,e,t),t(r)!==!1}catch(s){return OL(n,s),!1}finally{Me(7,e,t),ye(i)}}function OL(n,e){let t=n[xi],r=t?t.get(zn,null):null;r&&r.handleError(e)}function Rb(n,e,t,r,i,s){let o=e[t],a=e[Ee],u=a.data[t].outputs[r],h=o[u],p=a.firstCreatePass?fD(a):null,g=hD(e),y=h.subscribe(s),_=g.length;g.push(s,y),p&&p.push(i,n.index,_,-(_+1))}var FL=new Map;function be(n,e,t,r){let i=xe(),s=Pt(),o=Wt();return VL(s,i,i[at],o,n,e,r),be}function LL(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Du],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function VL(n,e,t,r,i,s,o){let a=Ku(r),u=n.firstCreatePass?fD(n):null,h=hD(e),p=!0;if(r.type&3||o){let g=Gn(r,e),y=o?o(g):g,_=h.length,A=o?L=>o($n(L[r.index])):r.index,M=null;if(!o&&a&&(M=LL(n,e,i,r.index)),M!==null){let L=M.__ngLastListenerFn__||M;L.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,p=!1}else{s=Sb(r,e,s);let L=e[xi].get(Xu);FL.get(L)?.(y,i,s);let G=t.listen(y,i,s);h.push(s,G),u&&u.push(i,A,_,_+1)}}else s=Sb(r,e,s);if(p){let g=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let _=0;_<y.length;_+=2){let A=y[_],M=y[_+1];Rb(r,e,A,M,i,s)}if(g&&g.length)for(let _ of g)Rb(r,e,_,i,i,s)}}function Ue(n=1){return nO(n)}function iy(n,e,t,r,i){let s=xe(),o=UC(s,e,t,r);if(o!==Wn){let a=Pt(),l=Am();dC(a,l,s,n,o,s[at],i,!1)}return iy}function jL(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function H(n,e=""){let t=xe(),r=Pt(),i=n+cn,s=r.firstCreatePass?sd(r,i,1,e,null):r.data[i],o=UL(r,t,s,e,n);t[i]=o,Yu()&&nd(r,t,o,s),zi(s,!1)}var UL=(n,e,t,r,i)=>(Zu(!0),a1(e[at],r));function Qn(n){return Yn("",n,""),Qn}function Yn(n,e,t){let r=xe(),i=UC(r,n,e,t);return i!==Wn&&$C(r,qi(),i),Yn}function Qa(n,e,t,r,i){let s=xe(),o=pL(s,n,e,t,r,i);return o!==Wn&&$C(s,qi(),o),Qa}function $C(n,e,t){let r=aD(e,n);c1(n[at],r,t)}function BL(n,e,t){let r=Pt();if(r.firstCreatePass){let i=Bn(n);am(t,r.data,r.blueprint,i,!0),am(e,r.data,r.blueprint,i,!1)}}function am(n,e,t,r,i){if(n=Mt(n),Array.isArray(n))for(let s=0;s<n.length;s++)am(n[s],e,t,r,i);else{let s=Pt(),o=xe(),a=Wt(),l=zs(n)?n:Mt(n.provide),u=Xb(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(zs(n)||!n.multi){let y=new Vi(u,i,Ne),_=Dg(l,e,i?h:h+g,p);_===-1?(Lg(ku(a,o),s,l),bg(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[_]=y,o[_]=y)}else{let y=Dg(l,e,h+g,p),_=Dg(l,e,h,h+g),A=y>=0&&t[y],M=_>=0&&t[_];if(i&&!M||!i&&!A){Lg(ku(a,o),s,l);let L=zL(i?HL:$L,t.length,i,r,u);!i&&M&&(t[_].providerFactory=L),bg(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),o.push(L)}else{let L=HC(t[i?_:y],u,!i&&r);bg(s,n,y>-1?y:_,L)}!i&&r&&M&&t[_].componentProviders++}}}function bg(n,e,t,r){let i=zs(e),s=bx(e);if(i||s){let l=(s?Mt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,l]):u[h+1].push(r,l)}else u.push(t,l)}}}function HC(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Dg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $L(n,e,t,r,i){return cm(this.multi,[])}function HL(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=xu(r,r[Ee],this.providerFactory.index,i);o=l.slice(0,a),cm(s,o);for(let u=a;u<l.length;u++)o.push(l[u])}else o=[],cm(s,o);return o}function cm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function zL(n,e,t,r,i){let s=new Vi(n,t,Ne);return s.multi=[],s.index=e,s.componentProviders=0,HC(s,i,r&&!t),s}function Ya(n,e=[]){return t=>{t.providersResolver=(r,i)=>BL(r,i?i(n):n,e)}}function qL(n,e){let t=n[e];return t===Wn?void 0:t}function GL(n,e,t,r,i,s){let o=e+t;return ji(n,o,i)?rL(n,o+1,s?r.call(s,i):r(i)):qL(n,o+1)}function zC(n,e){let t=Pt(),r,i=n+cn;t.firstCreatePass?(r=WL(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ni(r.type,!0)),o,a=Ft(Ne);try{let l=Pu(!1),u=s();return Pu(l),jL(t,xe(),i,u),u}finally{Ft(a)}}function WL(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function qC(n,e,t){let r=n+cn,i=xe(),s=Lx(i,r);return KL(i,r)?GL(i,Kx(),e,s.transform,t,s):s.transform(t)}function KL(n,e){return n[Ee].data[e].pure}var lm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},GC=(()=>{class n{compileModuleSync(t){return new rm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Qb(t),s=nC(i.declarations).reduce((o,a)=>{let l=ki(a);return l&&o.push(new Ys(l)),o},[]);return new lm(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QL=(()=>{class n{zone=P(We);changeDetectionScheduler=P(Qs);applicationRef=P(Ui);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YL({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new We(ae(O({},ZL()),{scheduleInRootZone:t})),[{provide:We,useFactory:n},{provide:La,multi:!0,useFactory:()=>{let r=P(QL,{optional:!0});return()=>r.initialize()}},{provide:La,multi:!0,useFactory:()=>{let r=P(JL);return()=>{r.initialize()}}},e===!0?{provide:VD,useValue:!0}:[],{provide:jD,useValue:t??FD}]}function ZL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var JL=(()=>{class n{subscription=new Ze;initialized=!1;zone=P(We);pendingTasks=P(ro);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XL=(()=>{class n{appRef=P(Ui);taskService=P(ro);ngZone=P(We);zonelessEnabled=P(LD);tracing=P(oo,{optional:!0});disableScheduling=P(VD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Fu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(jD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $g||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?cb:UD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Fu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eV(){return typeof $localize<"u"&&$localize.locale||$u}var sy=new K("",{providedIn:"root",factory:()=>P(sy,ue.Optional|ue.SkipSelf)||eV()});var um=new K(""),tV=new K("");function Pa(n){return!n.moduleRef}function nV(n){let e=Pa(n)?n.r3Injector:n.moduleRef.injector,t=e.get(We);return t.run(()=>{Pa(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Pa(n)){let s=()=>e.destroy(),o=n.platformInjector.get(um);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(um);o.add(s),n.moduleRef.onDestroy(()=>{yu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return iV(r,t,()=>{let s=e.get(jC);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(sy,$u);if(xL(o||$u),!e.get(tV,!0))return Pa(n)?e.get(Ui):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pa(n)){let l=e.get(Ui);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return rV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function rV(n,e){let t=n.injector.get(Ui);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new x(-403,!1);e.push(n)}function iV(n,e,t){try{let r=t();return ti(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var vu=null;function sV(n=[],e){return ln.create({name:e,providers:[{provide:Gu,useValue:"platform"},{provide:um,useValue:new Set([()=>vu=null])},...n]})}function oV(n=[]){if(vu)return vu;let e=sV(n);return vu=e,uL(),aV(e),e}function aV(n){let e=n.get(km,null);un(n,()=>{e?.forEach(t=>t())})}var Ki=(()=>{class n{static __NG_ELEMENT_ID__=cV}return n})();function cV(n){return lV(Wt(),xe(),(n&16)===16)}function lV(n,e,t){if(eo(n)&&!t){let r=Hn(n.index,e);return new Ua(r,r)}else if(n.type&175){let r=e[Un];return new Ua(r,e)}return null}var dm=class{constructor(){}supports(e){return OC(e)}create(e){return new hm(e)}},uV=(n,e)=>e,hm=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||uV}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<Mb(r,i,s)?t:r,a=Mb(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,h=l-i;if(u!=h){for(let g=0;g<u;g++){let y=g<s.length?s[g]:s[g]=0,_=y+g;h<=_&&_<u&&(s[g]=y+1)}let p=o.previousIndex;s[p]=h-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!OC(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,tL(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new fm(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Hu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Hu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},fm=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},pm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Hu=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new pm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Mb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Nb(){return new oy([new dm])}var oy=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:Nb});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Nb()),deps:[[n,new gx,new px]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new x(901,!1)}}return n})();function WC(n){Me(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=oV(r),s=[YL({}),{provide:Qs,useExisting:XL},...t||[]],o=new Uu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return nV({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Me(9)}}function Cn(n){return Yp(n)}function Za(n,e){return Gp(n,e?.equal)}var Pb=class{[_n];constructor(e){this[_n]=e}destroy(){this[_n].destroy()}};function KC(n){let e=ki(n);if(!e)return null;let t=new Ys(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var et=new K("");var ZC=null;function hn(){return ZC}function ay(n){ZC??=n}var Ja=class{},Xa=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(JC),providedIn:"platform"})}return n})(),cy=new K(""),JC=(()=>{class n extends Xa{_location;_history;_doc=P(et);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hn().getBaseHref(this._doc)}onPopState(t){let r=hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function cd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function QC(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Sn(n){return n&&n[0]!=="?"?`?${n}`:n}var Tr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(ud),providedIn:"root"})}return n})(),ld=new K(""),ud=(()=>{class n extends Tr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Sn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Sn(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Sn(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(J(Xa),J(ld,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ni=(()=>{class n{_subject=new st;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=fV(QC(YC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Sn(r))}normalize(t){return n.stripTrailingSlash(hV(this._basePath,YC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Sn;static joinWithSlash=cd;static stripTrailingSlash=QC;static \u0275fac=function(r){return new(r||n)(J(Tr))};static \u0275prov=q({token:n,factory:()=>dV(),providedIn:"root"})}return n})();function dV(){return new ni(J(Tr))}function hV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function YC(n){return n.replace(/\/index.html$/,"")}function fV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var dy=(()=>{class n extends Tr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=cd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Sn(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Sn(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(J(Xa),J(ld,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();var dd=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},fd=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new dd(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),XC(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);XC(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ne(co),Ne(id),Ne(oy))};static \u0275dir=bt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function XC(n,e){n.context.$implicit=e.item}var Qi=(()=>{class n{_viewContainer;_context=new hd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){e0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){e0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ne(co),Ne(id))};static \u0275dir=bt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),hd=class{$implicit=null;ngIf=null};function e0(n,e){if(n&&!n.createEmbeddedView)throw new x(2020,!1)}function gV(n,e){return new x(2100,!1)}var ly=class{createSubscription(e,t){return Cn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Cn(()=>e.unsubscribe())}},uy=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},mV=new uy,yV=new ly,hy=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ti(t))return mV;if(Xm(t))return yV;throw gV(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(Ne(Ki,16))};static \u0275pipe=PC({name:"async",type:n,pure:!1})}return n})();var fn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dn({type:n});static \u0275inj=Tn({})}return n})();function fy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var py="browser",t0="server";function pd(n){return n===t0}var ec=class{};var r0=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new gy(P(et),window)})}return n})(),gy=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=_V(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function _V(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var yd=new K(""),Ey=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(J(yd),J(We))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),tc=class{_doc;constructor(e){this._doc=e}manager},gd="ng-app-id";function i0(n){for(let e of n)e.remove()}function s0(n,e){let t=e.createElement("style");return t.textContent=n,t}function EV(n,e,t,r){let i=n.head?.querySelectorAll(`style[${gd}="${e}"],link[${gd}="${e}"]`);if(i)for(let s of i)s.removeAttribute(gd),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function vy(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var wy=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=pd(s),EV(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,s0);r?.forEach(i=>this.addUsage(i,this.external,vy))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(i0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])i0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,s0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,vy(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(gd,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(J(et),J(Xu),J(Om,8),J(so))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),yy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Iy=/%COMP%/g;var a0="%COMP%",wV=`_nghost-${a0}`,IV=`_ngcontent-${a0}`,TV=!0,bV=new K("",{providedIn:"root",factory:()=>TV});function DV(n){return IV.replace(Iy,n)}function CV(n){return wV.replace(Iy,n)}function c0(n,e){return e.map(t=>t.replace(Iy,n))}var ic=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,l,u=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.tracingService=h,this.platformIsServer=pd(a),this.defaultRenderer=new nc(t,o,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qn.ShadowDom&&(r=ae(O({},r),{encapsulation:qn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof md?i.applyToHost(t):i instanceof rc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case qn.Emulated:s=new md(l,u,r,this.appId,h,o,a,p,g);break;case qn.ShadowDom:return new _y(l,u,t,r,o,a,this.nonce,p,g);default:s=new rc(l,u,r,h,o,a,p,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(J(Ey),J(wy),J(Xu),J(bV),J(et),J(so),J(We),J(Om),J(oo,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),nc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(yy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(o0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(o0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=yy[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=yy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_r.DashCase|_r.Important)?e.style.setProperty(t,r,i&_r.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_r.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=hn().getGlobalEventTarget(this.doc,e),!e))throw new x(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function o0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var _y=class extends nc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,l,u){super(e,s,o,l,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=c0(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=vy(g,s);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rc=class extends nc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,l,u){super(e,s,o,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?c0(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},md=class extends rc{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,l,u){let h=i+"-"+r.id;super(e,t,r,s,o,a,l,u,h),this.contentAttr=DV(h),this.hostAttr=CV(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vd=class n extends Ja{supportsDOMEvents=!0;static makeCurrent(){ay(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=SV();return t==null?null:AV(t)}resetBaseElement(){sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fy(document.cookie,e)}},sc=null;function SV(){return sc=sc||document.querySelector("base"),sc?sc.getAttribute("href"):null}function AV(n){return new URL(n,document.baseURI).pathname}var RV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),u0=(()=>{class n extends tc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(J(et))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),l0=["alt","control","meta","shift"],MV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},d0=(()=>{class n extends tc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hn().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),l0.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=MV[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),l0.forEach(o=>{if(o!==i){let a=NV[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(J(et))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function Ty(n,e){return WC(O({rootComponent:n},PV(e)))}function PV(n){return{appProviders:[...LV,...n?.providers??[]],platformProviders:FV}}function kV(){vd.makeCurrent()}function xV(){return new zn}function OV(){return QD(document),document}var FV=[{provide:so,useValue:py},{provide:km,useValue:kV,multi:!0},{provide:et,useFactory:OV}];var LV=[{provide:Gu,useValue:"root"},{provide:zn,useFactory:xV},{provide:yd,useClass:u0,multi:!0,deps:[et]},{provide:yd,useClass:d0,multi:!0,deps:[et]},ic,wy,Ey,{provide:ei,useExisting:ic},{provide:ec,useClass:RV},[]];var h0=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(J(et))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ce="primary",vc=Symbol("RouteTitle"),Ay=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ji(n){return new Ay(n)}function E0(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function jV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Zn(n[t],e[t]))return!1;return!0}function Zn(n,e){let t=n?Ry(n):void 0,r=e?Ry(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!w0(n[i],e[i]))return!1;return!0}function Ry(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function w0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function I0(n){return n.length>0?n[n.length-1]:null}function oi(n){return ag(n)?n:ti(n)?Ae(Promise.resolve(n)):ee(n)}var UV={exact:b0,subset:D0},T0={exact:BV,subset:$V,ignored:()=>!0};function f0(n,e,t){return UV[t.paths](n.root,e.root,t.matrixParams)&&T0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function BV(n,e){return Zn(n,e)}function b0(n,e,t){if(!Yi(n.segments,e.segments)||!wd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!b0(n.children[r],e.children[r],t))return!1;return!0}function $V(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>w0(n[t],e[t]))}function D0(n,e,t){return C0(n,e,e.segments,t)}function C0(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Yi(i,t)||e.hasChildren()||!wd(i,t,r))}else if(n.segments.length===t.length){if(!Yi(n.segments,t)||!wd(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!D0(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Yi(n.segments,i)||!wd(n.segments,i,r)||!n.children[ce]?!1:C0(n.children[ce],e,s,r)}}function wd(n,e,t){return e.every((r,i)=>T0[t](n[i].parameters,r.parameters))}var Xn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ji(this.queryParams),this._queryParamMap}toString(){return qV.serialize(this)}},De=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Id(this)}},ri=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ji(this.parameters),this._parameterMap}toString(){return A0(this)}};function HV(n,e){return Yi(n,e)&&n.every((t,r)=>Zn(t.parameters,e[r].parameters))}function Yi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function zV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Xi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new ii,providedIn:"root"})}return n})(),ii=class{parse(e){let t=new Ny(e);return new Xn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${oc(e.root,!0)}`,r=KV(e.queryParams),i=typeof e.fragment=="string"?`#${GV(e.fragment)}`:"";return`${t}${r}${i}`}},qV=new ii;function Id(n){return n.segments.map(e=>A0(e)).join("/")}function oc(n,e){if(!n.hasChildren())return Id(n);if(e){let t=n.children[ce]?oc(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ce&&r.push(`${i}:${oc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=zV(n,(r,i)=>i===ce?[oc(n.children[ce],!1)]:[`${i}:${oc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${Id(n)}/${t[0]}`:`${Id(n)}/(${t.join("//")})`}}function S0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _d(n){return S0(n).replace(/%3B/gi,";")}function GV(n){return encodeURI(n)}function My(n){return S0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Td(n){return decodeURIComponent(n)}function p0(n){return Td(n.replace(/\+/g,"%20"))}function A0(n){return`${My(n.path)}${WV(n.parameters)}`}function WV(n){return Object.entries(n).map(([e,t])=>`;${My(e)}=${My(t)}`).join("")}function KV(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${_d(t)}=${_d(i)}`).join("&"):`${_d(t)}=${_d(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var QV=/^[^\/()?;#]+/;function by(n){let e=n.match(QV);return e?e[0]:""}var YV=/^[^\/()?;=#]+/;function ZV(n){let e=n.match(YV);return e?e[0]:""}var JV=/^[^=?&#]+/;function XV(n){let e=n.match(JV);return e?e[0]:""}var e2=/^[^&#]+/;function t2(n){let e=n.match(e2);return e?e[0]:""}var Ny=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new De(e,t)),r}parseSegment(){let e=by(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new ri(Td(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=ZV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=by(this.remaining);i&&(r=i,this.capture(r))}e[Td(t)]=Td(r)}parseQueryParam(e){let t=XV(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=t2(this.remaining);o&&(r=o,this.capture(r))}let i=p0(t),s=p0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=by(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new x(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ce);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ce]:new De([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}};function R0(n){return n.segments.length>0?new De([],{[ce]:n}):n}function M0(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=M0(i);if(r===ce&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new De(n.segments,e);return n2(t)}function n2(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new De(n.segments.concat(e.segments),e.children)}return n}function po(n){return n instanceof Xn}function N0(n,e,t=null,r=null){let i=P0(n);return k0(i,e,t,r)}function P0(n){let e;function t(s){let o={};for(let l of s.children){let u=t(l);o[l.outlet]=u}let a=new De(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=R0(r);return e??i}function k0(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Dy(i,i,i,t,r);let s=r2(e);if(s.toRoot())return Dy(i,i,new De([],{}),t,r);let o=i2(s,i,n),a=o.processChildren?cc(o.segmentGroup,o.index,s.commands):O0(o.segmentGroup,o.index,s.commands);return Dy(i,o.segmentGroup,a,t,r)}function Dd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function uc(n){return typeof n=="object"&&n!=null&&n.outlets}function Dy(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let o;n===e?o=t:o=x0(n,e,t);let a=R0(M0(o));return new Xn(a,s,i)}function x0(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=x0(s,e,t)}),new De(n.segments,r)}var Cd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dd(r[0]))throw new x(4003,!1);let i=r.find(uc);if(i&&i!==I0(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function r2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Cd(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Cd(t,e,r)}var ho=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function i2(n,e,t){if(n.isAbsolute)return new ho(e,!0,0);if(!t)return new ho(e,!1,NaN);if(t.parent===null)return new ho(t,!0,0);let r=Dd(n.commands[0])?0:1,i=t.segments.length-1+r;return s2(t,i,n.numberOfDoubleDots)}function s2(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new ho(r,!1,i-s)}function o2(n){return uc(n[0])?n[0].outlets:{[ce]:n}}function O0(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return cc(n,e,t);let r=a2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new De(n.segments.slice(0,r.pathIndex),{});return s.children[ce]=new De(n.segments.slice(r.pathIndex),n.children),cc(s,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Py(n,e,t):r.match?cc(n,0,i):Py(n,e,t)}function cc(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=o2(t),i={};if(Object.keys(r).some(s=>s!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let s=cc(n.children[ce],e,t);return new De(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=O0(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(n.segments,i)}}function a2(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(uc(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!m0(l,u,o))return s;r+=2}else{if(!m0(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Py(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(uc(s)){let l=c2(s.outlets);return new De(r,l)}if(i===0&&Dd(t[0])){let l=n.segments[e];r.push(new ri(l.path,g0(t[0]))),i++;continue}let o=uc(s)?s.outlets[ce]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Dd(a)?(r.push(new ri(o,g0(a))),i+=2):(r.push(new ri(o,{})),i++)}return new De(r,{})}function c2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Py(new De([],{}),0,r))}),e}function g0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function m0(n,e,t){return n==t.path&&Zn(e,t.parameters)}var bd="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),Qt=class{id;url;constructor(e,t){this.id=e,this.url=t}},si=class extends Qt{type=ct.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rn=class extends Qt{urlAfterRedirects;type=ct.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ut=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ut||{}),go=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(go||{}),Jn=class extends Qt{reason;code;type=ct.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},er=class extends Qt{reason;code;type=ct.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},mo=class extends Qt{error;target;type=ct.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dc=class extends Qt{urlAfterRedirects;state;type=ct.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sd=class extends Qt{urlAfterRedirects;state;type=ct.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ad=class extends Qt{urlAfterRedirects;state;shouldActivate;type=ct.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rd=class extends Qt{urlAfterRedirects;state;type=ct.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Md=class extends Qt{urlAfterRedirects;state;type=ct.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nd=class{route;type=ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Pd=class{route;type=ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kd=class{snapshot;type=ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xd=class{snapshot;type=ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Od=class{snapshot;type=ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fd=class{snapshot;type=ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yo=class{routerEvent;position;anchor;type=ct.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},hc=class{},vo=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function l2(n,e){return n.providers&&!n._injector&&(n._injector=Wa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function An(n){return n.outlet||ce}function u2(n,e){let t=n.filter(r=>An(r)===e);return t.push(...n.filter(r=>An(r)!==e)),t}function _c(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ld=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return _c(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new es(this.rootInjector)}},es=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ld(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(J(Vt))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ky(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ky(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=xy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return xy(e,this._root).map(t=>t.value)}};function ky(n,e){if(n===e.value)return e;for(let t of e.children){let r=ky(n,t);if(r)return r}return null}function xy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=xy(n,t);if(r.length)return r.unshift(e),r}return[]}var Kt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function uo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var fc=class extends Vd{snapshot;constructor(e,t){super(e),this.snapshot=t,$y(this,e)}toString(){return this.snapshot.toString()}};function F0(n){let e=d2(n),t=new Ge([new ri("",{})]),r=new Ge({}),i=new Ge({}),s=new Ge({}),o=new Ge(""),a=new Mn(t,r,s,o,i,ce,n,e.root);return a.snapshot=e.root,new fc(new Kt(a,[]),e)}function d2(n){let e={},t={},r={},i="",s=new Zi([],e,r,i,t,ce,n,null,{});return new pc("",new Kt(s,[]))}var Mn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(le(u=>u[vc]))??ee(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(le(e=>Ji(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(le(e=>Ji(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jd(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&V0(i)&&(r.resolve[vc]=i.title),r}var Zi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[vc]}constructor(e,t,r,i,s,o,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ji(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ji(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},pc=class extends Vd{url;constructor(e,t){super(t),this.url=e,$y(this,t)}toString(){return L0(this._root)}};function $y(n,e){e.value._routerState=n,e.children.forEach(t=>$y(n,t))}function L0(n){let e=n.children.length>0?` { ${n.children.map(L0).join(", ")} } `:"";return`${n.value}${e}`}function Cy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Zn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Zn(e.params,t.params)||n.paramsSubject.next(t.params),jV(e.url,t.url)||n.urlSubject.next(t.url),Zn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Oy(n,e){let t=Zn(n.params,e.params)&&HV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Oy(n.parent,e.parent))}function V0(n){return typeof n.title=="string"||n.title===null}var j0=new K(""),ts=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ce;activateEvents=new ot;deactivateEvents=new ot;attachEvents=new ot;detachEvents=new ot;routerOutletData=$D(void 0);parentContexts=P(es);location=P(co);changeDetector=P(Ki);inputBinder=P(Ec,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Fy(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=bt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Hi]})}return n})(),Fy=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Mn?this.route:e===es?this.childContexts:e===j0?this.outletData:this.parent.get(e,t)}},Ec=new K(""),Hy=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Ma([r.queryParams,r.params,r.data]).pipe(rn(([s,o,a],l)=>(a=O(O(O({},s),o),a),l===0?ee(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=KC(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),zy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=dn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Oe(0,"router-outlet")},dependencies:[ts],encapsulation:2})}return n})();function qy(n){let e=n.children&&n.children.map(qy),t=e?ae(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=zy),t}function h2(n,e,t){let r=gc(n,e._root,t?t._root:void 0);return new fc(r,e)}function gc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=f2(n,e,t);return new Kt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gc(n,a)),o}}let r=p2(e.value),i=e.children.map(s=>gc(n,s));return new Kt(r,i)}}function f2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gc(n,r,i);return gc(n,r)})}function p2(n){return new Mn(new Ge(n.url),new Ge(n.params),new Ge(n.queryParams),new Ge(n.fragment),new Ge(n.data),n.outlet,n.component,n)}var _o=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},U0="ngNavigationCancelingError";function Ud(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=po(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=B0(!1,Ut.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function B0(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[U0]=!0,t.cancellationCode=e,t}function g2(n){return $0(n)&&po(n.url)}function $0(n){return!!n&&n[U0]}var m2=(n,e,t,r)=>le(i=>(new Ly(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ly=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Cy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=uo(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=uo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=uo(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=uo(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Fd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new xd(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Cy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Cy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Bd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},fo=class{component;route;constructor(e,t){this.component=e,this.route=t}};function y2(n,e,t){let r=n._root,i=e?e._root:null;return ac(r,i,t,[r.value])}function v2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function wo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Vb(n)?n:e.get(n):r}function ac(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=uo(e);return n.children.forEach(o=>{_2(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>lc(a,t.getContext(o),i)),i}function _2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=E2(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Bd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ac(n,e,a?a.children:null,r,i):ac(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new fo(a.outlet.component,o))}else o&&lc(e,a,i),i.canActivateChecks.push(new Bd(r)),s.component?ac(n,null,a?a.children:null,r,i):ac(n,null,t,r,i);return i}function E2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Yi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yi(n.url,e.url)||!Zn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oy(n,e)||!Zn(n.queryParams,e.queryParams);case"paramsChange":default:return!Oy(n,e)}}function lc(n,e,t){let r=uo(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?lc(o,e.children.getContext(s),t):lc(o,null,t):lc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new fo(e.outlet.component,i)):t.canDeactivateChecks.push(new fo(null,i)):t.canDeactivateChecks.push(new fo(null,i))}function wc(n){return typeof n=="function"}function w2(n){return typeof n=="boolean"}function I2(n){return n&&wc(n.canLoad)}function T2(n){return n&&wc(n.canActivate)}function b2(n){return n&&wc(n.canActivateChild)}function D2(n){return n&&wc(n.canDeactivate)}function C2(n){return n&&wc(n.canMatch)}function H0(n){return n instanceof mr||n?.name==="EmptyError"}var Ed=Symbol("INITIAL_VALUE");function Eo(){return rn(n=>Ma(n.map(e=>e.pipe(yr(1),dg(Ed)))).pipe(le(e=>{for(let t of e)if(t!==!0){if(t===Ed)return Ed;if(t===!1||S2(t))return t}return!0}),Gt(e=>e!==Ed),yr(1)))}function S2(n){return po(n)||n instanceof _o}function A2(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ee(ae(O({},t),{guardsResult:!0})):R2(o,r,i,n).pipe(Ye(a=>a&&w2(a)?M2(r,s,n,e):ee(a)),le(a=>ae(O({},t),{guardsResult:a})))})}function R2(n,e,t,r){return Ae(n).pipe(Ye(i=>O2(i.component,i.route,t,e,r)),vr(i=>i!==!0,!0))}function M2(n,e,t,r){return Ae(e).pipe(Qr(i=>Fs(P2(i.route.parent,r),N2(i.route,r),x2(n,i.path,t),k2(n,i.route,t))),vr(i=>i!==!0,!0))}function N2(n,e){return n!==null&&e&&e(new Od(n)),ee(!0)}function P2(n,e){return n!==null&&e&&e(new kd(n)),ee(!0)}function k2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(s=>uu(()=>{let o=_c(e)??t,a=wo(s,o),l=T2(a)?a.canActivate(e,n):un(o,()=>a(e,n));return oi(l).pipe(vr())}));return ee(i).pipe(Eo())}function x2(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>v2(o)).filter(o=>o!==null).map(o=>uu(()=>{let a=o.guards.map(l=>{let u=_c(o.node)??t,h=wo(l,u),p=b2(h)?h.canActivateChild(r,n):un(u,()=>h(r,n));return oi(p).pipe(vr())});return ee(a).pipe(Eo())}));return ee(s).pipe(Eo())}function O2(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ee(!0);let o=s.map(a=>{let l=_c(e)??i,u=wo(a,l),h=D2(u)?u.canDeactivate(n,e,t,r):un(l,()=>u(n,e,t,r));return oi(h).pipe(vr())});return ee(o).pipe(Eo())}function F2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let s=i.map(o=>{let a=wo(o,n),l=I2(a)?a.canLoad(e,t):un(n,()=>a(e,t));return oi(l)});return ee(s).pipe(Eo(),z0(r))}function z0(n){return rg(gt(e=>{if(typeof e!="boolean")throw Ud(n,e)}),le(e=>e===!0))}function L2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let s=i.map(o=>{let a=wo(o,n),l=C2(a)?a.canMatch(e,t):un(n,()=>a(e,t));return oi(l)});return ee(s).pipe(Eo(),z0(r))}var mc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},yc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function lo(n){return nn(new mc(n))}function V2(n){return nn(new x(4e3,!1))}function j2(n){return nn(B0(!1,Ut.GuardRejected))}var Vy=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[ce])return V2(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:l,fragment:u,routeConfig:h,url:p,outlet:g,params:y,data:_,title:A}=i,M=un(s,()=>a({params:y,data:_,queryParams:l,fragment:u,routeConfig:h,url:p,outlet:g,title:A}));if(M instanceof Xn)throw new yc(M);t=M}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new yc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Xn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new De(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},jy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function U2(n,e,t,r,i){let s=q0(n,e,t);return s.matched?(r=l2(e,r),L2(r,e,t,i).pipe(le(o=>o===!0?s:O({},jy)))):ee(s)}function q0(n,e,t){if(e.path==="**")return B2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},jy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||E0)(t,n,e);if(!i)return O({},jy);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?O(O({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function B2(n){return{matched:!0,parameters:n.length>0?I0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function y0(n,e,t,r){return t.length>0&&z2(n,t,r)?{segmentGroup:new De(e,H2(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&q2(n,t,r)?{segmentGroup:new De(n.segments,$2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function $2(n,e,t,r){let i={};for(let s of t)if(Hd(n,e,s)&&!r[An(s)]){let o=new De([],{});i[An(s)]=o}return O(O({},r),i)}function H2(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&An(r)!==ce){let i=new De([],{});t[An(r)]=i}return t}function z2(n,e,t){return t.some(r=>Hd(n,e,r)&&An(r)!==ce)}function q2(n,e,t){return t.some(r=>Hd(n,e,r))}function Hd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function G2(n,e,t){return e.length===0&&!n.children[t]}var Uy=class{};function W2(n,e,t,r,i,s,o="emptyOnly"){return new By(n,e,t,r,i,o,s).recognize()}var K2=31,By=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Vy(this.urlSerializer,this.urlTree)}noMatchError(e){return new x(4002,`'${e.segmentGroup}'`)}recognize(){let e=y0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(le(({children:t,rootSnapshot:r})=>{let i=new Kt(r,t),s=new pc("",i),o=N0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Zi([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(le(r=>({children:r,rootSnapshot:t})),Rt(r=>{if(r instanceof yc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(le(o=>o instanceof Kt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ae(s).pipe(Qr(o=>{let a=r.children[o],l=u2(t,o);return this.processSegmentGroup(e,l,a,o,i)}),ug((o,a)=>(o.push(...a),o)),Yr(null),lg(),Ye(o=>{if(o===null)return lo(r);let a=G0(o);return Q2(a),ee(a)}))}processSegment(e,t,r,i,s,o,a){return Ae(t).pipe(Qr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Rt(u=>{if(u instanceof mc)return ee(null);throw u}))),vr(l=>!!l),Rt(l=>{if(H0(l))return G2(r,i,s)?ee(new Uy):lo(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return An(r)!==o&&(o===ce||!Hd(i,s,r))?lo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):lo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=q0(t,i,s);if(!l)return lo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>K2&&(this.allowRedirects=!1));let y=new Zi(s,u,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,v0(i),An(i),i.component??i._loadedComponent??null,i,_0(i)),_=jd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(_.params),y.data=Object.freeze(_.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(Ye(M=>this.processSegment(e,r,t,M.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=U2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(rn(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(rn(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=l,_=new Zi(g,p,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,v0(r),An(r),r.component??r._loadedComponent??null,r,_0(r)),A=jd(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:L}=y0(t,g,y,u);if(L.length===0&&M.hasChildren())return this.processChildren(h,u,M,_).pipe(le(G=>new Kt(_,G)));if(u.length===0&&L.length===0)return ee(new Kt(_,[]));let $=An(r)===s;return this.processSegment(h,u,M,L,$?ce:s,!0,_).pipe(le(G=>new Kt(_,G instanceof Kt?[G]:[])))}))):lo(t)))}getChildConfig(e,t,r){return t.children?ee({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ee({routes:t._loadedRoutes,injector:t._loadedInjector}):F2(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(gt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):j2(t))):ee({routes:[],injector:e})}};function Q2(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function Y2(n){let e=n.value.routeConfig;return e&&e.path===""}function G0(n){let e=[],t=new Set;for(let r of n){if(!Y2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=G0(r.children);e.push(new Kt(r.value,i))}return e.filter(r=>!t.has(r))}function v0(n){return n.data||{}}function _0(n){return n.resolve||{}}function Z2(n,e,t,r,i,s){return Ye(o=>W2(n,e,t,r,o.extractedUrl,i,s).pipe(le(({state:a,tree:l})=>ae(O({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function J2(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ee(t);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of W0(l))o.add(u);let a=0;return Ae(o).pipe(Qr(l=>s.has(l)?X2(l,r,n,e):(l.data=jd(l,l.parent,n).resolve,ee(void 0))),gt(()=>a++),Ls(1),Ye(l=>a===o.size?ee(t):xt))})}function W0(n){let e=n.children.map(t=>W0(t)).flat();return[n,...e]}function X2(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!V0(i)&&(s[vc]=i.title),ej(s,n,e,r).pipe(le(o=>(n._resolvedData=o,n.data=jd(n,n.parent,t).resolve,null)))}function ej(n,e,t,r){let i=Ry(n);if(i.length===0)return ee({});let s={};return Ae(i).pipe(Ye(o=>tj(n[o],e,t,r).pipe(vr(),gt(a=>{if(a instanceof _o)throw Ud(new ii,a);s[o]=a}))),Ls(1),le(()=>s),Rt(o=>H0(o)?xt:nn(o)))}function tj(n,e,t,r){let i=_c(e)??r,s=wo(n,i),o=s.resolve?s.resolve(e,t):un(i,()=>s(e,t));return oi(o)}function Sy(n){return rn(e=>{let t=n(e);return t?Ae(t).pipe(le(()=>e)):ee(e)})}var Gy=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[vc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(K0),providedIn:"root"})}return n})(),K0=(()=>{class n extends Gy{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(J(h0))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ns=new K("",{providedIn:"root",factory:()=>({})}),rs=new K(""),zd=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(GC);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ee(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=oi(t.loadComponent()).pipe(le(Y0),gt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Na(()=>{this.componentLoaders.delete(t)})),i=new xs(r,()=>new st).pipe(ks());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ee({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Q0(r,this.compiler,t,this.onLoadEndListener).pipe(Na(()=>{this.childrenLoaders.delete(r)})),o=new xs(s,()=>new st).pipe(ks());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q0(n,e,t,r){return oi(n.loadChildren()).pipe(le(Y0),Ye(i=>i instanceof Jm||Array.isArray(i)?ee(i):Ae(e.compileModuleAsync(i))),le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(rs,[],{optional:!0,self:!0}).flat()),{routes:o.map(qy),injector:s}}))}function nj(n){return n&&typeof n=="object"&&"default"in n}function Y0(n){return nj(n)?n.default:n}var qd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(rj),providedIn:"root"})}return n})(),rj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wy=new K(""),Ky=new K("");function Z0(n,e,t){let r=n.get(Ky),i=n.get(et);return n.get(We).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),ij(n))),{onViewTransitionCreated:l}=r;return l&&un(n,()=>l({transition:a,from:e,to:t})),o})}function ij(n){return new Promise(e=>{Lm({read:()=>setTimeout(e)},{injector:n})})}var Qy=new K(""),Gd=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new st;transitionAbortSubject=new st;configLoader=P(zd);environmentInjector=P(Vt);destroyRef=P(qa);urlSerializer=P(Xi);rootContexts=P(es);location=P(ni);inputBindingEnabled=P(Ec,{optional:!0})!==null;titleStrategy=P(Gy);options=P(ns,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(qd);createViewTransition=P(Wy,{optional:!0});navigationErrorHandler=P(Qy,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ee(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Nd(i)),r=i=>this.events.next(new Pd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ae(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Ge(null),this.transitions.pipe(Gt(r=>r!==null),rn(r=>{let i=!1,s=!1;return ee(r).pipe(rn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),xt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ae(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&l!=="reload"){let u="";return this.events.next(new er(o.id,this.urlSerializer.serialize(o.rawUrl),u,go.IgnoredSameUrlNavigation)),o.resolve(!1),xt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ee(o).pipe(rn(u=>(this.events.next(new si(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?xt:Promise.resolve(u))),Z2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),gt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ae(O({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new dc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:h,source:p,restoredState:g,extras:y}=o,_=new si(u,this.urlSerializer.serialize(h),p,g);this.events.next(_);let A=F0(this.rootComponentType).snapshot;return this.currentTransition=r=ae(O({},o),{targetSnapshot:A,urlAfterRedirects:h,extras:ae(O({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,ee(r)}else{let u="";return this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),u,go.IgnoredByUrlHandlingStrategy)),o.resolve(!1),xt}}),gt(o=>{let a=new Sd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),le(o=>(this.currentTransition=r=ae(O({},o),{guards:y2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),A2(this.environmentInjector,o=>this.events.next(o)),gt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ud(this.urlSerializer,o.guardsResult);let a=new Ad(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Gt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Ut.GuardRejected),!1)),Sy(o=>{if(o.guards.canActivateChecks.length!==0)return ee(o).pipe(gt(a=>{let l=new Rd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),rn(a=>{let l=!1;return ee(a).pipe(J2(this.paramsInheritanceStrategy,this.environmentInjector),gt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Ut.NoDataFromResolver)}}))}),gt(a=>{let l=new Md(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Sy(o=>{let a=l=>{let u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(gt(h=>{l.component=h}),le(()=>{})));for(let h of l.children)u.push(...a(h));return u};return Ma(a(o.targetSnapshot.root)).pipe(Yr(null),yr(1))}),Sy(()=>this.afterPreactivation()),rn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,l=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return l?Ae(l).pipe(le(()=>r)):ee(r)}),le(o=>{let a=h2(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ae(O({},o),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),gt(()=>{this.events.next(new hc)}),m2(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),yr(1),gt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Rn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),hg(this.transitionAbortSubject.pipe(gt(o=>{throw o}))),Na(()=>{!i&&!s&&this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Rt(o=>{if(this.destroyed)return r.resolve(!1),xt;if(s=!0,$0(o))this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),g2(o)?this.events.next(new vo(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new mo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let l=un(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof _o){let{message:u,cancellationCode:h}=Ud(this.urlSerializer,l);this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,h)),this.events.next(new vo(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return xt}))}))}cancelNavigationTransition(t,r,i){let s=new Jn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sj(n){return n!==bd}var J0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(oj),providedIn:"root"})}return n})(),$d=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},oj=(()=>{class n extends $d{static \u0275fac=(()=>{let t;return function(i){return(t||(t=no(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X0=(()=>{class n{urlSerializer=P(Xi);options=P(ns,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(ni);urlHandlingStrategy=P(qd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Xn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof Xn?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=F0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>P(aj),providedIn:"root"})}return n})(),aj=(()=>{class n extends X0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof si?this.updateStateMemento():t instanceof er?this.commitTransition(r):t instanceof dc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof hc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Jn&&(t.code===Ut.GuardRejected||t.code===Ut.NoDataFromResolver)?this.restoreHistory(r):t instanceof mo?this.restoreHistory(r,!0):t instanceof Rn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,l=O(O({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=O(O({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=no(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wd(n,e){n.events.pipe(Gt(t=>t instanceof Rn||t instanceof Jn||t instanceof mo||t instanceof er),le(t=>t instanceof Rn||t instanceof er?0:(t instanceof Jn?t.code===Ut.Redirect||t.code===Ut.SupersededByNewNavigation:!1)?2:1),Gt(t=>t!==2),yr(1)).subscribe(()=>{e()})}var cj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(FC);stateManager=P(X0);options=P(ns,{optional:!0})||{};pendingTasks=P(ro);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(Gd);urlSerializer=P(Xi);location=P(ni);urlHandlingStrategy=P(qd);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(J0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(rs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Ec,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Jn&&r.code!==Ut.Redirect&&r.code!==Ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rn)this.navigated=!0;else if(r instanceof vo){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sj(i.source)},o);this.scheduleNavigation(a,bd,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}dj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=O({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(qy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=P0(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return k0(p,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=po(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,bd,null,r)}navigate(t,r={skipLocationChange:!1}){return uj(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},cj):r===!1?i=O({},lj):i=r,po(t))return f0(this.currentUrlTree,t,i);let s=this.parseUrl(t);return f0(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((p,g)=>{a=p,l=g});let h=this.pendingTasks.add();return Wd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new x(4008,!1)}function dj(n){return!(n instanceof hc)&&!(n instanceof vo)}var Ic=class{};var eS=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,s){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Gt(t=>t instanceof Rn),Qr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Wa(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ae(i).pipe(Os())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ee(null);let s=i.pipe(Ye(o=>o===null?ee(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ae([s,o]).pipe(Os())}else return s})}static \u0275fac=function(r){return new(r||n)(J(lt),J(Vt),J(Ic),J(zd))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tS=new K(""),hj=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof si?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof er&&t.code===go.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yo&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yo(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){SC()};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function Zy(n,...e){return ym([{provide:rs,multi:!0,useValue:n},[],{provide:Mn,useFactory:nS,deps:[lt]},{provide:ad,multi:!0,useFactory:rS},e.map(t=>t.\u0275providers)])}function nS(n){return n.routerState.root}function Tc(n,e){return{\u0275kind:n,\u0275providers:e}}function rS(){let n=P(ln);return e=>{let t=n.get(Ui);if(e!==t.components[0])return;let r=n.get(lt),i=n.get(iS);n.get(Jy)===1&&r.initialNavigation(),n.get(aS,null,ue.Optional)?.setUpPreloading(),n.get(tS,null,ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iS=new K("",{factory:()=>new st}),Jy=new K("",{providedIn:"root",factory:()=>1});function sS(){let n=[{provide:Jy,useValue:0},ey(()=>{let e=P(ln);return e.get(cy,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(lt),s=e.get(iS);Wd(i,()=>{r(!0)}),e.get(Gd).afterPreactivation=()=>(r(!0),s.closed?ee(void 0):s),i.initialNavigation()}))})];return Tc(2,n)}function oS(){let n=[ey(()=>{P(lt).setUpLocationChangeListener()}),{provide:Jy,useValue:2}];return Tc(3,n)}var aS=new K("");function cS(n){return Tc(0,[{provide:aS,useExisting:eS},{provide:Ic,useExisting:n}])}function lS(){return Tc(8,[Hy,{provide:Ec,useExisting:Hy}])}function uS(n){Wi("NgRouterViewTransitions");let e=[{provide:Wy,useValue:Z0},{provide:Ky,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return Tc(9,e)}var dS=[ni,{provide:Xi,useClass:ii},lt,es,{provide:Mn,useFactory:nS,deps:[lt]},zd,[]],Xy=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[dS,[],{provide:rs,multi:!0,useValue:t},[],r?.errorHandler?{provide:Qy,useValue:r.errorHandler}:[],{provide:ns,useValue:r||{}},r?.useHash?pj():gj(),fj(),r?.preloadingStrategy?cS(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?mj(r):[],r?.bindToComponentInputs?lS().\u0275providers:[],r?.enableViewTransitions?uS().\u0275providers:[],yj()]}}static forChild(t){return{ngModule:n,providers:[{provide:rs,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dn({type:n});static \u0275inj=Tn({})}return n})();function fj(){return{provide:tS,useFactory:()=>{let n=P(r0),e=P(We),t=P(ns),r=P(Gd),i=P(Xi);return t.scrollOffset&&n.setOffset(t.scrollOffset),new hj(i,r,n,e,t)}}}function pj(){return{provide:Tr,useClass:dy}}function gj(){return{provide:Tr,useClass:ud}}function mj(n){return[n.initialNavigation==="disabled"?oS().\u0275providers:[],n.initialNavigation==="enabledBlocking"?sS().\u0275providers:[]]}var Yy=new K("");function yj(){return[{provide:Yy,useFactory:rS},{provide:ad,multi:!0,useExisting:Yy}]}var hS=()=>{};var gS=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ej=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,g=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(gS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ej(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new tv;let g=s<<2|a>>4;if(r.push(g),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let _=u<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},tv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},wj=function(n){let e=gS(n);return mS.encodeByteArray(e,!0)},Dc=function(n){return wj(n).replace(/\./g,"")},Qd=function(n){try{return mS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ij=()=>yS().__FIREBASE_DEFAULTS__,Tj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Qd(n[1]);return e&&JSON.parse(e)},Yd=()=>{try{return hS()||Ij()||Tj()||bj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rv=n=>{var e,t;return(t=(e=Yd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},vS=n=>{let e=rv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iv=()=>{var n;return(n=Yd())===null||n===void 0?void 0:n.config},sv=n=>{var e;return(e=Yd())===null||e===void 0?void 0:e[`_${n}`]};var Kd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function is(n){return n.endsWith(".cloudworkstations.dev")}function Zd(n){return I(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function _S(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Dc(JSON.stringify(t)),Dc(JSON.stringify(o)),""].join(".")}var bc={};function Dj(){let n={prod:[],emulator:[]};for(let e of Object.keys(bc))bc[e]?n.emulator.push(e):n.prod.push(e);return n}function Cj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var fS=!1;function Io(n,e){if(typeof window>"u"||typeof document>"u"||!is(window.location.host)||bc[n]===e||bc[n]||fS)return;bc[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",s=Dj().prod.length>0;function o(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{fS=!0,o()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=Cj(r),y=t("text"),_=document.getElementById(y)||document.createElement("span"),A=t("learnmore"),M=document.getElementById(A)||document.createElement("a"),L=t("preprendIcon"),$=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let G=g.element;a(G),h(M,A);let ne=u();l($,L),G.append($,_,M,ne),document.body.appendChild(G)}s?(_.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ES(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function Sj(){var n;let e=(n=Yd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IS(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function TS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bS(){let n=dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function DS(){return!Sj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ov(){try{return typeof indexedDB=="object"}catch{return!1}}function CS(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Aj="FirebaseError",Yt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Aj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,br.prototype.create)}},br=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Rj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Yt(i,a,r)}};function Rj(n,e){return n.replace(Mj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Mj=/\{\$([^}]+)}/g;function SS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(pS(s)&&pS(o)){if(!tr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function pS(n){return n!==null&&typeof n=="object"}function To(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function AS(n,e){let t=new nv(n,e);return t.subscribe.bind(t)}var nv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Nj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ev),i.error===void 0&&(i.error=ev),i.complete===void 0&&(i.complete=ev);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Nj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ev(){}var XK=4*60*60*1e3;function ut(n){return n&&n._delegate?n._delegate:n}var pn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ss="[DEFAULT]";var av=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Kd;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kj(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Pj(n){return n===ss?void 0:n}function kj(n){return n.instantiationMode==="EAGER"}var Jd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new av(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xj=[],me=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(me||{}),Oj={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},Fj=me.INFO,Lj={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Vj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Lj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ai=class{constructor(e){this.name=e,this._logLevel=Fj,this._logHandler=Vj,this._userLogHandler=null,xj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Oj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}};var jj=(n,e)=>e.some(t=>n instanceof t),RS,MS;function Uj(){return RS||(RS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bj(){return MS||(MS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var NS=new WeakMap,lv=new WeakMap,PS=new WeakMap,cv=new WeakMap,dv=new WeakMap;function $j(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(nr(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&NS.set(t,n)}).catch(()=>{}),dv.set(e,n),e}function Hj(n){if(lv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});lv.set(n,e)}var uv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return lv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||PS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kS(n){uv=n(uv)}function zj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Xd(this),e,...t);return PS.set(r,e.sort?e.sort():[e]),nr(r)}:Bj().includes(n)?function(...e){return n.apply(Xd(this),e),nr(NS.get(this))}:function(...e){return nr(n.apply(Xd(this),e))}}function qj(n){return typeof n=="function"?zj(n):(n instanceof IDBTransaction&&Hj(n),jj(n,Uj())?new Proxy(n,uv):n)}function nr(n){if(n instanceof IDBRequest)return $j(n);if(cv.has(n))return cv.get(n);let e=qj(n);return e!==n&&(cv.set(n,e),dv.set(e,n)),e}var Xd=n=>dv.get(n);function OS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=nr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(nr(o.result),l.oldVersion,l.newVersion,nr(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var Gj=["get","getKey","getAll","getAllKeys","count"],Wj=["put","add","delete","clear"],hv=new Map;function xS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hv.get(e))return hv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Wj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Gj.includes(t)))return;let s=function(o,...a){return I(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return hv.set(e,s),s}kS(n=>ae(O({},n),{get:(e,t,r)=>xS(e,t)||n.get(e,t,r),has:(e,t)=>!!xS(e,t)||n.has(e,t)}));var pv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Kj(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Kj(n){let e=n.getComponent();return e?.type==="VERSION"}var gv="@firebase/app",FS="0.12.3";var Dr=new ai("@firebase/app"),Qj="@firebase/app-compat",Yj="@firebase/analytics-compat",Zj="@firebase/analytics",Jj="@firebase/app-check-compat",Xj="@firebase/app-check",eU="@firebase/auth",tU="@firebase/auth-compat",nU="@firebase/database",rU="@firebase/data-connect",iU="@firebase/database-compat",sU="@firebase/functions",oU="@firebase/functions-compat",aU="@firebase/installations",cU="@firebase/installations-compat",lU="@firebase/messaging",uU="@firebase/messaging-compat",dU="@firebase/performance",hU="@firebase/performance-compat",fU="@firebase/remote-config",pU="@firebase/remote-config-compat",gU="@firebase/storage",mU="@firebase/storage-compat",yU="@firebase/firestore",vU="@firebase/vertexai",_U="@firebase/firestore-compat",EU="firebase",wU="11.7.3";var mv="[DEFAULT]",IU={[gv]:"fire-core",[Qj]:"fire-core-compat",[Zj]:"fire-analytics",[Yj]:"fire-analytics-compat",[Xj]:"fire-app-check",[Jj]:"fire-app-check-compat",[eU]:"fire-auth",[tU]:"fire-auth-compat",[nU]:"fire-rtdb",[rU]:"fire-data-connect",[iU]:"fire-rtdb-compat",[sU]:"fire-fn",[oU]:"fire-fn-compat",[aU]:"fire-iid",[cU]:"fire-iid-compat",[lU]:"fire-fcm",[uU]:"fire-fcm-compat",[dU]:"fire-perf",[hU]:"fire-perf-compat",[fU]:"fire-rc",[pU]:"fire-rc-compat",[gU]:"fire-gcs",[mU]:"fire-gcs-compat",[yU]:"fire-fst",[_U]:"fire-fst-compat",[vU]:"fire-vertex","fire-js":"fire-js",[EU]:"fire-js-all"};var eh=new Map,TU=new Map,yv=new Map;function LS(n,e){try{n.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function li(n){let e=n.name;if(yv.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;yv.set(e,n);for(let t of eh.values())LS(t,n);for(let t of TU.values())LS(t,n);return!0}function Sc(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zt(n){return n==null?!1:n.settings!==void 0}var bU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new br("app","Firebase",bU);var vv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}};var ui=wU;function wv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:mv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ci.create("bad-app-name",{appName:String(i)});if(t||(t=iv()),!t)throw ci.create("no-options");let s=eh.get(i);if(s){if(tr(t,s.options)&&tr(r,s.config))return s;throw ci.create("duplicate-app",{appName:i})}let o=new Jd(i);for(let l of yv.values())o.addComponent(l);let a=new vv(t,r,o);return eh.set(i,a),a}function th(n=mv){let e=eh.get(n);if(!e&&n===mv&&iv())return wv();if(!e)throw ci.create("no-app",{appName:n});return e}function Nn(n,e,t){var r;let i=(r=IU[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(a.join(" "));return}li(new pn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var DU="firebase-heartbeat-database",CU=1,Cc="firebase-heartbeat-store",fv=null;function BS(){return fv||(fv=OS(DU,CU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ci.create("idb-open",{originalErrorMessage:n.message})})),fv}function SU(n){return I(this,null,function*(){try{let t=(yield BS()).transaction(Cc),r=yield t.objectStore(Cc).get($S(n));return yield t.done,r}catch(e){if(e instanceof Yt)Dr.warn(e.message);else{let t=ci.create("idb-get",{originalErrorMessage:e?.message});Dr.warn(t.message)}}})}function VS(n,e){return I(this,null,function*(){try{let r=(yield BS()).transaction(Cc,"readwrite");yield r.objectStore(Cc).put(e,$S(n)),yield r.done}catch(t){if(t instanceof Yt)Dr.warn(t.message);else{let r=ci.create("idb-set",{originalErrorMessage:t?.message});Dr.warn(r.message)}}})}function $S(n){return`${n.name}!${n.options.appId}`}var AU=1024,RU=30,_v=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ev(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>RU){let o=NU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Dr.warn(r)}})}getHeartbeatsHeader(){return I(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=jS(),{heartbeatsToSend:r,unsentEntries:i}=MU(this._heartbeatsCache.heartbeats),s=Dc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Dr.warn(t),""}})}};function jS(){return new Date().toISOString().substring(0,10)}function MU(n,e=AU){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),US(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),US(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ev=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return ov()?CS().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield SU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VS(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function US(n){return Dc(JSON.stringify({version:2,heartbeats:n})).length}function NU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function PU(n){li(new pn("platform-logger",e=>new pv(e),"PRIVATE")),li(new pn("heartbeat",e=>new _v(e),"PRIVATE")),Nn(gv,FS,n),Nn(gv,FS,"esm2017"),Nn("fire-js","")}PU("");var kU="firebase",xU="11.7.3";Nn(kU,xU,"app");function rA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iA=rA,sA=new br("auth","Firebase",rA());var ah=new ai("@firebase/auth");function OU(n,...e){ah.logLevel<=me.WARN&&ah.warn(`Auth (${ui}): ${n}`,...e)}function rh(n,...e){ah.logLevel<=me.ERROR&&ah.error(`Auth (${ui}): ${n}`,...e)}function ir(n,...e){throw jv(n,...e)}function Pn(n,...e){return jv(n,...e)}function Vv(n,e,t){let r=Object.assign(Object.assign({},iA()),{[e]:t});return new br("auth","Firebase",r).create(e,{appName:n.name})}function os(n){return Vv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FU(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ir(n,"argument-error"),Vv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jv(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return sA.create(n,...e)}function te(n,e,...t){if(!n)throw jv(e,...t)}function Cr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw rh(e),new Error(e)}function Ar(n,e){n||Cr(e)}function bv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function LU(){return HS()==="http:"||HS()==="https:"}function HS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function VU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LU()||IS()||"connection"in navigator)?navigator.onLine:!0}function jU(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var as=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ar(t>e,"Short delay should be less than long delay!"),this.isMobile=ES()||TS()}get(){return VU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Uv(n,e){Ar(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ch=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var UU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var BU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$U=new as(3e4,6e4);function Bv(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Do(s,o,a,l){return I(this,arguments,function*(n,e,t,r,i={}){return oA(n,i,()=>I(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let p=To(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},u);return wS()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&is(n.emulatorConfig.host)&&(y.credentials="include"),ch.fetch()(yield aA(n,n.config.apiHost,t,p),y)}))})}function oA(n,e,t){return I(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},UU),e);try{let i=new Dv(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nh(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw nh(n,"user-disabled",o);let h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Vv(n,h,u);ir(n,h)}}catch(i){if(i instanceof Yt)throw i;ir(n,"network-request-failed",{message:String(i)})}})}function HU(s,o,a,l){return I(this,arguments,function*(n,e,t,r,i={}){let u=yield Do(n,e,t,r,i);return"mfaPendingCredential"in u&&ir(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function aA(n,e,t,r){return I(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Uv(n.config,i):`${n.config.apiScheme}://${i}`;return BU.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var Dv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),$U.get())})}};function nh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Pn(n,e,r);return i.customData._tokenResponse=t,i}function zU(n,e){return I(this,null,function*(){return Do(n,"POST","/v1/accounts:delete",e)})}function lh(n,e){return I(this,null,function*(){return Do(n,"POST","/v1/accounts:lookup",e)})}function Ac(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cA(n,e=!1){return I(this,null,function*(){let t=ut(n),r=yield t.getIdToken(e),i=$v(r);te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ac(Iv(i.auth_time)),issuedAtTime:Ac(Iv(i.iat)),expirationTime:Ac(Iv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Iv(n){return Number(n)*1e3}function $v(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return rh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Qd(t);return i?JSON.parse(i):(rh("Failed to decode base64 JWT payload"),null)}catch(i){return rh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zS(n){let e=$v(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Mc(n,e,t=!1){return I(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Yt&&qU(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function qU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Cv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),t)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Nc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function uh(n){return I(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Mc(n,lh(t,{idToken:r}));te(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uA(s.providerUserInfo):[],a=GU(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,h=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Nc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function lA(n){return I(this,null,function*(){let e=ut(n);yield uh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function GU(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uA(n){return n.map(e=>{var{providerId:t}=e,r=Kl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function WU(n,e){return I(this,null,function*(){let t=yield oA(n,{},()=>I(null,null,function*(){let r=To({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield aA(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ch.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function KU(n,e){return I(this,null,function*(){return Do(n,"POST","/v2/accounts:revokeToken",Bv(n,e))})}var Rc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");let t=zS(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return I(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield WU(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Cr("not implemented")}};function di(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var hi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Kl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let t=yield Mc(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return cA(this,e)}reload(){return lA(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield uh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(Zt(this.auth.app))return Promise.reject(os(this.auth));let e=yield this.getIdToken();return yield Mc(this,zU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=t.photoURL)!==null&&o!==void 0?o:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,L=(u=t.createdAt)!==null&&u!==void 0?u:void 0,$=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:ne,isAnonymous:$e,providerData:de,stsTokenManager:T}=t;te(G&&T,e,"internal-error");let v=Rc.fromJSON(this.name,T);te(typeof G=="string",e,"internal-error"),di(p,e.name),di(g,e.name),te(typeof ne=="boolean",e,"internal-error"),te(typeof $e=="boolean",e,"internal-error"),di(y,e.name),di(_,e.name),di(A,e.name),di(M,e.name),di(L,e.name),di($,e.name);let E=new n({uid:G,auth:e,email:g,emailVerified:ne,displayName:p,isAnonymous:$e,photoURL:_,phoneNumber:y,tenantId:A,stsTokenManager:v,createdAt:L,lastLoginAt:$});return de&&Array.isArray(de)&&(E.providerData=de.map(b=>Object.assign({},b))),M&&(E._redirectEventId=M),E}static _fromIdTokenResponse(e,t,r=!1){return I(this,null,function*(){let i=new Rc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield uh(s),s})}static _fromGetAccountInfoResponse(e,t,r){return I(this,null,function*(){let i=t.users[0];te(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?uA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Rc;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Nc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var qS=new Map;function Sr(n){Ar(n instanceof Function,"Expected a class definition");let e=qS.get(n);return e?(Ar(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qS.set(n,e),e)}var QU=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(t,r){return I(this,null,function*(){this.storage[t]=r})}_get(t){return I(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return I(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Sv=QU;function ih(n,e,t){return`firebase:${n}:${e}:${t}`}var dh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ih(this.userKey,i.apiKey,s),this.fullPersistenceKey=ih("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield lh(this.auth,{idToken:e}).catch(()=>{});return t?hi._fromGetAccountInfoResponse(this.auth,t,e):null}return hi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return I(this,null,function*(){if(!t.length)return new n(Sr(Sv),e,r);let i=(yield Promise.all(t.map(u=>I(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Sr(Sv),o=ih(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(o);if(h){let p;if(typeof h=="string"){let g=yield lh(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield hi._fromGetAccountInfoResponse(e,g,h)}else p=hi._fromJSON(e,h);u!==s&&(a=p),s=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(u=>I(null,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,r))})}};function GS(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mA(e))return"Blackberry";if(yA(e))return"Webos";if(hA(e))return"Safari";if((e.includes("chrome/")||fA(e))&&!e.includes("edge/"))return"Chrome";if(gA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function dA(n=dt()){return/firefox\//i.test(n)}function hA(n=dt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fA(n=dt()){return/crios\//i.test(n)}function pA(n=dt()){return/iemobile/i.test(n)}function gA(n=dt()){return/android/i.test(n)}function mA(n=dt()){return/blackberry/i.test(n)}function yA(n=dt()){return/webos/i.test(n)}function Hv(n=dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function YU(n=dt()){var e;return Hv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZU(){return bS()&&document.documentMode===10}function vA(n=dt()){return Hv(n)||gA(n)||yA(n)||mA(n)||/windows phone/i.test(n)||pA(n)}function _A(n,e=[]){let t;switch(n){case"Browser":t=GS(dt());break;case"Worker":t=`${GS(dt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ui}/${r}`}var Av=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function JU(t){return I(this,arguments,function*(n,e={}){return Do(n,"GET","/v2/passwordPolicy",Bv(n,e))})}var XU=6,Rv=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:XU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Mv=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hh(this),this.idTokenSubscription=new hh(this),this.beforeStateQueue=new Av(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield dh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let t=yield lh(this,{idToken:e}),r=yield hi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var t;if(Zt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield uh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jU()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(Zt(this.app))return Promise.reject(os(this));let t=e?ut(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return I(this,null,function*(){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return Zt(this.app)?Promise.reject(os(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zt(this.app)?Promise.reject(os(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(Sr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield JU(this),t=new Rv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new br("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield KU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Sr(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=yield dh.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return I(this,null,function*(){var e;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&OU(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Eh(n){return ut(n)}var hh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=AS(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var zv={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eB(n){zv=n}function tB(n){return zv.loadJS(n)}function nB(){return zv.gapiScript}function EA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wA(n,e){let t=Sc(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(tr(s,e??{}))return i;ir(i,"already-initialized")}return t.initialize({options:e})}function rB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Sr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function IA(n,e,t){let r=Eh(n);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=TA(e),{host:o,port:a}=iB(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(tr(u,r.config.emulator)&&tr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,is(o)?(Io("Auth",!0),Zd(`${s}//${o}${l}`)):i||sB()}function TA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function iB(n){let e=TA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:WS(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:WS(o)}}}function WS(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function sB(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Pc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,t){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}};function bo(n,e){return I(this,null,function*(){return HU(n,"POST","/v1/accounts:signInWithIdp",Bv(n,e))})}var oB="http://localhost",fh=class n extends Pc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Kl(t,["providerId","signInMethod"]);if(!r||!i)return null;let o=new n(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return bo(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,bo(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){let e={requestUri:oB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=To(t)}return e}};var kc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ph=class extends kc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var qv=(()=>{class n extends ph{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return fh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var xc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return I(this,null,function*(){let s=yield hi._fromIdTokenResponse(e,r,i),o=KS(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=KS(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function KS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Nv=class n extends Yt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function bA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Nv._fromErrorAndOperation(n,s,e,r):s})}function aB(n,e,t=!1){return I(this,null,function*(){let r=yield Mc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return xc._forOperation(n,"link",r)})}function cB(n,e,t=!1){return I(this,null,function*(){let{auth:r}=n;if(Zt(r.app))return Promise.reject(os(r));let i="reauthenticate";try{let s=yield Mc(n,bA(r,i,e,n),t);te(s.idToken,r,"internal-error");let o=$v(s.idToken);te(o,r,"internal-error");let{sub:a}=o;return te(n.uid===a,r,"user-mismatch"),xc._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ir(r,"user-mismatch"),s}})}function lB(n,e,t=!1){return I(this,null,function*(){if(Zt(n.app))return Promise.reject(os(n));let r="signIn",i=yield bA(n,r,e),s=yield xc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function DA(n,e,t,r){return ut(n).onIdTokenChanged(e,t,r)}function CA(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function Gv(n,e,t,r){return ut(n).onAuthStateChanged(e,t,r)}function Wv(n){return ut(n).signOut()}var gh="__sak";var mh=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gh,"1"),this.storage.removeItem(gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var uB=1e3,dB=10,hB=(()=>{class n extends mh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);ZU()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,dB):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},uB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return I(this,null,function*(){yield Wr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return I(this,null,function*(){let r=yield Wr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return I(this,null,function*(){yield Wr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),SA=hB;var fB=(()=>{class n extends mh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Kv=fB;function pB(n){return Promise.all(n.map(e=>I(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var gB=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return I(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(a).map(h=>I(this,null,function*(){return h(r.origin,o)})),u=yield pB(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Qv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Pv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{let u=Qv("",20);i.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function rr(){return window}function mB(n){rr().location.href=n}function AA(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}function yB(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vB(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _B(){return AA()?self:null}var RA="firebaseLocalStorageDb",EB=1,yh="firebaseLocalStorage",MA="fbase_key",cs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function wh(n,e){return n.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function wB(){let n=indexedDB.deleteDatabase(RA);return new cs(n).toPromise()}function kv(){let n=indexedDB.open(RA,EB);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(yh,{keyPath:MA})}catch(i){t(i)}}),n.addEventListener("success",()=>I(null,null,function*(){let r=n.result;r.objectStoreNames.contains(yh)?e(r):(r.close(),yield wB(),e(yield kv()))}))})}function QS(n,e,t){return I(this,null,function*(){let r=wh(n,!0).put({[MA]:e,value:t});return new cs(r).toPromise()})}function IB(n,e){return I(this,null,function*(){let t=wh(n,!1).get(e),r=yield new cs(t).toPromise();return r===void 0?null:r.value})}function YS(n,e){let t=wh(n,!0).delete(e);return new cs(t).toPromise()}var TB=800,bB=3,DB=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield kv(),this.db)})}_withRetries(t){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>bB)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return AA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=gB._getInstance(_B()),this.receiver._subscribe("keyChanged",(t,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var t,r;if(this.activeServiceWorker=yield yB(),!this.activeServiceWorker)return;this.sender=new Pv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vB()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let t=yield kv();return yield QS(t,gh,"1"),yield YS(t,gh),!0}catch{}return!1})}_withPendingWrite(t){return I(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>QS(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return I(this,null,function*(){let r=yield this._withRetries(i=>IB(i,t));return this.localCache[t]=r,r})}_remove(t){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>YS(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return I(this,null,function*(){let t=yield this._withRetries(s=>{let o=wh(s,!1).getAll();return new cs(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),TB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),NA=DB;var PQ=EA("rcb"),kQ=new as(3e4,6e4);function PA(n,e){return e?Sr(e):(te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Oc=class extends Pc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function CB(n){return lB(n.auth,new Oc(n),n.bypassAuthState)}function SB(n){let{auth:e,user:t}=n;return te(t,e,"internal-error"),cB(t,new Oc(n),n.bypassAuthState)}function AB(n){return I(this,null,function*(){let{auth:e,user:t}=n;return te(t,e,"internal-error"),aB(t,new Oc(n),n.bypassAuthState)})}var vh=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CB;case"linkViaPopup":case"linkViaRedirect":return AB;case"reauthViaPopup":case"reauthViaRedirect":return SB;default:ir(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var RB=new as(2e3,1e4);function Yv(n,e,t){return I(this,null,function*(){if(Zt(n.app))return Promise.reject(Pn(n,"operation-not-supported-in-this-environment"));let r=Eh(n);FU(n,e,kc);let i=PA(r,t);return new MB(r,"signInViaPopup",e,i).executeNotNull()})}var MB=(()=>{class n extends vh{constructor(t,r,i,s,o){super(t,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return I(this,null,function*(){let t=yield this.execute();return te(t,this.auth,"internal-error"),t})}onExecution(){return I(this,null,function*(){Ar(this.filter.length===1,"Popup operations only handle one event");let t=Qv();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RB.get())};t()}}n.currentPopupAction=null;return n})(),NB="pendingRedirect",sh=new Map,xv=class n extends vh{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=sh.get(this.auth._key());if(!e){try{let r=(yield PB(this.resolver,this.auth))?yield Wr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return Wr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Wr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function PB(n,e){return I(this,null,function*(){let t=OB(e),r=xB(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function kB(n,e){sh.set(n._key(),e)}function xB(n){return Sr(n._redirectPersistence)}function OB(n){return ih(NB,n.config.apiKey,n.name)}function FB(n,e,t=!1){return I(this,null,function*(){if(Zt(n.app))return Promise.reject(os(n));let r=Eh(n),i=PA(r,e),o=yield new xv(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var LB=10*60*1e3,Ov=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VB(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!kA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Pn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LB&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZS(e))}saveEventToCache(e){this.cachedEventUids.add(ZS(e)),this.lastProcessedEventTime=Date.now()}};function ZS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function VB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kA(n);default:return!1}}function jB(t){return I(this,arguments,function*(n,e={}){return Do(n,"GET","/v1/projects",e)})}var UB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BB=/^https?/;function $B(n){return I(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield jB(n);for(let t of e)try{if(HB(t))return}catch{}ir(n,"unauthorized-domain")})}function HB(n){let e=bv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!BB.test(t))return!1;if(UB.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var zB=new as(3e4,6e4);function JS(){let n=rr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qB(n){return new Promise((e,t)=>{var r,i,s;function o(){JS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JS(),t(Pn(n,"network-request-failed"))},timeout:zB.get()})}if(!((i=(r=rr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rr().gapi)===null||s===void 0)&&s.load)o();else{let a=EA("iframefcb");return rr()[a]=()=>{gapi.load?o():t(Pn(n,"network-request-failed"))},tB(`${nB()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw oh=null,e})}var oh=null;function GB(n){return oh=oh||qB(n),oh}var WB=new as(5e3,15e3),KB="__/auth/iframe",QB="emulator/auth/iframe",YB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JB(n){let e=n.config;te(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Uv(e,QB):`https://${n.config.authDomain}/${KB}`,r={apiKey:e.apiKey,appName:n.name,v:ui},i=ZB.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${To(r).slice(1)}`}function XB(n){return I(this,null,function*(){let e=yield GB(n),t=rr().gapi;return te(t,n,"internal-error"),e.open({where:document.body,url:JB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YB,dontclear:!0},r=>new Promise((i,s)=>I(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Pn(n,"network-request-failed"),a=rr().setTimeout(()=>{s(o)},WB.get());function l(){rr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})})))})}var e$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t$=500,n$=600,r$="_blank",i$="http://localhost",_h=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function s$(n,e,t,r=t$,i=n$){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=Object.assign(Object.assign({},e$),{width:r.toString(),height:i.toString(),top:s,left:o}),u=dt().toLowerCase();t&&(a=fA(u)?r$:t),dA(u)&&(e=e||i$,l.scrollbars="yes");let h=Object.entries(l).reduce((g,[y,_])=>`${g}${y}=${_},`,"");if(YU(u)&&a!=="_self")return o$(e||"",a),new _h(null);let p=window.open(e||"",a,h);te(p,n,"popup-blocked");try{p.focus()}catch{}return new _h(p)}function o$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var a$="__/auth/handler",c$="emulator/auth/handler",l$=encodeURIComponent("fac");function XS(n,e,t,r,i,s){return I(this,null,function*(){te(n.config.authDomain,n,"auth-domain-config-required"),te(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ui,eventId:i};if(e instanceof kc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",SS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof ph){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let l=yield n._getAppCheckToken(),u=l?`#${l$}=${encodeURIComponent(l)}`:"";return`${u$(n)}?${To(a).slice(1)}${u}`})}function u$({config:n}){return n.emulator?Uv(n,c$):`https://${n.authDomain}/${a$}`}var Tv="webStorageSupport",Fv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kv,this._completeRedirectFn=FB,this._overrideRedirectResult=kB}_openPopup(e,t,r,i){return I(this,null,function*(){var s;Ar((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield XS(e,t,r,bv(),i);return s$(e,o,Qv())})}_openRedirect(e,t,r,i){return I(this,null,function*(){yield this._originValidation(e);let s=yield XS(e,t,r,bv(),i);return mB(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ar(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return I(this,null,function*(){let t=yield XB(e),r=new Ov(e);return t.register("authEvent",i=>(te(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tv,{type:Tv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Tv];o!==void 0&&t(!!o),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$B(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vA()||hA()||Hv()}},xA=Fv;var eA="@firebase/auth",tA="1.10.4";var Lv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function d$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h$(n){li(new pn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_A(n)},u=new Mv(r,i,s,l);return rB(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),li(new pn("auth-internal",e=>{let t=Eh(e.getProvider("auth").getImmediate());return(r=>new Lv(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(eA,tA,d$(n)),Nn(eA,tA,"esm2017")}var f$=5*60,p$=sv("authIdTokenMaxAge")||f$,nA=null,g$=n=>e=>I(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>p$)return;let i=t?.token;nA!==i&&(nA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Zv(n=th()){let e=Sc(n,"auth");if(e.isInitialized())return e.getImmediate();let t=wA(n,{popupRedirectResolver:xA,persistence:[NA,SA,Kv]}),r=sv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=g$(s.toString());CA(t,o,()=>o(t.currentUser)),DA(t,a=>o(a))}}let i=rv("auth");return i?IA(t,`http://${i}`):Io("Auth",!1),t}function m$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}eB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Pn("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",m$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h$("Browser");var OA={apiKey:"AIzaSyACR8BkrxIIB0e0nvBRWugLotmcz1Nghj0",authDomain:"taskmanager-586c9.firebaseapp.com",projectId:"taskmanager-586c9",storageBucket:"taskmanager-586c9.firebasestorage.app",messagingSenderId:"1087148318455",appId:"1:1087148318455:web:26b5c8f735ea558143fdf2"};var fi=class n{app;auth;userSubject=new Ge(null);user$=this.userSubject.asObservable();router=P(lt);constructor(){this.app=wv(OA),this.auth=Zv(this.app),Gv(this.auth,e=>{this.userSubject.next(e)})}loginWithGoogle(){return I(this,null,function*(){try{let e=new qv;yield Yv(this.auth,e)}catch(e){throw console.error("Error logging in with Google:",e),e}})}logout(){return I(this,null,function*(){try{yield Wv(this.auth),this.router.navigate(["/"])}catch(e){throw console.error("Error signing out:",e),e}})}getCurrentUserId(){return this.auth.currentUser?.uid||null}isAuthenticated(){return!!this.auth.currentUser}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function y$(n,e){if(n&1){let t=Kn();ny(0),Oe(1,"hr",12),V(2,"p",13),H(3),F(),V(4,"button",14),be("click",function(){mt(t);let i=Ue();return yt(i.authService.logout())}),H(5," Logout "),F(),ry()}if(n&2){let t=e.ngIf;Y(3),Yn("Welcome, ",t.displayName,"")}}var Ih=class n{router=P(lt);authService=P(fi);ngOnInit(){this.authService.user$.subscribe(e=>{e&&this.router.navigate(["/tasks"])})}loginGoogle(){return I(this,null,function*(){yield this.authService.loginWithGoogle(),this.router.navigate(["/tasks"])})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dn({type:n,selectors:[["app-auth"]],decls:16,vars:3,consts:[[1,"vh-100"],[1,"container-fluidh-100"],[1,"row","d-flex","align-items-center","justify-content-center","h-100"],[1,"col-md-8","col-lg-7","col-xl-6"],["src","https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.svg","alt","Phone image",1,"img-fluid"],[1,"col-md-7","col-lg-5","col-xl-5","offset-xl-1"],[1,"auth-wrapper"],[1,"auth-card","shadow-lg"],[1,"app-title"],[1,"subtitle"],[1,"btn","btn-google","w-100",3,"click"],[4,"ngIf"],[1,"my-4"],[1,"mb-2","fw-semibold"],[1,"btn","btn-outline-dark","$blue-800","w-100",3,"click"]],template:function(t,r){t&1&&(V(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),Oe(4,"img",4),F(),V(5,"div",5)(6,"div",6)(7,"div",7)(8,"h1",8),H(9,"TodoApp"),F(),V(10,"p",9),H(11,"Sign in to manage your tasks"),F(),V(12,"button",10),be("click",function(){return r.authService.loginWithGoogle()}),H(13," Sign in with Google "),F(),Xe(14,y$,6,1,"ng-container",11),zC(15,"async"),F()()()()()()),t&2&&(Y(14),Re("ngIf",qC(15,1,r.authService.user$)))},dependencies:[fn,Qi,hy],styles:["[_ngcontent-%COMP%]:root{--primary-green: #0d5a2b;--primary-green-hover: #08743b;--black: #000;--white: #fff}.auth-wrapper[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,var(--primary-green) 0%,#021b0e 100%);padding:1rem;margin:auto}.auth-card[_ngcontent-%COMP%]{background:var(--white);padding:3rem 2rem;max-width:380px;width:100%;text-align:center;border-color:#0d5a2b;border:2px solid darkblue;border-radius:1rem}.app-title[_ngcontent-%COMP%]{color:#00008b;font-weight:700;margin-bottom:.5rem}.subtitle[_ngcontent-%COMP%]{color:var(--black);margin-bottom:2rem}.btn-google[_ngcontent-%COMP%]{background:#00008b;color:#fff;border:2px solid white;font-weight:600;padding:.75rem 1.25rem;border-radius:.5rem;display:flex;align-items:center;justify-content:center}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}}"]})};var bh=class n{router=P(lt);authService=P(fi);logout(){this.authService.logout(),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dn({type:n,selectors:[["app-tasks"]],decls:10,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-green"],[1,"container-fluid"],["href","#",1,"navbar-brand","fw-bold"],["type","button","data-bs-toggle","collapse","data-bs-target","#nav","aria-controls","nav","aria-expanded","false",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","nav",1,"collapse","navbar-collapse","justify-content-end"],[1,"btn","btn-outline-light",3,"click"]],template:function(t,r){t&1&&(V(0,"nav",0)(1,"div",1)(2,"a",2),H(3,"Todo-App"),F(),V(4,"button",3),Oe(5,"span",4),F(),V(6,"div",5)(7,"button",6),be("click",function(){return r.logout()}),H(8,"Logout"),F()()()(),Oe(9,"router-outlet"))},dependencies:[fn,Xy,ts],styles:[".bg-green[_ngcontent-%COMP%]{background-color:#00008b!important}[_nghost-%COMP%]{display:block;width:100%;margin:0;padding:0}nav.navbar[_ngcontent-%COMP%]{width:100%;height:70px;margin:0;padding:0}.main-content[_ngcontent-%COMP%]{width:100%;margin:0;padding:2rem;background-color:#fff;min-height:calc(100vh - 70px)}[_ngcontent-%COMP%]:root{--green: #0d5a2b}.card-title[_ngcontent-%COMP%]{font-size:1.1rem}.notes-box[_ngcontent-%COMP%]{background:#f8f9fa;padding:.5rem .75rem;border-left:3px solid var(--green);border-radius:.25rem;font-size:.9rem}.modal-header[_ngcontent-%COMP%]{background:var(--green)}.btn-success[_ngcontent-%COMP%]{background:var(--green);border-color:var(--green)}.btn-success[_ngcontent-%COMP%]:hover{background:#08803d;border-color:#08803d}"]})};var zA=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Ne(ao),Ne(Gi))};static \u0275dir=bt({type:n})}return n})(),qA=(()=>{class n extends zA{static \u0275fac=(()=>{let t;return function(i){return(t||(t=no(n)))(i||n)}})();static \u0275dir=bt({type:n,features:[Ir]})}return n})(),r_=new K(""),v$={provide:r_,useExisting:$i(()=>i_),multi:!0},i_=(()=>{class n extends qA{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=no(n)))(i||n)}})();static \u0275dir=bt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&be("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ya([v$]),Ir]})}return n})(),_$={provide:r_,useExisting:$i(()=>xh),multi:!0};function E$(){let n=hn()?hn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var w$=new K(""),xh=(()=>{class n extends zA{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!E$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Ne(ao),Ne(Gi),Ne(w$,8))};static \u0275dir=bt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&be("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[Ya([_$]),Ir]})}return n})();function s_(n){return n==null||o_(n)===0}function o_(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var GA=new K(""),WA=new K(""),I$=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Rr=class{static min(e){return T$(e)}static max(e){return b$(e)}static required(e){return D$(e)}static requiredTrue(e){return C$(e)}static email(e){return S$(e)}static minLength(e){return A$(e)}static maxLength(e){return R$(e)}static pattern(e){return M$(e)}static nullValidator(e){return KA()}static compose(e){return eR(e)}static composeAsync(e){return nR(e)}};function T$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function b$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function D$(n){return s_(n.value)?{required:!0}:null}function C$(n){return n.value===!0?null:{required:!0}}function S$(n){return s_(n.value)||I$.test(n.value)?null:{email:!0}}function A$(n){return e=>{let t=e.value?.length??o_(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function R$(n){return e=>{let t=e.value?.length??o_(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function M$(n){if(!n)return KA;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(s_(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function KA(n){return null}function QA(n){return n!=null}function YA(n){return ti(n)?Ae(n):n}function ZA(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function JA(n,e){return e.map(t=>t(n))}function N$(n){return!n.validate}function XA(n){return n.map(e=>N$(e)?e:t=>e.validate(t))}function eR(n){if(!n)return null;let e=n.filter(QA);return e.length==0?null:function(t){return ZA(JA(t,e))}}function tR(n){return n!=null?eR(XA(n)):null}function nR(n){if(!n)return null;let e=n.filter(QA);return e.length==0?null:function(t){let r=JA(t,e).map(YA);return cg(r).pipe(le(ZA))}}function rR(n){return n!=null?nR(XA(n)):null}function FA(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iR(n){return n._rawValidators}function sR(n){return n._rawAsyncValidators}function Jv(n){return n?Array.isArray(n)?n:[n]:[]}function Sh(n,e){return Array.isArray(n)?n.includes(e):n===e}function LA(n,e){let t=Jv(e);return Jv(n).forEach(i=>{Sh(t,i)||t.push(i)}),t}function VA(n,e){return Jv(e).filter(t=>!Sh(n,t))}var Ah=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ao=class extends Ah{name;get formDirective(){return null}get path(){return null}},Uc=class extends Ah{_parent=null;name=null;valueAccessor=null},Rh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},P$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},GZ=ae(O({},P$),{"[class.ng-submitted]":"isSubmitted"}),oR=(()=>{class n extends Rh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ne(Uc,2))};static \u0275dir=bt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ir]})}return n})(),aR=(()=>{class n extends Rh{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Ne(Ao,10))};static \u0275dir=bt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ir]})}return n})();var Fc="VALID",Dh="INVALID",Co="PENDING",Lc="DISABLED",pi=class{},Mh=class extends pi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Vc=class extends pi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},jc=class extends pi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},So=class extends pi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Xv=class extends pi{source;constructor(e){super(),this.source=e}},e_=class extends pi{source;constructor(e){super(),this.source=e}};function a_(n){return(Oh(n)?n.validators:n)||null}function k$(n){return Array.isArray(n)?tR(n):n||null}function c_(n,e){return(Oh(e)?e.asyncValidators:n)||null}function x$(n){return Array.isArray(n)?rR(n):n||null}function Oh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function cR(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new x(1e3,"");if(!r[t])throw new x(1001,"")}function lR(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new x(1002,"")})}var Ro=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Cn(this.statusReactive)}set status(e){Cn(()=>this.statusReactive.set(e))}_status=Za(()=>this.statusReactive());statusReactive=Ga(void 0);get valid(){return this.status===Fc}get invalid(){return this.status===Dh}get pending(){return this.status==Co}get disabled(){return this.status===Lc}get enabled(){return this.status!==Lc}errors;get pristine(){return Cn(this.pristineReactive)}set pristine(e){Cn(()=>this.pristineReactive.set(e))}_pristine=Za(()=>this.pristineReactive());pristineReactive=Ga(!0);get dirty(){return!this.pristine}get touched(){return Cn(this.touchedReactive)}set touched(e){Cn(()=>this.touchedReactive.set(e))}_touched=Za(()=>this.touchedReactive());touchedReactive=Ga(!1);get untouched(){return!this.touched}_events=new st;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VA(e,this._rawAsyncValidators))}hasValidator(e){return Sh(this._rawValidators,e)}hasAsyncValidator(e){return Sh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new jc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new jc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Vc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Vc(!0,r))}markAsPending(e={}){this.status=Co;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new So(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Lc,this.errors=null,this._forEachChild(i=>{i.disable(ae(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mh(this.value,r)),this._events.next(new So(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Fc,this._forEachChild(r=>{r.enable(ae(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fc||this.status===Co)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mh(this.value,t)),this._events.next(new So(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lc:Fc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Co,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=YA(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new So(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?Lc:this.errors?Dh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Co)?Co:this._anyControlsHaveStatus(Dh)?Dh:Fc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Vc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new jc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Oh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=k$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=x$(this._rawAsyncValidators)}},Nh=class extends Ro{constructor(e,t,r){super(a_(t),c_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lR(this,!0,e),Object.keys(e).forEach(r=>{cR(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var t_=class extends Nh{};var l_=new K("",{providedIn:"root",factory:()=>Fh}),Fh="always";function O$(n,e){return[...e.path,n]}function jA(n,e,t=Fh){u_(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),L$(n,e),j$(n,e),V$(n,e),F$(n,e)}function UA(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),kh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ph(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function F$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function u_(n,e){let t=iR(n);e.validator!==null?n.setValidators(FA(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=sR(n);e.asyncValidator!==null?n.setAsyncValidators(FA(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ph(e._rawValidators,i),Ph(e._rawAsyncValidators,i)}function kh(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=iR(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=sR(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Ph(e._rawValidators,r),Ph(e._rawAsyncValidators,r),t}function L$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&uR(n,e)})}function V$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&uR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function uR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function j$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function U$(n,e){n==null,u_(n,e)}function B$(n,e){return kh(n,e)}function $$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function H$(n){return Object.getPrototypeOf(n.constructor)===qA}function z$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function q$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===xh?t=s:H$(s)?r=s:i=s}),i||r||t||null}function G$(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function BA(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $A(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ch=class extends Ro{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(a_(t),c_(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Oh(t)&&(t.nonNullable||t.initialValueIsDefault)&&($A(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$A(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var W$=n=>n instanceof Ch;var dR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=bt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var hR=new K("");var K$={provide:Ao,useExisting:$i(()=>d_)},d_=(()=>{class n extends Ao{callSetDisabledState;get submitted(){return Cn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Za(()=>this._submittedReactive());_submittedReactive=Ga(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ot;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return jA(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){UA(t.control||null,t,!1),G$(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),z$(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Xv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new e_(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(UA(r||null,t),W$(i)&&(jA(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);U$(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&B$(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){u_(this.form,this),this._oldForm&&kh(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(Ne(GA,10),Ne(WA,10),Ne(l_,8))};static \u0275dir=bt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&be("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ya([K$]),Ir,Hi]})}return n})();var Q$={provide:Uc,useExisting:$i(()=>h_)},h_=(()=>{class n extends Uc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new ot;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=q$(this,s)}ngOnChanges(t){this._added||this._setUpControl(),$$(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return O$(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(Ne(Ao,13),Ne(GA,10),Ne(WA,10),Ne(r_,10),Ne(hR,8))};static \u0275dir=bt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ya([Q$]),Ir,Hi]})}return n})();var fR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dn({type:n});static \u0275inj=Tn({})}return n})(),n_=class extends Ro{constructor(e,t,r){super(a_(t),c_(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lR(this,!1,e),e.forEach((r,i)=>{cR(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function HA(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var pR=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return HA(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Nh(i,s)}record(t,r=null){let i=this._reduceControls(t);return new t_(i,r)}control(t,r,i){let s={};return this.useNonNullable?(HA(r)?s=r:(s.validators=r,s.asyncValidators=i),new Ch(t,ae(O({},s),{nonNullable:!0}))):new Ch(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new n_(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Ch)return t;if(t instanceof Ro)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Lh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:l_,useValue:t.callSetDisabledState??Fh}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dn({type:n});static \u0275inj=Tn({imports:[fR]})}return n})(),Vh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:l_,useValue:t.callSetDisabledState??Fh}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Dn({type:n});static \u0275inj=Tn({imports:[fR]})}return n})();var gR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mR={};var Mr,f_;(function(){var n;function e(T,v){function E(){}E.prototype=v.prototype,T.D=v.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(b,D,S){for(var w=Array(arguments.length-2),en=2;en<arguments.length;en++)w[en-2]=arguments[en];return v.prototype[D].apply(b,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,E){E||(E=0);var b=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)b[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)b[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=T.g[0],E=T.g[1],D=T.g[2];var S=T.g[3],w=v+(S^E&(D^S))+b[0]+3614090360&4294967295;v=E+(w<<7&4294967295|w>>>25),w=S+(D^v&(E^D))+b[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(E^S&(v^E))+b[2]+606105819&4294967295,D=S+(w<<17&4294967295|w>>>15),w=E+(v^D&(S^v))+b[3]+3250441966&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(S^E&(D^S))+b[4]+4118548399&4294967295,v=E+(w<<7&4294967295|w>>>25),w=S+(D^v&(E^D))+b[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(E^S&(v^E))+b[6]+2821735955&4294967295,D=S+(w<<17&4294967295|w>>>15),w=E+(v^D&(S^v))+b[7]+4249261313&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(S^E&(D^S))+b[8]+1770035416&4294967295,v=E+(w<<7&4294967295|w>>>25),w=S+(D^v&(E^D))+b[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(E^S&(v^E))+b[10]+4294925233&4294967295,D=S+(w<<17&4294967295|w>>>15),w=E+(v^D&(S^v))+b[11]+2304563134&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(S^E&(D^S))+b[12]+1804603682&4294967295,v=E+(w<<7&4294967295|w>>>25),w=S+(D^v&(E^D))+b[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=D+(E^S&(v^E))+b[14]+2792965006&4294967295,D=S+(w<<17&4294967295|w>>>15),w=E+(v^D&(S^v))+b[15]+1236535329&4294967295,E=D+(w<<22&4294967295|w>>>10),w=v+(D^S&(E^D))+b[1]+4129170786&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^D&(v^E))+b[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(S^v))+b[11]+643717713&4294967295,D=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(D^S))+b[0]+3921069994&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(D^S&(E^D))+b[5]+3593408605&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^D&(v^E))+b[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(S^v))+b[15]+3634488961&4294967295,D=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(D^S))+b[4]+3889429448&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(D^S&(E^D))+b[9]+568446438&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^D&(v^E))+b[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(S^v))+b[3]+4107603335&4294967295,D=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(D^S))+b[8]+1163531501&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(D^S&(E^D))+b[13]+2850285829&4294967295,v=E+(w<<5&4294967295|w>>>27),w=S+(E^D&(v^E))+b[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=D+(v^E&(S^v))+b[7]+1735328473&4294967295,D=S+(w<<14&4294967295|w>>>18),w=E+(S^v&(D^S))+b[12]+2368359562&4294967295,E=D+(w<<20&4294967295|w>>>12),w=v+(E^D^S)+b[5]+4294588738&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^D)+b[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^E)+b[11]+1839030562&4294967295,D=S+(w<<16&4294967295|w>>>16),w=E+(D^S^v)+b[14]+4259657740&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(E^D^S)+b[1]+2763975236&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^D)+b[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^E)+b[7]+4139469664&4294967295,D=S+(w<<16&4294967295|w>>>16),w=E+(D^S^v)+b[10]+3200236656&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(E^D^S)+b[13]+681279174&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^D)+b[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^E)+b[3]+3572445317&4294967295,D=S+(w<<16&4294967295|w>>>16),w=E+(D^S^v)+b[6]+76029189&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(E^D^S)+b[9]+3654602809&4294967295,v=E+(w<<4&4294967295|w>>>28),w=S+(v^E^D)+b[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=D+(S^v^E)+b[15]+530742520&4294967295,D=S+(w<<16&4294967295|w>>>16),w=E+(D^S^v)+b[2]+3299628645&4294967295,E=D+(w<<23&4294967295|w>>>9),w=v+(D^(E|~S))+b[0]+4096336452&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~D))+b[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~E))+b[14]+2878612391&4294967295,D=S+(w<<15&4294967295|w>>>17),w=E+(S^(D|~v))+b[5]+4237533241&4294967295,E=D+(w<<21&4294967295|w>>>11),w=v+(D^(E|~S))+b[12]+1700485571&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~D))+b[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~E))+b[10]+4293915773&4294967295,D=S+(w<<15&4294967295|w>>>17),w=E+(S^(D|~v))+b[1]+2240044497&4294967295,E=D+(w<<21&4294967295|w>>>11),w=v+(D^(E|~S))+b[8]+1873313359&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~D))+b[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~E))+b[6]+2734768916&4294967295,D=S+(w<<15&4294967295|w>>>17),w=E+(S^(D|~v))+b[13]+1309151649&4294967295,E=D+(w<<21&4294967295|w>>>11),w=v+(D^(E|~S))+b[4]+4149444226&4294967295,v=E+(w<<6&4294967295|w>>>26),w=S+(E^(v|~D))+b[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=D+(v^(S|~E))+b[2]+718787259&4294967295,D=S+(w<<15&4294967295|w>>>17),w=E+(S^(D|~v))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var E=v-this.blockSize,b=this.B,D=this.h,S=0;S<v;){if(D==0)for(;S<=E;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(b[D++]=T.charCodeAt(S++),D==this.blockSize){i(this,b),D=0;break}}else for(;S<v;)if(b[D++]=T[S++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var E=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.u(T),T=Array(16),v=E=0;4>v;++v)for(var b=0;32>b;b+=8)T[E++]=this.g[v]>>>b&255;return T};function s(T,v){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=v(T)}function o(T,v){this.h=v;for(var E=[],b=!0,D=T.length-1;0<=D;D--){var S=T[D]|0;b&&S==v||(E[D]=S,b=!1)}this.g=E}var a={};function l(T){return-128<=T&&128>T?s(T,function(v){return new o([v|0],0>v?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return M(u(-T));for(var v=[],E=1,b=0;T>=E;b++)v[b]=T/E|0,E*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return M(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(v,8)),b=p,D=0;D<T.length;D+=8){var S=Math.min(8,T.length-D),w=parseInt(T.substring(D,D+S),v);8>S?(S=u(Math.pow(v,S)),b=b.j(S).add(u(w))):(b=b.j(E),b=b.add(u(w)))}return b}var p=l(0),g=l(1),y=l(16777216);n=o.prototype,n.m=function(){if(A(this))return-M(this).m();for(var T=0,v=1,E=0;E<this.g.length;E++){var b=this.i(E);T+=(0<=b?b:4294967296+b)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(A(this))return"-"+M(this).toString(T);for(var v=u(Math.pow(T,6)),E=this,b="";;){var D=ne(E,v).g;E=L(E,D.j(v));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=D,_(E))return S+b;for(;6>S.length;)S="0"+S;b=S+b}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function A(T){return T.h==-1}n.l=function(T){return T=L(this,T),A(T)?-1:_(T)?0:1};function M(T){for(var v=T.g.length,E=[],b=0;b<v;b++)E[b]=~T.g[b];return new o(E,~T.h).add(g)}n.abs=function(){return A(this)?M(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],b=0,D=0;D<=v;D++){var S=b+(this.i(D)&65535)+(T.i(D)&65535),w=(S>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);b=w>>>16,S&=65535,w&=65535,E[D]=w<<16|S}return new o(E,E[E.length-1]&-2147483648?-1:0)};function L(T,v){return T.add(M(v))}n.j=function(T){if(_(this)||_(T))return p;if(A(this))return A(T)?M(this).j(M(T)):M(M(this).j(T));if(A(T))return M(this.j(M(T)));if(0>this.l(y)&&0>T.l(y))return u(this.m()*T.m());for(var v=this.g.length+T.g.length,E=[],b=0;b<2*v;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<T.g.length;D++){var S=this.i(b)>>>16,w=this.i(b)&65535,en=T.i(D)>>>16,Br=T.i(D)&65535;E[2*b+2*D]+=w*Br,$(E,2*b+2*D),E[2*b+2*D+1]+=S*Br,$(E,2*b+2*D+1),E[2*b+2*D+1]+=w*en,$(E,2*b+2*D+1),E[2*b+2*D+2]+=S*en,$(E,2*b+2*D+2)}for(b=0;b<v;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=v;b<2*v;b++)E[b]=0;return new o(E,0)};function $(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function G(T,v){this.g=T,this.h=v}function ne(T,v){if(_(v))throw Error("division by zero");if(_(T))return new G(p,p);if(A(T))return v=ne(M(T),v),new G(M(v.g),M(v.h));if(A(v))return v=ne(T,M(v)),new G(M(v.g),v.h);if(30<T.g.length){if(A(T)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,b=v;0>=b.l(T);)E=$e(E),b=$e(b);var D=de(E,1),S=de(b,1);for(b=de(b,2),E=de(E,2);!_(b);){var w=S.add(b);0>=w.l(T)&&(D=D.add(E),S=w),b=de(b,1),E=de(E,1)}return v=L(T,D.j(v)),new G(D,v)}for(D=p;0<=T.l(v);){for(E=Math.max(1,Math.floor(T.m()/v.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),S=u(E),w=S.j(v);A(w)||0<w.l(T);)E-=b,S=u(E),w=S.j(v);_(S)&&(S=g),D=D.add(S),T=L(T,w)}return new G(D,T)}n.A=function(T){return ne(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],b=0;b<v;b++)E[b]=this.i(b)&T.i(b);return new o(E,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],b=0;b<v;b++)E[b]=this.i(b)|T.i(b);return new o(E,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),E=[],b=0;b<v;b++)E[b]=this.i(b)^T.i(b);return new o(E,this.h^T.h)};function $e(T){for(var v=T.g.length+1,E=[],b=0;b<v;b++)E[b]=T.i(b)<<1|T.i(b-1)>>>31;return new o(E,T.h)}function de(T,v){var E=v>>5;v%=32;for(var b=T.g.length-E,D=[],S=0;S<b;S++)D[S]=0<v?T.i(S+E)>>>v|T.i(S+E+1)<<32-v:T.i(S+E);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f_=mR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Mr=mR.Integer=o}).apply(typeof gR<"u"?gR:typeof self<"u"?self:typeof window<"u"?window:{});var jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nr={};var p_,Z$,Mo,g_,Bc,Uh,m_,y_,v_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jh=="object"&&jh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function _(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,R){for(var j=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)j[Pe-2]=arguments[Pe];return d.prototype[C].apply(m,j)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(l(m)){let C=c.length||0,R=m.length||0;c.length=C+R;for(let j=0;j<R;j++)c[C+j]=m[j]}else c.push(m)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ne(c){return ne[" "](c),c}ne[" "]=function(){};var $e=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function de(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let R=0;R<E.length;R++)f=E[R],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=ge;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class en{constructor(){this.h=this.g=null}add(d,f){let m=Br.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Br=new L(()=>new z,c=>c.reset());class z{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let W,Q=!1,ge=new en,Qe=()=>{let c=a.Promise.resolve(void 0);W=()=>{c.then(tn)}};var tn=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=Br;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Q=!1};function He(){this.s=this.s,this.C=this.C}He.prototype.s=!1,He.prototype.ma=function(){this.s||(this.s=!0,this.N())},He.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function $r(c,d){if(Fe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if($e){e:{try{ne(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:lp[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&$r.aa.h.call(this)}}_($r,Fe);var lp={2:"touch",3:"pen",4:"mouse"};$r.prototype.h=function(){$r.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),dr=0;function kt(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++dr,this.da=this.fa=!1}function hr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hr(c){this.src=c,this.g={},this.h=0}Hr.prototype.add=function(c,d,f,m,C){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var j=dp(c,d,m,C);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new kt(d,this.src,R,!!m,C),d.fa=f,c.push(d)),d};function up(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=C)&&Array.prototype.splice.call(m,C,1),R&&(hr(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function dp(c,d,f,m){for(var C=0;C<c.length;++C){var R=c[C];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return C}return-1}var hp="closure_lm_"+(1e6*Math.random()|0),fp={};function fI(c,d,f,m,C){if(m&&m.once)return gI(c,d,f,m,C);if(Array.isArray(d)){for(var R=0;R<d.length;R++)fI(c,d[R],f,m,C);return null}return f=yp(f),c&&c[ze]?c.K(d,f,u(m)?!!m.capture:!!m,C):pI(c,d,f,!1,m,C)}function pI(c,d,f,m,C,R){if(!d)throw Error("Invalid event type");var j=u(C)?!!C.capture:!!C,Pe=gp(c);if(Pe||(c[hp]=Pe=new Hr(c)),f=Pe.add(d,f,m,j,R),f.proxy)return f;if(m=jP(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)Le||(C=j),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(yI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function jP(){function c(f){return d.call(c.src,c.listener,f)}let d=UP;return c}function gI(c,d,f,m,C){if(Array.isArray(d)){for(var R=0;R<d.length;R++)gI(c,d[R],f,m,C);return null}return f=yp(f),c&&c[ze]?c.L(d,f,u(m)?!!m.capture:!!m,C):pI(c,d,f,!0,m,C)}function mI(c,d,f,m,C){if(Array.isArray(d))for(var R=0;R<d.length;R++)mI(c,d[R],f,m,C);else m=u(m)?!!m.capture:!!m,f=yp(f),c&&c[ze]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=dp(R,f,m,C),-1<f&&(hr(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=gp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=dp(d,f,m,C)),(f=-1<c?d[c]:null)&&pp(f))}function pp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ze])up(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(yI(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=gp(d))?(up(f,c),f.h==0&&(f.src=null,d[hp]=null)):hr(c)}}}function yI(c){return c in fp?fp[c]:fp[c]="on"+c}function UP(c,d){if(c.da)c=!0;else{d=new $r(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&pp(c),c=f.call(m,d)}return c}function gp(c){return c=c[hp],c instanceof Hr?c:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function yp(c){return typeof c=="function"?c:(c[mp]||(c[mp]=function(d){return c.handleEvent(d)}),c[mp])}function wt(){He.call(this),this.i=new Hr(this),this.M=this,this.F=null}_(wt,He),wt.prototype[ze]=!0,wt.prototype.removeEventListener=function(c,d,f,m){mI(this,c,d,f,m)};function St(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Fe(d,c);else if(d instanceof Fe)d.target=d.target||c;else{var C=d;d=new Fe(m,c),b(d,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var j=d.g=f[R];C=_l(j,m,!0,d)&&C}if(j=d.g=c,C=_l(j,m,!0,d)&&C,C=_l(j,m,!1,d)&&C,f)for(R=0;R<f.length;R++)j=d.g=f[R],C=_l(j,m,!1,d)&&C}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)hr(f[m]);delete c.g[d],c.h--}}this.F=null},wt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},wt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function _l(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,R=0;R<d.length;++R){var j=d[R];if(j&&!j.da&&j.capture==f){var Pe=j.listener,pt=j.ha||j.src;j.fa&&up(c.i,j),C=Pe.call(pt,m)!==!1&&C}}return C&&!m.defaultPrevented}function vI(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function _I(c){c.g=vI(()=>{c.g=null,c.i&&(c.i=!1,_I(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class BP extends He{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_I(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(c){He.call(this),this.h=c,this.g={}}_(la,He);var EI=[];function wI(c){de(c.g,function(d,f){this.g.hasOwnProperty(f)&&pp(d)},c),c.g={}}la.prototype.N=function(){la.aa.N.call(this),wI(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vp=a.JSON.stringify,$P=a.JSON.parse,HP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function _p(){}_p.prototype.h=null;function II(c){return c.h||(c.h=c.i())}function TI(){}var ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ep(){Fe.call(this,"d")}_(Ep,Fe);function wp(){Fe.call(this,"c")}_(wp,Fe);var Ii={},bI=null;function El(){return bI=bI||new wt}Ii.La="serverreachability";function DI(c){Fe.call(this,Ii.La,c)}_(DI,Fe);function da(c){let d=El();St(d,new DI(d))}Ii.STAT_EVENT="statevent";function CI(c,d){Fe.call(this,Ii.STAT_EVENT,c),this.stat=d}_(CI,Fe);function At(c){let d=El();St(d,new CI(d,c))}Ii.Ma="timingevent";function SI(c,d){Fe.call(this,Ii.Ma,c),this.size=d}_(SI,Fe);function ha(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function fa(){this.g=!0}fa.prototype.xa=function(){this.g=!1};function zP(c,d,f,m,C,R){c.info(function(){if(c.g)if(R)for(var j="",Pe=R.split("&"),pt=0;pt<Pe.length;pt++){var Te=Pe[pt].split("=");if(1<Te.length){var It=Te[0];Te=Te[1];var Tt=It.split("_");j=2<=Tt.length&&Tt[1]=="type"?j+(It+"="+Te+"&"):j+(It+"=redacted&")}}else j=null;else j=R;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+j})}function qP(c,d,f,m,C,R,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+R+" "+j})}function bs(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+WP(c,f)+(m?" "+m:"")})}function GP(c,d){c.info(function(){return"TIMEOUT: "+d})}fa.prototype.info=function(){};function WP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var j=1;j<C.length;j++)C[j]=""}}}}return vp(f)}catch{return d}}var wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},AI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ip;function Il(){}_(Il,_p),Il.prototype.g=function(){return new XMLHttpRequest},Il.prototype.i=function(){return{}},Ip=new Il;function zr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new la(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new RI}function RI(){this.i=null,this.g="",this.h=!1}var MI={},Tp={};function bp(c,d,f){c.L=1,c.v=Cl(fr(d)),c.m=f,c.P=!0,NI(c,null)}function NI(c,d){c.F=Date.now(),Tl(c),c.A=fr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),qI(f.i,"t",m),c.C=0,f=c.j.J,c.h=new RI,c.g=lT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new BP(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(EI[0]=C.toString()),C=EI);for(var R=0;R<C.length;R++){var j=fI(f,C[R],m||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),da(),zP(c.i,c.u,c.A,c.l,c.R,c.m)}zr.prototype.ca=function(c){c=c.target;let d=this.M;d&&pr(c)==3?d.j():this.Y(c)},zr.prototype.Y=function(c){try{if(c==this.g)e:{let Tt=pr(this.g);var d=this.g.Ba();let Ss=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||JI(this.g)))){this.J||Tt!=4||d==7||(d==8||0>=Ss?da(3):da(2)),Dp(this);var f=this.g.Z();this.X=f;t:if(PI(this)){var m=JI(this.g);c="";var C=m.length,R=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),pa(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,qP(this.i,this.u,this.A,this.l,this.R,Tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,pt=this.g;if((Pe=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Pe)){var Te=Pe;break t}}Te=null}if(f=Te)bs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cp(this,f);else{this.o=!1,this.s=3,At(12),Ti(this),pa(this);break e}}if(this.P){f=!0;let vn;for(;!this.J&&this.C<j.length;)if(vn=KP(this,j),vn==Tp){Tt==4&&(this.s=4,At(14),f=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==MI){this.s=4,At(15),bs(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else bs(this.i,this.l,vn,null),Cp(this,vn);if(PI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||j.length!=0||this.h.h||(this.s=1,At(16),f=!1),this.o=this.o&&f,!f)bs(this.i,this.l,j,"[Invalid Chunked Response]"),Ti(this),pa(this);else if(0<j.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Pp(It),It.M=!0,At(11))}}else bs(this.i,this.l,j,null),Cp(this,j);Tt==4&&Ti(this),this.o&&!this.J&&(Tt==4?sT(this.j,this):(this.o=!1,Tl(this)))}else dk(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),Ti(this),pa(this)}}}catch{}finally{}};function PI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function KP(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Tp:(f=Number(d.substring(f,m)),isNaN(f)?MI:(m+=1,m+f>d.length?Tp:(d=d.slice(m,m+f),c.C=m+f,d)))}zr.prototype.cancel=function(){this.J=!0,Ti(this)};function Tl(c){c.S=Date.now()+c.I,kI(c,c.I)}function kI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ha(g(c.ba,c),d)}function Dp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}zr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(GP(this.i,this.A),this.L!=2&&(da(),At(17)),Ti(this),this.s=2,pa(this)):kI(this,this.S-c)};function pa(c){c.j.G==0||c.J||sT(c.j,c)}function Ti(c){Dp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,wI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Cp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Sp(f.h,c))){if(!c.K&&Sp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Nl(f),Rl(f);else break e;Np(f),At(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ha(g(f.Za,f),6e3));if(1>=FI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Di(f,11)}else if((c.K||f.g==c)&&Nl(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Te=C[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];let It=Te[3];It!=null&&(f.la=It,f.j.info("VER="+f.la));let Tt=Te[4];Tt!=null&&(f.Aa=Tt,f.j.info("SVER="+f.Aa));let Ss=Te[5];Ss!=null&&typeof Ss=="number"&&0<Ss&&(m=1.5*Ss,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let vn=c.g;if(vn){let kl=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var R=m.h;R.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Ap(R,R.h),R.h=null))}if(m.D){let kp=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;kp&&(m.ya=kp,Ve(m.I,m.D,kp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var j=c;if(m.qa=cT(m,m.J?m.ia:null,m.W),j.K){LI(m.h,j);var Pe=j,pt=m.L;pt&&(Pe.I=pt),Pe.B&&(Dp(Pe),Tl(Pe)),m.g=j}else rT(m);0<f.i.length&&Ml(f)}else Te[0]!="stop"&&Te[0]!="close"||Di(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Di(f,7):Mp(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}da(4)}catch{}}var QP=class{constructor(c,d){this.g=c,this.map=d}};function xI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function FI(c){return c.h?1:c.g?c.g.size:0}function Sp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ap(c,d){c.g?c.g.add(d):c.h=d}function LI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}xI.prototype.cancel=function(){if(this.i=VI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function VI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function YP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function ZP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function jI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=ZP(c),m=YP(c),C=m.length,R=0;R<C;R++)d.call(void 0,m[R],f&&f[R],c)}var UI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var R=c[f].substring(0,m);C=c[f].substring(m+1)}else R=c[f];d(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bi){this.h=c.h,bl(this,c.j),this.o=c.o,this.g=c.g,Dl(this,c.s),this.l=c.l;var d=c.i,f=new ya;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),BI(this,f),this.m=c.m}else c&&(d=String(c).match(UI))?(this.h=!1,bl(this,d[1]||"",!0),this.o=ga(d[2]||""),this.g=ga(d[3]||"",!0),Dl(this,d[4]),this.l=ga(d[5]||"",!0),BI(this,d[6]||"",!0),this.m=ga(d[7]||"")):(this.h=!1,this.i=new ya(null,this.h))}bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ma(d,$I,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ma(d,$I,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ma(f,f.charAt(0)=="/"?tk:ek,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ma(f,rk)),c.join("")};function fr(c){return new bi(c)}function bl(c,d,f){c.j=f?ga(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Dl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function BI(c,d,f){d instanceof ya?(c.i=d,ik(c.i,c.h)):(f||(d=ma(d,nk)),c.i=new ya(d,c.h))}function Ve(c,d,f){c.i.set(d,f)}function Cl(c){return Ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ga(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ma(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,XP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function XP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var $I=/[#\/\?@]/g,ek=/[#\?:]/g,tk=/[#\?]/g,nk=/[#\?@]/g,rk=/#/g;function ya(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function qr(c){c.g||(c.g=new Map,c.h=0,c.i&&JP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ya.prototype,n.add=function(c,d){qr(this),this.i=null,c=Ds(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function HI(c,d){qr(c),d=Ds(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function zI(c,d){return qr(c),d=Ds(c,d),c.g.has(d)}n.forEach=function(c,d){qr(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},n.na=function(){qr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let R=0;R<C.length;R++)f.push(d[m])}return f},n.V=function(c){qr(this);let d=[];if(typeof c=="string")zI(this,c)&&(d=d.concat(this.g.get(Ds(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return qr(this),this.i=null,c=Ds(this,c),zI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function qI(c,d,f){HI(c,d),0<f.length&&(c.i=null,c.g.set(Ds(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var C=R;j[m]!==""&&(C+="="+encodeURIComponent(String(j[m]))),c.push(C)}}return this.i=c.join("&")};function Ds(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function ik(c,d){d&&!c.j&&(qr(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(HI(this,m),qI(this,C,f))},c)),c.j=d}function sk(c,d){let f=new fa;if(a.Image){let m=new Image;m.onload=y(Gr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Gr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Gr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Gr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function ok(c,d){let f=new fa,m=new AbortController,C=setTimeout(()=>{m.abort(),Gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(C),R.ok?Gr(f,"TestPingServer: ok",!0,d):Gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Gr(f,"TestPingServer: error",!1,d)})}function Gr(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function ak(){this.g=new HP}function ck(c,d,f){let m=f||"";try{jI(c,function(C,R){let j=C;u(C)&&(j=vp(C)),d.push(m+R+"="+encodeURIComponent(j))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function va(c){this.l=c.Ub||null,this.j=c.eb||!1}_(va,_p),va.prototype.g=function(){return new Sl(this.l,this.j)},va.prototype.i=function(c){return function(){return c}}({});function Sl(c,d){wt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Sl,wt),n=Sl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ea(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;GI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function GI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?_a(this):Ea(this),this.readyState==3&&GI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,_a(this))},n.Qa=function(c){this.g&&(this.response=c,_a(this))},n.ga=function(){this.g&&_a(this)};function _a(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ea(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ea(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function WI(c){let d="";return de(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Rp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=WI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ve(c,d,f))}function qe(c){wt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(qe,wt);var lk=/^https?$/i,uk=["POST","PUT"];n=qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ip.g(),this.v=this.o?II(this.o):II(Ip),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){KI(this,R);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uk,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,j]of f)this.g.setRequestHeader(R,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ZI(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){KI(this,R)}};function KI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,QI(c),Al(c)}function QI(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),Al(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Al(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?YI(this):this.bb())},n.bb=function(){YI(this)};function YI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||pr(c)!=4||c.Z()!=2)){if(c.u&&pr(c)==4)vI(c.Ea,0,c);else if(St(c,"readystatechange"),pr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=j===0){var C=String(c.D).match(UI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!lk.test(C?C.toLowerCase():"")}f=m}if(f)St(c,"complete"),St(c,"success");else{c.m=6;try{var R=2<pr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",QI(c)}}finally{Al(c)}}}}function Al(c,d){if(c.g){ZI(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||St(c,"ready");try{f.onreadystatechange=m}catch{}}}function ZI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function pr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),$P(d)}};function JI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function dk(c){let d={};c=(c.g&&2<=pr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if($(c[m]))continue;var f=D(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[C]||[];d[C]=R,R.push(f)}T(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function XI(c){this.Aa=0,this.i=[],this.j=new fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,c),this.cb=wa("retryDelaySeedMs",1e4,c),this.Wa=wa("forwardChannelMaxRetries",2,c),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xI(c&&c.concurrentRequestLimit),this.Da=new ak,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=XI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){At(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=cT(this,null,this.W),Ml(this)};function Mp(c){if(eT(c),c.G==3){var d=c.U++,f=fr(c.I);if(Ve(f,"SID",c.K),Ve(f,"RID",d),Ve(f,"TYPE","terminate"),Ia(c,f),d=new zr(c,c.j,d),d.L=2,d.v=Cl(fr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=lT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Tl(d)}aT(c)}function Rl(c){c.g&&(Pp(c),c.g.cancel(),c.g=null)}function eT(c){Rl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Nl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ml(c){if(!OI(c.h)&&!c.s){c.s=!0;var d=c.Ga;W||Qe(),Q||(W(),Q=!0),ge.add(d,c),c.B=0}}function hk(c,d){return FI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ha(g(c.Ga,c,d),oT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new zr(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),b(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=nT(this,C,d),f=fr(this.I),Ve(f,"RID",c),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),Ia(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(WI(R)))+"&"+d:this.m&&Rp(f,this.m,R)),Ap(this.h,C),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",d),Ve(f,"SID","null"),C.T=!0,bp(C,f,null)):bp(C,f,d),this.G=2}}else this.G==3&&(c?tT(this,c):this.i.length==0||OI(this.h)||tT(this))};function tT(c,d){var f;d?f=d.l:f=c.U++;let m=fr(c.I);Ve(m,"SID",c.K),Ve(m,"RID",f),Ve(m,"AID",c.T),Ia(c,m),c.m&&c.o&&Rp(m,c.m,c.o),f=new zr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=nT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ap(c.h,f),bp(f,m,d)}function Ia(c,d){c.H&&de(c.H,function(f,m){Ve(d,m,f)}),c.l&&jI({},function(f,m){Ve(d,m,f)})}function nT(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let R=-1;for(;;){let j=["count="+f];R==-1?0<f?(R=C[0].g,j.push("ofs="+R)):R=0:j.push("ofs="+R);let Pe=!0;for(let pt=0;pt<f;pt++){let Te=C[pt].g,It=C[pt].map;if(Te-=R,0>Te)R=Math.max(0,C[pt].g-100),Pe=!1;else try{ck(It,j,"req"+Te+"_")}catch{m&&m(It)}}if(Pe){m=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function rT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;W||Qe(),Q||(W(),Q=!0),ge.add(d,c),c.v=0}}function Np(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ha(g(c.Fa,c),oT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,iT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ha(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),Rl(this),iT(this))};function Pp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function iT(c){c.g=new zr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=fr(c.qa);Ve(d,"RID","rpc"),Ve(d,"SID",c.K),Ve(d,"AID",c.T),Ve(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ve(d,"TO",c.ja),Ve(d,"TYPE","xmlhttp"),Ia(c,d),c.m&&c.o&&Rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Cl(fr(d)),f.m=null,f.P=!0,NI(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Rl(this),Np(this),At(19))};function Nl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function sT(c,d){var f=null;if(c.g==d){Nl(c),Pp(c),c.g=null;var m=2}else if(Sp(c.h,d))f=d.D,LI(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=El(),St(m,new SI(m,f)),Ml(c)}else rT(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&hk(c,d)||m==2&&Np(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Di(c,5);break;case 4:Di(c,10);break;case 3:Di(c,6);break;default:Di(c,2)}}}function oT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Di(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new bi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bl(m,"https"),Cl(m),C?sk(m.toString(),f):ok(m.toString(),f)}else At(2);c.G=0,c.l&&c.l.sa(d),aT(c),eT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function aT(c){if(c.G=0,c.ka=[],c.l){let d=VI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function cT(c,d,f){var m=f instanceof bi?fr(f):new bi(f);if(m.g!="")d&&(m.g=d+"."+m.g),Dl(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var R=new bi(null);m&&bl(R,m),d&&(R.g=d),C&&Dl(R,C),f&&(R.l=f),m=R}return f=c.D,d=c.ya,f&&d&&Ve(m,f,d),Ve(m,"VER",c.la),Ia(c,m),m}function lT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new qe(new va({eb:f})):new qe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uT(){}n=uT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Pl(){}Pl.prototype.g=function(c,d){return new zt(c,d)};function zt(c,d){wt.call(this),this.g=new XI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Cs(this)}_(zt,wt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){Mp(this.g)},zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=vp(c),c=f);d.i.push(new QP(d.Ya++,c)),d.G==3&&Ml(d)},zt.prototype.N=function(){this.g.l=null,delete this.j,Mp(this.g),delete this.g,zt.aa.N.call(this)};function dT(c){Ep.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}_(dT,Ep);function hT(){wp.call(this),this.status=1}_(hT,wp);function Cs(c){this.g=c}_(Cs,uT),Cs.prototype.ua=function(){St(this.g,"a")},Cs.prototype.ta=function(c){St(this.g,new dT(c))},Cs.prototype.sa=function(c){St(this.g,new hT)},Cs.prototype.ra=function(){St(this.g,"b")},Pl.prototype.createWebChannel=Pl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,v_=Nr.createWebChannelTransport=function(){return new Pl},y_=Nr.getStatEventTarget=function(){return El()},m_=Nr.Event=Ii,Uh=Nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wl.NO_ERROR=0,wl.TIMEOUT=8,wl.HTTP_ERROR=6,Bc=Nr.ErrorCode=wl,AI.COMPLETE="complete",g_=Nr.EventType=AI,TI.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Mo=Nr.WebChannel=TI,Z$=Nr.FetchXmlHttpFactory=va,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,p_=Nr.XhrIo=qe}).apply(typeof jh<"u"?jh:typeof self<"u"?self:typeof window<"u"?window:{});var yR="@firebase/firestore",vR="4.7.14";var ht=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");var Xo="11.7.3";var hs=new ai("@firebase/firestore");function No(){return hs.logLevel}function U(n,...e){if(hs.logLevel<=me.DEBUG){let t=e.map(aw);hs.debug(`Firestore (${Xo}): ${n}`,...t)}}function kr(n,...e){if(hs.logLevel<=me.ERROR){let t=e.map(aw);hs.error(`Firestore (${Xo}): ${n}`,...t)}}function Vo(n,...e){if(hs.logLevel<=me.WARN){let t=e.map(aw);hs.warn(`Firestore (${Xo}): ${n}`,...t)}}function aw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,lM(n,r,t)}function lM(n,e,t){let r=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw kr(r),new Error(r)}function Se(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||lM(e,i,r)}function re(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends Yt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Wh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},T_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ht.UNAUTHENTICATED))}shutdown(){}},b_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},D_=class{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>I(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new Wh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new ht(e)}},C_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},S_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new C_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Kh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},A_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Se(this.o===void 0,3512);let r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Se(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Kh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function J$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function uM(){return new TextEncoder}var Qh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=J$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function he(n,e){return n<e?-1:n>e?1:0}function R_(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return he(r,i);{let s=uM(),o=X$(s.encode(_R(n,t)),s.encode(_R(e,t)));return o!==0?o:he(r,i)}}t+=r>65535?2:1}return he(n.length,e.length)}function _R(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function X$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return he(n[t],e[t]);return he(n.length,e.length)}function jo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ER=-62135596800,wR=1e6,Et=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*wR);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ER)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wR}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-ER;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var oe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Et(0,0))}static max(){return new n(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var IR="__name__",Yh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&X(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return he(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):R_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}},Be=class n extends Yh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},eH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Xt=class n extends Yh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return eH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IR}static keyField(){return new n([IR])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Be.fromString(e))}static fromName(e){return new n(Be.fromString(e).popFirst(5))}static empty(){return new n(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Be(e.slice()))}};var Wc=-1,M_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};M_.UNKNOWN_ID=-1;function tH(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new Et(t+1,0):new Et(t,r));return new fs(i,Z.empty(),e)}function nH(n){return new fs(n.readTime,n.key,Wc)}var fs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(oe.min(),Z.empty(),Wc)}static max(){return new n(oe.max(),Z.empty(),Wc)}};function rH(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}var iH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",N_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ea(n){return I(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==iH)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let u=l;t(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function sH(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ta(n){return n.name==="IndexedDbTransactionError"}var cw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),lw=-1;function Nf(n){return n==null}function Kc(n){return n===0&&1/n==-1/0}function oH(n){return typeof n=="number"&&Number.isInteger(n)&&!Kc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var dM="";function aH(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TR(e)),e=cH(n.get(t),e);return TR(e)}function cH(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case dM:t+="";break;default:t+=s}}return t}function TR(n){return n+dM+""}var lH="remoteDocuments",hM="owner";var fM="mutationQueues";var pM="mutations";var gM="documentMutations",uH="remoteDocumentsV14";var mM="remoteDocumentGlobal";var yM="targets";var vM="targetDocuments";var _M="targetGlobal",EM="collectionParents";var wM="clientMetadata";var IM="bundles";var TM="namedQueries";var dH="indexConfiguration";var hH="indexState";var fH="indexEntries";var bM="documentOverlays";var pH="globals";var gH=[fM,pM,gM,lH,yM,hM,_M,vM,wM,mM,EM,IM,TM],oJ=[...gH,bM],mH=[fM,pM,gM,uH,yM,hM,_M,vM,wM,mM,EM,IM,TM,bM],yH=mH,vH=[...yH,dH,hH,fH];var aJ=[...vH,pH];function bR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ei(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ke=class n{constructor(e,t){this.comparator=e,this.root=t||sr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oo(this.root,e,this.comparator,!0)}},Oo=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw X(43730,{key:this.key,value:this.value});if(this.right.isRed())throw X(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw X(27949);return e+(this.isRed()?0:1)}};sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw X(57766)}get value(){throw X(16141)}get color(){throw X(16727)}get left(){throw X(29726)}get right(){throw X(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new sr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ft=class n{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zh(this.data.getIterator())}getIteratorFrom(e){return new Zh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Zh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mn=class n{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ft(Xt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Jh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ct=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jh("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ct.EMPTY_BYTE_STRING=new Ct("");var _H=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(n){if(Se(!!n,39018),typeof n=="string"){let e=0,t=_H.exec(n);if(Se(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(n.seconds),nanos:je(n.nanos)}}function je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Or(n){return typeof n=="string"?Ct.fromBase64String(n):Ct.fromUint8Array(n)}var CM="server_timestamp",SM="__type__",AM="__previous_value__",RM="__local_write_time__";function uw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[SM])===null||t===void 0?void 0:t.stringValue)===CM}function Pf(n){let e=n.mapValue.fields[AM];return uw(e)?Pf(e):e}function Qc(n){let e=xr(n.mapValue.fields[RM].timestampValue);return new Et(e.seconds,e.nanos)}var P_=class{constructor(e,t,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}},Xh="(default)",ef=class n{constructor(e,t){this.projectId=e,this.database=t||Xh}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var dw="__type__",MM="__max__",Bh={mapValue:{fields:{__type__:{stringValue:MM}}}},hw="__vector__",Uo="value";function mi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uw(n)?4:PM(n)?9007199254740991:NM(n)?10:11:X(28295,{value:n})}function cr(n,e){if(n===e)return!0;let t=mi(n);if(t!==mi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qc(n).isEqual(Qc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=xr(i.timestampValue),a=xr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Or(i.bytesValue).isEqual(Or(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return je(i.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return je(i.integerValue)===je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=je(i.doubleValue),a=je(s.doubleValue);return o===a?Kc(o)===Kc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return jo(n.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bR(o)!==bR(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!cr(o[l],a[l])))return!1;return!0}(n,e);default:return X(52216,{left:n})}}function Yc(n,e){return(n.values||[]).find(t=>cr(t,e))!==void 0}function Bo(n,e){if(n===e)return 0;let t=mi(n),r=mi(e);if(t!==r)return he(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=je(s.integerValue||s.doubleValue),l=je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return DR(n.timestampValue,e.timestampValue);case 4:return DR(Qc(n),Qc(e));case 5:return R_(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Or(s),l=Or(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){let h=he(a[u],l[u]);if(h!==0)return h}return he(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=he(je(s.latitude),je(o.latitude));return a!==0?a:he(je(s.longitude),je(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return CR(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;let p=s.fields||{},g=o.fields||{},y=(a=p[Uo])===null||a===void 0?void 0:a.arrayValue,_=(l=g[Uo])===null||l===void 0?void 0:l.arrayValue,A=he(((u=y?.values)===null||u===void 0?void 0:u.length)||0,((h=_?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:CR(y,_)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Bh.mapValue&&o===Bh.mapValue)return 0;if(s===Bh.mapValue)return 1;if(o===Bh.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let g=R_(l[p],h[p]);if(g!==0)return g;let y=Bo(a[l[p]],u[h[p]]);if(y!==0)return y}return he(l.length,h.length)}(n.mapValue,e.mapValue);default:throw X(23264,{Pe:t})}}function DR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);let t=xr(n),r=xr(e),i=he(t.seconds,r.seconds);return i!==0?i:he(t.nanos,r.nanos)}function CR(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Bo(t[i],r[i]);if(s)return s}return he(t.length,r.length)}function $o(n){return k_(n)}function k_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Or(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=k_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${k_(t.fields[o])}`;return i+"}"}(n.mapValue):X(61005,{value:n})}function zh(n){switch(mi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Pf(n);return e?16+zh(e):16;case 5:return 2*n.stringValue.length;case 6:return Or(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+zh(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ei(r.fields,(s,o)=>{i+=s.length+zh(o)}),i}(n.mapValue);default:throw X(13486,{value:n})}}function SR(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function x_(n){return!!n&&"integerValue"in n}function fw(n){return!!n&&"arrayValue"in n}function AR(n){return!!n&&"nullValue"in n}function RR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qh(n){return!!n&&"mapValue"in n}function NM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[dw])===null||t===void 0?void 0:t.stringValue)===hw}function Hc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ei(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===MM}var lJ={mapValue:{fields:{[dw]:{stringValue:hw},[Uo]:{arrayValue:{}}}}};var Jt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Hc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ei(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Hc(this.value))}};function kM(n){let e=[];return Ei(n.fields,(t,r)=>{let i=new Xt([t]);if(qh(r)){let s=kM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}var xn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,oe.min(),oe.min(),oe.min(),Jt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,oe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,oe.min(),oe.min(),Jt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,oe.min(),oe.min(),Jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ho=class{constructor(e,t){this.position=e,this.inclusive=t}};function MR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),t.key):r=Bo(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cr(n.position[t],e.position[t]))return!1;return!0}var zo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function EH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var tf=class{},rt=class n extends tf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new F_(e,t,r):t==="array-contains"?new j_(e,r):t==="in"?new U_(e,r):t==="not-in"?new B_(e,r):t==="array-contains-any"?new $_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new L_(e,r):new V_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&mi(this.value)===mi(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},On=class n extends tf{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return xM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function xM(n){return n.op==="and"}function OM(n){return wH(n)&&xM(n)}function wH(n){for(let e of n.filters)if(e instanceof On)return!1;return!0}function O_(n){if(n instanceof rt)return n.field.canonicalString()+n.op.toString()+$o(n.value);if(OM(n))return n.filters.map(e=>O_(e)).join(",");{let e=n.filters.map(t=>O_(t)).join(",");return`${n.op}(${e})`}}function FM(n,e){return n instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&cr(r.value,i.value)}(n,e):n instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&FM(o,i.filters[a]),!0):!1}(n,e):void X(19439)}function LM(n){return n instanceof rt?function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`}(n):n instanceof On?function(t){return t.op.toString()+" {"+t.getFilters().map(LM).join(" ,")+"}"}(n):"Filter"}var F_=class extends rt{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},L_=class extends rt{constructor(e,t){super(e,"in",t),this.keys=VM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},V_=class extends rt{constructor(e,t){super(e,"not-in",t),this.keys=VM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function VM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Z.fromName(r.referenceValue))}var j_=class extends rt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return fw(t)&&Yc(t.arrayValue,this.value)}},U_=class extends rt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Yc(this.value.arrayValue,t)}},B_=class extends rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yc(this.value.arrayValue,t)}},$_=class extends rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!fw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}};var H_=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}};function PR(n,e=null,t=[],r=[],i=null,s=null,o=null){return new H_(n,e,t,r,i,s,o)}function pw(n){let e=re(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>O_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$o(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$o(r)).join(",")),e.Ie=t}return e.Ie}function gw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NR(n.startAt,e.startAt)&&NR(n.endAt,e.endAt)}function z_(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ps=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function IH(n,e,t,r,i,s,o,a){return new ps(n,e,t,r,i,s,o,a)}function mw(n){return new ps(n)}function kR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jM(n){return n.collectionGroup!==null}function zc(n){let e=re(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ee.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(Xt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new zo(s,r))}),t.has(Xt.keyField().canonicalString())||e.Ee.push(new zo(Xt.keyField(),r))}return e.Ee}function or(n){let e=re(n);return e.de||(e.de=TH(e,zc(n))),e.de}function TH(n,e){if(n.limitType==="F")return PR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new zo(i.field,s)});let t=n.endAt?new Ho(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ho(n.startAt.position,n.startAt.inclusive):null;return PR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function q_(n,e){let t=n.filters.concat([e]);return new ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function G_(n,e,t){return new ps(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return gw(or(n),or(e))&&n.limitType===e.limitType}function UM(n){return`${pw(or(n))}|lt:${n.limitType}`}function Po(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>LM(i)).join(", ")}]`),Nf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$o(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$o(i)).join(",")),`Target(${r})`}(or(n))}; limitType=${n.limitType})`}function xf(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of zc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){let u=MR(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,zc(r),i)||r.endAt&&!function(o,a,l){let u=MR(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,zc(r),i))}(n,e)}function bH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BM(n){return(e,t)=>{let r=!1;for(let i of zc(n)){let s=DH(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DH(n,e,t){let r=n.field.isKeyField()?Z.comparator(e.key,t.key):function(s,o,a){let l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Bo(l,u):X(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X(19790,{direction:n.dir})}}var Fr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return DM(this.inner)}size(){return this.innerSize}};var CH=new Ke(Z.comparator);function Lr(){return CH}var $M=new Ke(Z.comparator);function $c(...n){let e=$M;for(let t of n)e=e.insert(t.key,t);return e}function HM(n){let e=$M;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ls(){return qc()}function zM(){return qc()}function qc(){return new Fr(n=>n.toString(),(n,e)=>n.isEqual(e))}var SH=new Ke(Z.comparator),AH=new ft(Z.comparator);function _e(...n){let e=AH;for(let t of n)e=e.add(t);return e}var RH=new ft(he);function MH(){return RH}function yw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function qM(n){return{integerValue:""+n}}function NH(n,e){return oH(e)?qM(e):yw(n,e)}var qo=class{constructor(){this._=void 0}};function PH(n,e,t){return n instanceof Go?function(i,s){let o={fields:{[SM]:{stringValue:CM},[RM]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&uw(s)&&(s=Pf(s)),s&&(o.fields[AM]=s),{mapValue:o}}(t,e):n instanceof gs?WM(n,e):n instanceof ms?KM(n,e):function(i,s){let o=GM(i,s),a=xR(o)+xR(i.Re);return x_(o)&&x_(i.Re)?qM(a):yw(i.serializer,a)}(n,e)}function kH(n,e,t){return n instanceof gs?WM(n,e):n instanceof ms?KM(n,e):t}function GM(n,e){return n instanceof Wo?function(r){return x_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Go=class extends qo{},gs=class extends qo{constructor(e){super(),this.elements=e}};function WM(n,e){let t=QM(e);for(let r of n.elements)t.some(i=>cr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ms=class extends qo{constructor(e){super(),this.elements=e}};function KM(n,e){let t=QM(e);for(let r of n.elements)t=t.filter(i=>!cr(i,r));return{arrayValue:{values:t}}}var Wo=class extends qo{constructor(e,t){super(),this.serializer=e,this.Re=t}};function xR(n){return je(n.integerValue||n.doubleValue)}function QM(n){return fw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function xH(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof gs&&i instanceof gs||r instanceof ms&&i instanceof ms?jo(r.elements,i.elements,cr):r instanceof Wo&&i instanceof Wo?cr(r.Re,i.Re):r instanceof Go&&i instanceof Go}(n.transform,e.transform)}var W_=class{constructor(e,t){this.version=e,this.transformResults=t}},Pr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ko=class{};function YM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zc(n.key,Pr.none()):new ys(n.key,n.data,Pr.none());{let t=n.data,r=Jt.empty(),i=new ft(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new lr(n.key,r,new mn(i.toArray()),Pr.none())}}function OH(n,e,t){n instanceof ys?function(i,s,o){let a=i.value.clone(),l=FR(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof lr?function(i,s,o){if(!Gh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=FR(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ZM(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Gc(n,e,t,r){return n instanceof ys?function(s,o,a,l){if(!Gh(s.precondition,o))return a;let u=s.value.clone(),h=LR(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof lr?function(s,o,a,l){if(!Gh(s.precondition,o))return a;let u=LR(s.fieldTransforms,l,o),h=o.data;return h.setAll(ZM(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Gh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function FH(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=GM(r.transform,i||null);s!=null&&(t===null&&(t=Jt.empty()),t.set(r.field,s))}return t||null}function OR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jo(r,i,(s,o)=>xH(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ys=class extends Ko{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},lr=class extends Ko{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function ZM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function FR(n,e,t){let r=new Map;Se(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,kH(o,a,t[i]))}return r}function LR(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,PH(s,o,e))}return r}var Zc=class extends Ko{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},K_=class extends Ko{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Q_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&OH(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Gc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=zM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let l=YM(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,r)=>OR(t,r))&&jo(this.baseMutations,e.baseMutations,(t,r)=>OR(t,r))}},Y_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Se(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return SH}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Z_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var J_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var tt,Ie;function LH(n){switch(n){case N.OK:return X(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return X(15467,{code:n})}}function JM(n){if(n===void 0)return kr("GRPC error has no .code"),N.UNKNOWN;switch(n){case tt.OK:return N.OK;case tt.CANCELLED:return N.CANCELLED;case tt.UNKNOWN:return N.UNKNOWN;case tt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case tt.INTERNAL:return N.INTERNAL;case tt.UNAVAILABLE:return N.UNAVAILABLE;case tt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case tt.NOT_FOUND:return N.NOT_FOUND;case tt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case tt.ABORTED:return N.ABORTED;case tt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case tt.DATA_LOSS:return N.DATA_LOSS;default:return X(39323,{code:n})}}(Ie=tt||(tt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var VR=null;var VH=new Mr([4294967295,4294967295],0);function jR(n){let e=uM().encode(n),t=new f_;return t.update(e),new Uint8Array(t.digest())}function UR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mr([t,r],0),new Mr([i,s],0)]}var X_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new us(`Invalid padding: ${t}`);if(r<0)throw new us(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new us(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new us(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Mr.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Mr.fromNumber(r)));return i.compare(VH)===1&&(i=new Mr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=jR(e),[r,i]=UR(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);if(!this.be(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;let t=jR(e),[r,i]=UR(t);for(let s=0;s<this.hashCount;s++){let o=this.we(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},us=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nf=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(oe.min(),i,new Ke(he),Lr(),_e())}},Jc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var Fo=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},rf=class{constructor(e,t){this.targetId=e,this.Ce=t}},sf=class{constructor(e,t,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},of=class{constructor(){this.Fe=0,this.Me=BR(),this.xe=Ct.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=_e(),t=_e(),r=_e();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X(38017,{changeType:s})}}),new Jc(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=BR()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Se(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},eE=class{constructor(e){this.ze=e,this.je=new Map,this.He=Lr(),this.Je=$h(),this.Ye=$h(),this.Ze=new Ke(he)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:X(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let s=i.target;if(z_(s))if(r===0){let o=new Z(s.path);this.tt(t,o,xn.newNoDocument(o,oe.min()))}else Se(r===1,20013,{expectedCount:r});else{let o=this.ut(t);if(o!==r){let a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}VR?.ht(function(h,p,g,y,_){var A,M,L,$,G,ne;let $e={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},de=p.unchangedNames;return de&&($e.bloomFilter={applied:_===0,hashCount:(A=de?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:($=(L=(M=de?.bits)===null||M===void 0?void 0:M.bitmap)===null||L===void 0?void 0:L.length)!==null&&$!==void 0?$:0,padding:(ne=(G=de?.bits)===null||G===void 0?void 0:G.padding)!==null&&ne!==void 0?ne:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),$e}(o,e.Ce,this.ze.Pt(),a,l))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Or(r).toUint8Array()}catch(l){if(l instanceof Jh)return Vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new X_(o,i,s)}catch(l){return Vo(l instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,s,null),i++)}),i}It(e){let t=new Map;this.je.forEach((s,o)=>{let a=this._t(o);if(a){if(s.current&&z_(a.target)){let l=new Z(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,xn.newNoDocument(l,e))}s.Le&&(t.set(o,s.qe()),s.Qe())}});let r=_e();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));let i=new nf(e,t,this.Ze,this.He,r);return this.He=Lr(),this.Je=$h(),this.Ye=$h(),this.Ze=new Ke(he),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new of,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ft(he),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ft(he),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new of),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function $h(){return new Ke(Z.comparator)}function BR(){return new Ke(Z.comparator)}var jH={asc:"ASCENDING",desc:"DESCENDING"},UH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BH={and:"AND",or:"OR"},tE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nE(n,e){return n.useProto3Json||Nf(e)?e:{value:e}}function af(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $H(n,e){return af(n,e.toTimestamp())}function ar(n){return Se(!!n,49232),oe.fromTimestamp(function(t){let r=xr(t);return new Et(r.seconds,r.nanos)}(n))}function vw(n,e){return rE(n,e).canonicalString()}function rE(n,e){let t=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function eN(n){let e=Be.fromString(n);return Se(sN(e),10190,{key:e.toString()}),e}function iE(n,e){return vw(n.databaseId,e.path)}function __(n,e){let t=eN(e);if(t.get(1)!==n.databaseId.projectId)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new B(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(nN(t))}function tN(n,e){return vw(n.databaseId,e)}function HH(n){let e=eN(n);return e.length===4?Be.emptyPath():nN(e)}function sE(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nN(n){return Se(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function $R(n,e,t){return{name:iE(n,e),fields:t.value.mapValue.fields}}function zH(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:X(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Se(h===void 0||typeof h=="string",58123),Ct.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ct.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let h=u.code===void 0?N.UNKNOWN:JM(u.code);return new B(h,u.message||"")}(o);t=new sf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=__(n,r.document.name),s=ar(r.document.updateTime),o=r.document.createTime?ar(r.document.createTime):oe.min(),a=new Jt({mapValue:{fields:r.document.fields}}),l=xn.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new Fo(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=__(n,r.document),s=r.readTime?ar(r.readTime):oe.min(),o=xn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Fo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=__(n,r.document),s=r.removedTargetIds||[];t=new Fo([],s,i,null)}else{if(!("filter"in e))return X(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new J_(i,s),a=r.targetId;t=new rf(a,o)}}return t}function qH(n,e){let t;if(e instanceof ys)t={update:$R(n,e.key,e.value)};else if(e instanceof Zc)t={delete:iE(n,e.key)};else if(e instanceof lr)t={update:$R(n,e.key,e.data),updateMask:e4(e.fieldMask)};else{if(!(e instanceof K_))return X(16599,{ft:e.type});t={verify:iE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Go)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ms)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wo)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw X(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$H(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X(27497)}(n,e.precondition)),t}function GH(n,e){return n&&n.length>0?(Se(e!==void 0,14353),n.map(t=>function(i,s){let o=i.updateTime?ar(i.updateTime):ar(s);return o.isEqual(oe.min())&&(o=ar(s)),new W_(o,i.transformResults||[])}(t,e))):[]}function WH(n,e){return{documents:[tN(n,e.path)]}}function KH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tN(n,i);let s=function(u){if(u.length!==0)return iN(On.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:ko(g.field),direction:ZH(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=nE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i}}function QH(n){let e=HH(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Se(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let g=rN(p);return g instanceof On&&OM(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(g=>function(_){return new zo(xo(_.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Nf(g)?null:g}(t.limit));let l=null;t.startAt&&(l=function(p){let g=!!p.before,y=p.values||[];return new Ho(y,g)}(t.startAt));let u=null;return t.endAt&&(u=function(p){let g=!p.before,y=p.values||[];return new Ho(y,g)}(t.endAt)),IH(e,i,o,s,a,"F",l,u)}function YH(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=xo(t.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=xo(t.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=xo(t.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=xo(t.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return X(61313);default:return X(60726)}}(n):n.fieldFilter!==void 0?function(t){return rt.create(xo(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return X(58110);default:return X(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return On.create(t.compositeFilter.filters.map(r=>rN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X(1026)}}(t.compositeFilter.op))}(n):X(30097,{filter:n})}function ZH(n){return jH[n]}function JH(n){return UH[n]}function XH(n){return BH[n]}function ko(n){return{fieldPath:n.canonicalString()}}function xo(n){return Xt.fromServerFormat(n.fieldPath)}function iN(n){return n instanceof rt?function(t){if(t.op==="=="){if(RR(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(AR(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(RR(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(AR(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:JH(t.op),value:t.value}}}(n):n instanceof On?function(t){let r=t.getFilters().map(i=>iN(i));return r.length===1?r[0]:{compositeFilter:{op:XH(t.op),filters:r}}}(n):X(54877,{filter:n})}function e4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Xc=class n{constructor(e,t,r,i,s=oe.min(),o=oe.min(),a=Ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var oE=class{constructor(e){this.wt=e}};function t4(n){let e=QH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?G_(e,e.limit,"L"):e}var cf=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(je(e.integerValue));else if("doubleValue"in e){let r=je(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),Kc(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=xr(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Or(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?PM(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):NM(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):X(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let s=e.fields||{};this.Mt(t,53);let o=Uo,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(je(a)),this.Nt(o,t),this.Ct(s[o],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),Z.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};cf.Wt=new cf;var aE=class{constructor(){this.yn=new cE}addToCollectionParentIndex(e,t){return this.yn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(fs.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},cE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ft(Be.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ft(Be.comparator)).toArray()}};var uJ=new Uint8Array(0);var HR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oN=41943040,gn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(oN,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);var el=class n{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new n(0)}static ir(){return new n(-1)}};var zR="LruGarbageCollector",n4=1048576;function qR([n,e],[t,r]){let i=he(n,t);return i===0?he(e,r):i}var lE=class{constructor(e){this.cr=e,this.buffer=new ft(qR),this.lr=0}hr(){return++this.lr}Pr(e){let t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();qR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},uE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){U(zR,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>I(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ta(t)?U(zR,"Ignoring IndexedDB error during garbage collection: ",t):yield ea(t)}yield this.Ir(3e5)}))}},dE=class{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(cw.le);let r=new lE(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(HR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HR):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,s,o,a,l,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),No()<=me.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function r4(n,e){return new dE(n,e)}var hE=class{constructor(){this.changes=new Fr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var fE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var pE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Gc(r.mutation,i,mn.empty(),Et.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=ls();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=$c();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ls();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Lr(),o=qc(),a=function(){return qc()}();return t.forEach((l,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof lr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Gc(h.mutation,u,h.mutation.getFieldMask(),Et.now())):o.set(u.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var p;return a.set(u,new fE(h,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=qc(),i=new Ke((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let h=r.get(l)||mn.empty();h=a.applyToLocalView(u,h),r.set(l,h);let p=(i.get(a.batchId)||_e()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,h=l.value,p=zM();h.forEach(g=>{if(!s.has(g)){let y=YM(t.get(g),r.get(g));y!==null&&p.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):k.resolve(ls()),a=Wc,l=s;return o.next(u=>k.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,_e())).next(h=>({batchId:a,changes:HM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let i=$c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=$c();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,l=>{let u=function(p,g){return new ps(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{let h=u.getKey();o.get(h)===null&&(o=o.insert(h,xn.newInvalidDocument(h)))});let a=$c();return o.forEach((l,u)=>{let h=s.get(l);h!==void 0&&Gc(h.mutation,u,mn.empty(),Et.now()),xf(t,u)&&(a=a.insert(l,u))}),a})}};var gE=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return k.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ar(i.createTime)}}(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:t4(i.bundledQuery),readTime:ar(i.readTime)}}(t)),k.resolve()}};var mE=class{constructor(){this.overlays=new Ke(Z.comparator),this.Or=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ls();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Or.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=ls(),s=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ke((u,h)=>u-h),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=ls(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=ls(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return k.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z_(t,r));let s=this.Or.get(t);s===void 0&&(s=_e(),this.Or.set(t,s)),this.Or.set(t,s.add(r.key))}};var yE=class{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var tl=class{constructor(){this.Nr=new ft(nt.Br),this.Lr=new ft(nt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){let r=new nt(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new nt(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){let t=new Z(new Be([])),r=new nt(t,e),i=new nt(t,e+1),s=[];return this.Lr.forEachInRange([r,i],o=>{this.Qr(o),s.push(o.key)}),s}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let t=new Z(new Be([])),r=new nt(t,e),i=new nt(t,e+1),s=_e();return this.Lr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new nt(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},nt=class{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Z.comparator(e.key,t.key)||he(e.Gr,t.Gr)}static kr(e,t){return he(e.Gr,t.Gr)||Z.comparator(e.key,t.key)}};var vE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new ft(nt.Br)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Q_(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.zr=this.zr.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,t){return k.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Hr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?lw:this.Jn-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new nt(t,0),i=new nt(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([r,i],o=>{let a=this.jr(o.Gr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ft(he);return t.forEach(i=>{let s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([s,o],a=>{r=r.add(a.Gr)})}),k.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Z.isDocumentKey(s)||(s=s.child(""));let o=new nt(new Z(s),0),a=new ft(he);return this.zr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Gr)),!0)},o),k.resolve(this.Jr(a))}Jr(e){let t=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Se(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return k.forEach(t.mutations,i=>{let s=new nt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){let r=new nt(t,0),i=this.zr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var _E=class{constructor(e){this.Zr=e,this.docs=function(){return new Ke(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=Lr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Lr(),o=t.path,a=new Z(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||rH(nH(h),r)<=0||(i.has(h.key)||xf(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X(9500)}Xr(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EE(this)}getSize(e){return k.resolve(this.size)}},EE=class extends hE{constructor(e){super(),this.vr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}};var wE=class{constructor(e){this.persistence=e,this.ei=new Fr(t=>pw(t),gw),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.ti=0,this.ni=new tl,this.targetCount=0,this.ri=el.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),k.resolve()}ar(e){this.ei.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ri=new el(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.ar(t),k.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.ei.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ni.Wr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.ni.containsKey(t))}};var lf=class{constructor(e,t){this.ii={},this.overlays={},this.si=new cw(0),this.oi=!1,this.oi=!0,this._i=new yE,this.referenceDelegate=e(this),this.ai=new wE(this),this.indexManager=new aE,this.remoteDocumentCache=function(i){return new _E(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new oE(t),this.ci=new gE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new vE(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new IE(this.si.next());return this.referenceDelegate.li(),r(i).next(s=>this.referenceDelegate.hi(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Pi(e,t){return k.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}},IE=class extends N_{constructor(e){super(),this.currentSequenceNumber=e}},TE=class n{constructor(e){this.persistence=e,this.Ti=new tl,this.Ii=null}static Ei(e){return new n(e)}get di(){if(this.Ii)return this.Ii;throw X(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.di,r=>{let i=Z.fromPath(r);return this.Ai(e,i).next(s=>{s||t.removeEntry(i,oe.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return k.or([()=>k.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}},uf=class n{constructor(e,t){this.persistence=e,this.Ri=new Fr(r=>aH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=r4(this,t)}static Ei(e,t){return new n(e,t)}li(){}hi(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return k.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(s=>s?k.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Xr(e,o=>this.gr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,oe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),k.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zh(e.data.value)),t}gr(e,t,r){return k.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.Ri.get(t);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var bE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=_e(),i=_e();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var DE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var CE=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return DS()?8:sH(dt())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Vs(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new DE;return this.fs(e,t,o).next(a=>{if(s.result=a,this.Is)return this.gs(e,t,o,a.size)})}).next(()=>s.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(No()<=me.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),k.resolve()):(No()<=me.DEBUG&&U("QueryEngine","Query:",Po(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(No()<=me.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(t))):k.resolve())}Rs(e,t){if(kR(t))return k.resolve(null);let r=or(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=G_(t,null,"F"),r=or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=_e(...s);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.ps(t,a);return this.ys(t,u,o,l.readTime)?this.Rs(e,G_(t,null,"F")):this.ws(e,u,t,l)}))})))}Vs(e,t,r,i){return kR(t)||i.isEqual(oe.min())?k.resolve(null):this.As.getDocuments(e,r).next(s=>{let o=this.ps(t,s);return this.ys(t,o,r,i)?k.resolve(null):(No()<=me.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Po(t)),this.ws(e,o,t,tH(i,Wc)).next(a=>a))})}ps(e,t){let r=new ft(BM(e));return t.forEach((i,s)=>{xf(e,s)&&(r=r.add(s))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}fs(e,t,r){return No()<=me.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Po(t)),this.As.getDocumentsMatchingQuery(e,t,fs.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var _w="LocalStore",i4=3e8,SE=class{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new Ke(he),this.Ds=new Fr(s=>pw(s),gw),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pE(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}};function s4(n,e,t,r){return new SE(n,e,t,r)}function aN(n,e){return I(this,null,function*(){let t=re(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],l=_e();for(let u of i){o.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of s){a.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ms:u,removedBatchIds:o,addedBatchIds:a}))})})})}function o4(n,e){let t=re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){let p=u.batch,g=p.keys(),y=k.resolve();return g.forEach(_=>{y=y.next(()=>h.getEntry(l,_)).next(A=>{let M=u.docVersions.get(_);Se(M!==null,48541),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cN(n){let e=re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function a4(n,e){let t=re(n),r=e.snapshotVersion,i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.ai.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.ai.addMatchingKeys(s,h.addedDocuments,p)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ct.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,L){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=i4?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(g,y,h)&&a.push(t.ai.updateTargetData(s,y))});let l=Lr(),u=_e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(c4(s,o,e.documentUpdates).next(h=>{l=h.xs,u=h.Os})),!r.isEqual(oe.min())){let h=t.ai.getLastRemoteSnapshotVersion(s).next(p=>t.ai.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.Ss=i,s))}function c4(n,e,t){let r=_e(),i=_e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Lr();return t.forEach((a,l)=>{let u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):U(_w,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{xs:o,Os:i}})}function l4(n,e){let t=re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function u4(n,e){let t=re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):t.ai.allocateTargetId(r).next(o=>(i=new Xc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function AE(n,e,t){return I(this,null,function*(){let r=re(n),i=r.Ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ta(o))throw o;U(_w,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function GR(n,e,t){let r=re(n),i=oe.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){let p=re(l),g=p.Ds.get(h);return g!==void 0?k.resolve(p.Ss.get(g)):p.ai.getTargetData(u,h)}(r,o,or(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?i:oe.min(),t?s:_e())).next(a=>(d4(r,bH(e),a),{documents:a,Ns:s})))}function d4(n,e,t){let r=n.vs.get(e)||oe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.vs.set(e,r)}var df=class{constructor(){this.activeTargetIds=MH()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var RE=class{constructor(){this.So=new df,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new df,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ME=class{vo(e){}shutdown(){}};var WR="ConnectivityMonitor",hf=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){U(WR,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){U(WR,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hh=null;function NE(){return Hh===null?Hh=function(){return 268435456+Math.round(2147483648*Math.random())}():Hh++,"0x"+Hh.toString(16)}var E_="RestConnection",h4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},PE=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Xh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,s){let o=NE(),a=this.$o(e,t.toUriEncodedString());U(E_,`Sending RPC '${e}' ${o}:`,a,r);let l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(l,i,s);let{host:u}=new URL(a),h=is(u);return this.Ko(e,a,l,r,h).then(p=>(U(E_,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Vo(E_,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Wo(e,t,r,i,s,o){return this.Qo(e,t,r,i,s)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$o(e,t){let r=h4[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}};var kE=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var Dt="WebChannelConnection",xE=class extends PE{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i,s){let o=NE();return new Promise((a,l)=>{let u=new p_;u.setWithCredentials(!0),u.listenOnce(g_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Bc.NO_ERROR:let p=u.getResponseJson();U(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Bc.TIMEOUT:U(Dt,`RPC '${e}' ${o} timed out`),l(new B(N.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:let g=u.getStatus();if(U(Dt,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let A=function(L){let $=L.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf($)>=0?$:N.UNKNOWN}(_.status);l(new B(A,_.message))}else l(new B(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new B(N.UNAVAILABLE,"Connection failed."));break;default:X(9055,{s_:e,streamId:o,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{U(Dt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);U(Dt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",h,r,15)})}a_(e,t,r){let i=NE(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=v_(),a=y_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let h=s.join("");U(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,l);let p=o.createWebChannel(h,l),g=!1,y=!1,_=new kE({Go:M=>{y?U(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(g||(U(Dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),U(Dt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},zo:()=>p.close()}),A=(M,L,$)=>{M.listen(L,G=>{try{$(G)}catch(ne){setTimeout(()=>{throw ne},0)}})};return A(p,Mo.EventType.OPEN,()=>{y||(U(Dt,`RPC '${e}' stream ${i} transport opened.`),_.t_())}),A(p,Mo.EventType.CLOSE,()=>{y||(y=!0,U(Dt,`RPC '${e}' stream ${i} transport closed`),_.r_())}),A(p,Mo.EventType.ERROR,M=>{y||(y=!0,Vo(Dt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),_.r_(new B(N.UNAVAILABLE,"The operation could not be completed")))}),A(p,Mo.EventType.MESSAGE,M=>{var L;if(!y){let $=M.data[0];Se(!!$,16349);let G=$,ne=G?.error||((L=G[0])===null||L===void 0?void 0:L.error);if(ne){U(Dt,`RPC '${e}' stream ${i} received error:`,ne);let $e=ne.status,de=function(E){let b=tt[E];if(b!==void 0)return JM(b)}($e),T=ne.message;de===void 0&&(de=N.INTERNAL,T="Unknown error status: "+$e+" with message "+ne.message),y=!0,_.r_(new B(de,T)),p.close()}else U(Dt,`RPC '${e}' stream ${i} received:`,$),_.i_($)}}),A(a,m_.STAT_EVENT,M=>{M.stat===Uh.PROXY?U(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Uh.NOPROXY&&U(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.n_()},0),_}};function w_(){return typeof document<"u"?document:null}function Of(n){return new tE(n,!0)}var ff=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var KR="PersistentStream",pf=class{constructor(e,t,r,i,s,o,a,l){this.bi=e,this.R_=r,this.V_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new ff(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return I(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return I(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){return I(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(t)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{let i=new B(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){let r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>I(this,null,function*(){this.state=0,this.start()}))}L_(e){return U(KR,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(U(KR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},OE=class extends pf{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let t=zH(this.serializer,e),r=function(s){if(!("targetChange"in s))return oe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?ar(o.readTime):oe.min()}(e);return this.listener.Q_(t,r)}U_(e){let t={};t.database=sE(this.serializer),t.addTarget=function(s,o){let a,l=o.target;if(a=z_(l)?{documents:WH(s,l)}:{query:KH(s,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=XM(s,o.resumeToken);let u=nE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=af(s,o.snapshotVersion.toTimestamp());let u=nE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=YH(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){let t={};t.database=sE(this.serializer),t.removeTarget=e,this.F_(t)}},FE=class extends pf{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let t=GH(e.writeResults,e.commitTime),r=ar(e.commitTime);return this.listener.j_(r,t)}H_(){let e={};e.database=sE(this.serializer),this.F_(e)}G_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>qH(this.serializer,r))};this.F_(t)}};var LE=class{},VE=class extends LE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Qo(e,rE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(N.UNKNOWN,s.toString())})}Wo(e,t,r,i,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,rE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(N.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},jE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(kr(t),this.ea=!1):U("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var vs="RemoteStore",UE=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo(o=>{r.enqueueAndForget(()=>I(this,null,function*(){_s(this)&&(U(vs,"Restarting streams for network reachability change."),yield function(l){return I(this,null,function*(){let u=re(l);u.aa.add(4),yield al(u),u.la.set("Unknown"),u.aa.delete(4),yield Ff(u)})}(this))}))}),this.la=new jE(r,i)}};function Ff(n){return I(this,null,function*(){if(_s(n))for(let e of n.ua)yield e(!0)})}function al(n){return I(this,null,function*(){for(let e of n.ua)yield e(!1)})}function lN(n,e){let t=re(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Tw(t)?Iw(t):na(t).b_()&&ww(t,e))}function Ew(n,e){let t=re(n),r=na(t);t._a.delete(e),r.b_()&&uN(t,e),t._a.size===0&&(r.b_()?r.v_():_s(t)&&t.la.set("Unknown"))}function ww(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}na(n).U_(e)}function uN(n,e){n.ha.Ke(e),na(n).K_(e)}function Iw(n){n.ha=new eE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),na(n).start(),n.la.ta()}function Tw(n){return _s(n)&&!na(n).w_()&&n._a.size>0}function _s(n){return re(n).aa.size===0}function dN(n){n.ha=void 0}function f4(n){return I(this,null,function*(){n.la.set("Online")})}function p4(n){return I(this,null,function*(){n._a.forEach((e,t)=>{ww(n,e)})})}function g4(n,e){return I(this,null,function*(){dN(n),Tw(n)?(n.la.ia(e),Iw(n)):n.la.set("Unknown")})}function m4(n,e,t){return I(this,null,function*(){if(n.la.set("Online"),e instanceof sf&&e.state===2&&e.cause)try{yield function(i,s){return I(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i._a.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i._a.delete(a),i.ha.removeTarget(a))})}(n,e)}catch(r){U(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gf(n,r)}else if(e instanceof Fo?n.ha.Xe(e):e instanceof rf?n.ha.ot(e):n.ha.nt(e),!t.isEqual(oe.min()))try{let r=yield cN(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.ha.It(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=s._a.get(u);h&&s._a.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{let h=s._a.get(l);if(!h)return;s._a.set(l,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),uN(s,l);let p=new Xc(h.target,l,u,h.sequenceNumber);ww(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){U(vs,"Failed to raise snapshot:",r),yield gf(n,r)}})}function gf(n,e,t){return I(this,null,function*(){if(!ta(e))throw e;n.aa.add(1),yield al(n),n.la.set("Offline"),t||(t=()=>cN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>I(null,null,function*(){U(vs,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield Ff(n)}))})}function hN(n,e){return e().catch(t=>gf(n,t,e))}function Lf(n){return I(this,null,function*(){let e=re(n),t=yi(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:lw;for(;y4(e);)try{let i=yield l4(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,v4(e,i)}catch(i){yield gf(e,i)}fN(e)&&pN(e)})}function y4(n){return _s(n)&&n.oa.length<10}function v4(n,e){n.oa.push(e);let t=yi(n);t.b_()&&t.W_&&t.G_(e.mutations)}function fN(n){return _s(n)&&!yi(n).w_()&&n.oa.length>0}function pN(n){yi(n).start()}function _4(n){return I(this,null,function*(){yi(n).H_()})}function E4(n){return I(this,null,function*(){let e=yi(n);for(let t of n.oa)e.G_(t.mutations)})}function w4(n,e,t){return I(this,null,function*(){let r=n.oa.shift(),i=Y_.from(r,e,t);yield hN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Lf(n)})}function I4(n,e){return I(this,null,function*(){e&&yi(n).W_&&(yield function(r,i){return I(this,null,function*(){if(function(o){return LH(o)&&o!==N.ABORTED}(i.code)){let s=r.oa.shift();yi(r).D_(),yield hN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lf(r)}})}(n,e)),fN(n)&&pN(n)})}function QR(n,e){return I(this,null,function*(){let t=re(n);t.asyncQueue.verifyOperationInProgress(),U(vs,"RemoteStore received new credentials");let r=_s(t);t.aa.add(3),yield al(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield Ff(t)})}function T4(n,e){return I(this,null,function*(){let t=re(n);e?(t.aa.delete(2),yield Ff(t)):e||(t.aa.add(2),yield al(t),t.la.set("Unknown"))})}function na(n){return n.Pa||(n.Pa=function(t,r,i){let s=re(t);return s.Y_(),new OE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:f4.bind(null,n),Jo:p4.bind(null,n),Zo:g4.bind(null,n),Q_:m4.bind(null,n)}),n.ua.push(e=>I(null,null,function*(){e?(n.Pa.D_(),Tw(n)?Iw(n):n.la.set("Unknown")):(yield n.Pa.stop(),dN(n))}))),n.Pa}function yi(n){return n.Ta||(n.Ta=function(t,r,i){let s=re(t);return s.Y_(),new FE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:_4.bind(null,n),Zo:I4.bind(null,n),z_:E4.bind(null,n),j_:w4.bind(null,n)}),n.ua.push(e=>I(null,null,function*(){e?(n.Ta.D_(),yield Lf(n)):(yield n.Ta.stop(),n.oa.length>0&&(U(vs,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))}))),n.Ta}var BE=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bw(n,e){if(kr("AsyncQueue",`${e}: ${n}`),ta(n))return new B(N.UNAVAILABLE,`${e}: ${n}`);throw n}var mf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=$c(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var yf=class{constructor(){this.Ia=new Ke(Z.comparator)}track(e){let t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):X(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){let e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}},Qo=class n{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,mf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var $E=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},HE=class{constructor(){this.queries=YR(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){let i=re(t),s=i.queries;i.queries=YR(),s.forEach((o,a)=>{for(let l of a.Ra)l.onError(r)})})(this,new B(N.ABORTED,"Firestore shutting down"))}};function YR(){return new Fr(n=>UM(n),kf)}function gN(n,e){return I(this,null,function*(){let t=re(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Va()&&e.ma()&&(r=2):(s=new $E,r=e.ma()?0:1);try{switch(r){case 0:s.Aa=yield t.onListen(i,!0);break;case 1:s.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=bw(o,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Ra.push(e),e.ga(t.onlineState),s.Aa&&e.pa(s.Aa)&&Dw(t)})}function mN(n,e){return I(this,null,function*(){let t=re(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Ra.indexOf(e);o>=0&&(s.Ra.splice(o,1),s.Ra.length===0?i=e.ma()?0:1:!s.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function b4(n,e){let t=re(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Ra)a.pa(i)&&(r=!0);o.Aa=i}}r&&Dw(t)}function D4(n,e,t){let r=re(n),i=r.queries.get(e);if(i)for(let s of i.Ra)s.onError(t);r.queries.delete(e)}function Dw(n){n.fa.forEach(e=>{e.next()})}var zE,ZR;(ZR=zE||(zE={})).ya="default",ZR.Cache="cache";var vf=class{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;let r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==zE.Cache}};var _f=class{constructor(e){this.key=e}},Ef=class{constructor(e){this.key=e}},qE=class{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=_e(),this.mutatedKeys=_e(),this.Ua=BM(e),this.Ka=new mf(this.Ua)}get Wa(){return this.qa}Ga(e,t){let r=t?t.za:new yf,i=t?t.Ka:this.Ka,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=xf(this.query,p)?p:null,_=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;g&&y?g.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),M=!0):this.ja(g,y)||(r.track({type:2,doc:y}),M=!0,(l&&this.Ua(y,l)>0||u&&this.Ua(y,u)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),M=!0):g&&!y&&(r.track({type:1,doc:g}),M=!0,(l||u)&&(a=!0)),M&&(y?(o=o.add(y),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ka:o,za:r,ys:a,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let o=e.za.da();o.sort((h,p)=>function(y,_){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X(20277,{Vt:M})}};return A(y)-A(_)}(h.type,p.type)||this.Ua(h.doc,p.doc)),this.Ha(r),i=i!=null&&i;let a=t&&!i?this.Ja():[],l=this.$a.size===0&&this.current&&!i?1:0,u=l!==this.Qa;return this.Qa=l,o.length!==0||u?{snapshot:new Qo(this.query,e.Ka,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new yf,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=_e(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new Ef(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new _f(r))}),t}Xa(e){this.qa=e.Ns,this.$a=_e();let t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Qo.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},Cw="SyncEngine",GE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},WE=class{constructor(e){this.key=e,this.tu=!1}},KE=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new Fr(a=>UM(a),kf),this.iu=new Map,this.su=new Set,this.ou=new Ke(Z.comparator),this._u=new Map,this.au=new tl,this.uu={},this.cu=new Map,this.lu=el.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function C4(n,e,t=!0){return I(this,null,function*(){let r=IN(n),i,s=r.ru.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=yield yN(r,e,t,!0),i})}function S4(n,e){return I(this,null,function*(){let t=IN(n);yield yN(t,e,!0,!1)})}function yN(n,e,t,r){return I(this,null,function*(){let i=yield u4(n.localStore,or(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield A4(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&lN(n.remoteStore,i),a})}function A4(n,e,t,r,i){return I(this,null,function*(){n.Pu=(p,g,y)=>function(A,M,L,$){return I(this,null,function*(){let G=M.view.Ga(L);G.ys&&(G=yield GR(A.localStore,M.query,!1).then(({documents:T})=>M.view.Ga(T,G)));let ne=$&&$.targetChanges.get(M.targetId),$e=$&&$.targetMismatches.get(M.targetId)!=null,de=M.view.applyChanges(G,A.isPrimaryClient,ne,$e);return XR(A,M.targetId,de.Ya),de.snapshot})}(n,p,g,y);let s=yield GR(n.localStore,e,!0),o=new qE(e,s.Ns),a=o.Ga(s.documents),l=Jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);XR(n,t,u.Ya);let h=new GE(e,t,o);return n.ru.set(e,h),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),u.snapshot})}function R4(n,e,t){return I(this,null,function*(){let r=re(n),i=r.ru.get(e),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter(o=>!kf(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield AE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ew(r.remoteStore,i.targetId),QE(r,i.targetId)}).catch(ea))):(QE(r,i.targetId),yield AE(r.localStore,i.targetId,!0))})}function M4(n,e){return I(this,null,function*(){let t=re(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ew(t.remoteStore,r.targetId))})}function N4(n,e,t){return I(this,null,function*(){let r=V4(n);try{let i=yield function(o,a){let l=re(o),u=Et.now(),h=a.reduce((y,_)=>y.add(_.key),_e()),p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Lr(),A=_e();return l.Cs.getEntries(y,h).next(M=>{_=M,_.forEach((L,$)=>{$.isValidDocument()||(A=A.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,_)).next(M=>{p=M;let L=[];for(let $ of a){let G=FH($,p.get($.key).overlayedDocument);G!=null&&L.push(new lr($.key,G,kM(G.value.mapValue),Pr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,L,a)}).next(M=>{g=M;let L=M.applyToLocalDocumentSet(p,A);return l.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:g.batchId,changes:HM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.uu[o.currentUser.toKey()];u||(u=new Ke(he)),u=u.insert(a,l),o.uu[o.currentUser.toKey()]=u}(r,i.batchId,t),yield cl(r,i.changes),yield Lf(r.remoteStore)}catch(i){let s=bw(i,"Failed to persist write");t.reject(s)}})}function vN(n,e){return I(this,null,function*(){let t=re(n);try{let r=yield a4(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t._u.get(s);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.tu=!0:i.modifiedDocuments.size>0?Se(o.tu,14607):i.removedDocuments.size>0&&(Se(o.tu,42227),o.tu=!1))}),yield cl(t,r,e)}catch(r){yield ea(r)}})}function JR(n,e,t){let r=re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ru.forEach((s,o)=>{let a=o.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let l=re(o);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(let g of p.Ra)g.ga(a)&&(u=!0)}),u&&Dw(l)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function P4(n,e,t){return I(this,null,function*(){let r=re(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r._u.get(e),s=i&&i.key;if(s){let o=new Ke(Z.comparator);o=o.insert(s,xn.newNoDocument(s,oe.min()));let a=_e().add(s),l=new nf(oe.min(),new Map,new Ke(he),o,a);yield vN(r,l),r.ou=r.ou.remove(s),r._u.delete(e),Sw(r)}else yield AE(r.localStore,e,!1).then(()=>QE(r,e,t)).catch(ea)})}function k4(n,e){return I(this,null,function*(){let t=re(n),r=e.batch.batchId;try{let i=yield o4(t.localStore,e);EN(t,r,null),_N(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cl(t,i)}catch(i){yield ea(i)}})}function x4(n,e,t){return I(this,null,function*(){let r=re(n);try{let i=yield function(o,a){let l=re(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Se(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);EN(r,e,t),_N(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cl(r,i)}catch(i){yield ea(i)}})}function _N(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function EN(n,e,t){let r=re(n),i=r.uu[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function QE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||wN(n,r)})}function wN(n,e){n.su.delete(e.path.canonicalString());let t=n.ou.get(e);t!==null&&(Ew(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),Sw(n))}function XR(n,e,t){for(let r of t)r instanceof _f?(n.au.addReference(r.key,e),O4(n,r)):r instanceof Ef?(U(Cw,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||wN(n,r.key)):X(19791,{Iu:r})}function O4(n,e){let t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(U(Cw,"New document in limbo: "+t),n.su.add(r),Sw(n))}function Sw(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){let e=n.su.values().next().value;n.su.delete(e);let t=new Z(Be.fromString(e)),r=n.lu.next();n._u.set(r,new WE(t)),n.ou=n.ou.insert(t,r),lN(n.remoteStore,new Xc(or(mw(t.path)),r,"TargetPurposeLimboResolution",cw.le))}}function cl(n,e,t){return I(this,null,function*(){let r=re(n),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,t).then(u=>{var h;if((u||t)&&r.isPrimaryClient){let p=u?!u.fromCache:(h=t?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);let p=bE.Ps(l.targetId,u);s.push(p)}}))}),yield Promise.all(o),r.nu.Q_(i),yield function(l,u){return I(this,null,function*(){let h=re(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(u,g=>k.forEach(g.ls,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>k.forEach(g.hs,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ta(p))throw p;U(_w,"Failed to update sequence numbers: "+p)}for(let p of u){let g=p.targetId;if(!p.fromCache){let y=h.Ss.get(g),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);h.Ss=h.Ss.insert(g,A)}}})}(r.localStore,s))})}function F4(n,e){return I(this,null,function*(){let t=re(n);if(!t.currentUser.isEqual(e)){U(Cw,"User change. New user:",e.toKey());let r=yield aN(t.localStore,e);t.currentUser=e,function(s,o){s.cu.forEach(a=>{a.forEach(l=>{l.reject(new B(N.CANCELLED,o))})}),s.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cl(t,r.Ms)}})}function L4(n,e){let t=re(n),r=t._u.get(e);if(r&&r.tu)return _e().add(r.key);{let i=_e(),s=t.iu.get(e);if(!s)return i;for(let o of s){let a=t.ru.get(o);i=i.unionWith(a.view.Wa)}return i}}function IN(n){let e=re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.nu.Q_=b4.bind(null,e.eventManager),e.nu.Tu=D4.bind(null,e.eventManager),e}function V4(n){let e=re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x4.bind(null,e),e}var TN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return I(this,null,function*(){this.serializer=Of(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),yield this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)})}mu(t,r){return null}fu(t,r){return null}Vu(t){return s4(this.persistence,new CE,t.initialUser,this.serializer)}Ru(t){return new lf(TE.Ei,this.serializer)}Au(t){return new RE}terminate(){return I(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),YE=class extends TN{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Se(this.persistence.referenceDelegate instanceof uf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new uE(r,e.asyncQueue,t)}Ru(e){let t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new lf(r=>uf.Ei(r,t),this.serializer)}};var j4=(()=>{class n{initialize(t,r){return I(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>JR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=F4.bind(null,this.syncEngine),yield T4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new HE}()}createDatastore(t){let r=Of(t.databaseInfo.databaseId),i=function(o){return new xE(o)}(t.databaseInfo);return function(o,a,l,u){return new VE(o,a,l,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,l){return new UE(i,s,o,a,l)}(this.localStore,this.datastore,t.asyncQueue,r=>JR(this.syncEngine,r,0),function(){return hf.C()?new hf:new ME}())}createSyncEngine(t,r){return function(s,o,a,l,u,h,p){let g=new KE(s,o,a,l,u,h);return p&&(g.hu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var t,r;yield function(s){return I(this,null,function*(){let o=re(s);U(vs,"RemoteStore shutting down."),o.aa.add(5),yield al(o),o.ca.shutdown(),o.la.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var wf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var vi="FirestoreClient",ZE=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=Qh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>I(this,null,function*(){U(vi,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(U(vi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=bw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function I_(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U(vi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>I(null,null,function*(){r.isEqual(i)||(yield aN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function eM(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield U4(n);U(vi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>QR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>QR(e.remoteStore,i)),n._onlineComponents=e})}function U4(n){return I(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U(vi,"Using user provided OfflineComponentProvider");try{yield I_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),yield I_(n,new TN)}}else U(vi,"Using default OfflineComponentProvider"),yield I_(n,new YE(void 0));return n._offlineComponents})}function bN(n){return I(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U(vi,"Using user provided OnlineComponentProvider"),yield eM(n,n._uninitializedComponentsProvider._online)):(U(vi,"Using default OnlineComponentProvider"),yield eM(n,new j4))),n._onlineComponents})}function B4(n){return bN(n).then(e=>e.syncEngine)}function DN(n){return I(this,null,function*(){let e=yield bN(n),t=e.eventManager;return t.onListen=C4.bind(null,e.syncEngine),t.onUnlisten=R4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=M4.bind(null,e.syncEngine),t})}function $4(n,e,t={}){let r=new kn;return n.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return function(s,o,a,l,u){let h=new wf({next:g=>{h.yu(),o.enqueueAndForget(()=>mN(s,p));let y=g.docs.has(a);!y&&g.fromCache?u.reject(new B(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?u.reject(new B(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new vf(mw(a.path),h,{includeMetadataChanges:!0,Fa:!0});return gN(s,p)}(yield DN(n),n.asyncQueue,e,t,r)})),r.promise}function H4(n,e,t={}){let r=new kn;return n.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return function(s,o,a,l,u){let h=new wf({next:g=>{h.yu(),o.enqueueAndForget(()=>mN(s,p)),g.fromCache&&l.source==="server"?u.reject(new B(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new vf(a,h,{includeMetadataChanges:!0,Fa:!0});return gN(s,p)}(yield DN(n),n.asyncQueue,e,t,r)})),r.promise}function CN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var tM=new Map;function SN(n,e,t){if(!t)throw new B(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z4(n,e,t,r){if(e===!0&&r===!0)throw new B(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nM(n){if(!Z.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rM(n){if(Z.isDocumentKey(n))throw new B(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X(12329,{type:typeof n})}function Vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new B(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Vf(n);throw new B(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var AN="firestore.googleapis.com",iM=!0,If=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AN,this.ssl=iM}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:iM;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n4)throw new B(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new If({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new If(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new T_;switch(r.type){case"firstParty":return new S_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Io("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=tM.get(t);r&&(U("ComponentProvider","Removing Datastore"),tM.delete(t),r.terminate())}(this),Promise.resolve()}};function q4(n,e,t,r={}){var i;n=Vr(n,Yo);let s=is(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o.host!==AN&&o.host!==l&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!tr(u,a)&&(n._setSettings(u),s&&(Zd(`https://${l}`),Io("Firestore",!0)),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ht.MOCK_USER;else{h=_S(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ht(g)}n._authCredentials=new b_(new Wh(h,p))}}var Zo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Bt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},gi=class n extends Zo{constructor(e,t,r){super(e,t,mw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function jf(n,e,...t){if(n=ut(n),SN("collection","path",e),n instanceof Yo){let r=Be.fromString(e,...t);return rM(r),new gi(n,null,r)}{if(!(n instanceof Bt||n instanceof gi))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return rM(r),new gi(n.firestore,null,r)}}function ll(n,e,...t){if(n=ut(n),arguments.length===1&&(e=Qh.newId()),SN("doc","path",e),n instanceof Yo){let r=Be.fromString(e,...t);return nM(r),new Bt(n,null,new Z(r))}{if(!(n instanceof Bt||n instanceof gi))throw new B(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return nM(r),new Bt(n.firestore,n instanceof gi?n.converter:null,new Z(r))}}var sM="AsyncQueue",Tf=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new ff(this,"async_queue_retry"),this.ju=()=>{let r=w_();r&&U(sM,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let t=w_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let t=w_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let t=new kn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return I(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ta(e))throw e;U(sM,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,kr("INTERNAL UNHANDLED ERROR: ",oM(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);let i=BE.createAndSchedule(this,e,t,r,s=>this.Xu(s));return this.Uu.push(i),i}Ju(){this.Ku&&X(47125,{ec:oM(this.Ku)})}verifyOperationInProgress(){}tc(){return I(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let t=this.Uu.indexOf(e);this.Uu.splice(t,1)}};function oM(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var _i=class extends Yo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Tf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Tf(e),this._firestoreClient=void 0,yield e}})}};function RN(n,e){let t=typeof n=="object"?n:th(),r=typeof n=="string"?n:e||Xh,i=Sc(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=vS("firestore");s&&q4(i,...s)}return i}function Aw(n){if(n._terminated)throw new B(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||G4(n),n._firestoreClient}function G4(n){var e,t,r;let i=n._freezeSettings(),s=function(a,l,u,h){return new P_(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,CN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ZE(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}var nl=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ct.fromBase64String(e))}catch(t){throw new B(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new B(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rl=class{constructor(e){this._methodName=e}};var il=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}};var sl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var W4=/^__.*__$/,JE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ys(e,this.data,t,this.fieldTransforms)}},bf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function MN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X(40011,{oc:n})}}var XE=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this._c(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Cf(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(MN(this.oc)&&W4.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},ew=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Of(e)}dc(e,t,r,i=!1){return new XE({oc:e,methodName:t,Ec:r,path:Xt.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Rw(n){let e=n._freezeSettings(),t=Of(n._databaseId);return new ew(n._databaseId,!!e.ignoreUndefinedProperties,t)}function K4(n,e,t,r,i,s={}){let o=n.dc(s.merge||s.mergeFields?2:0,e,t,i);Mw("Data must be an object, but it was:",o,r);let a=NN(r,o),l,u;if(s.merge)l=new mn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let g=tw(e,p,t);if(!o.contains(g))throw new B(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);kN(h,g)||h.push(g)}l=new mn(h),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new JE(new Jt(a),l,u)}var Df=class n extends rl{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Q4(n,e,t,r){let i=n.dc(1,e,t);Mw("Data must be an object, but it was:",i,r);let s=[],o=Jt.empty();Ei(r,(l,u)=>{let h=Nw(e,l,t);u=ut(u);let p=i.hc(h);if(u instanceof Df)s.push(h);else{let g=ul(u,p);g!=null&&(s.push(h),o.set(h,g))}});let a=new mn(s);return new bf(o,a,i.fieldTransforms)}function Y4(n,e,t,r,i,s){let o=n.dc(1,e,t),a=[tw(e,r,t)],l=[i];if(s.length%2!=0)throw new B(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(tw(e,s[g])),l.push(s[g+1]);let u=[],h=Jt.empty();for(let g=a.length-1;g>=0;--g)if(!kN(u,a[g])){let y=a[g],_=l[g];_=ut(_);let A=o.hc(y);if(_ instanceof Df)u.push(y);else{let M=ul(_,A);M!=null&&(u.push(y),h.set(y,M))}}let p=new mn(u);return new bf(h,p,o.fieldTransforms)}function Z4(n,e,t,r=!1){return ul(t,n.dc(r?4:3,e))}function ul(n,e){if(PN(n=ut(n)))return Mw("Unsupported field value:",e,n),NN(n,e);if(n instanceof rl)return function(r,i){if(!MN(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let l=ul(a,i.Pc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Et.fromDate(r);return{timestampValue:af(i.serializer,s)}}if(r instanceof Et){let s=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:af(i.serializer,s)}}if(r instanceof il)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nl)return{bytesValue:XM(i.serializer,r._byteString)};if(r instanceof Bt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sl)return function(o,a){return{mapValue:{fields:{[dw]:{stringValue:hw},[Uo]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Tc("VectorValues must only contain numeric values.");return yw(a.serializer,u)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${Vf(r)}`)}(n,e)}function NN(n,e){let t={};return DM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(n,(r,i)=>{let s=ul(i,e.uc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function PN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof il||n instanceof nl||n instanceof Bt||n instanceof rl||n instanceof sl)}function Mw(n,e,t){if(!PN(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Vf(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function tw(n,e,t){if((e=ut(e))instanceof Jo)return e._internalPath;if(typeof e=="string")return Nw(n,e);throw Cf("Field path arguments must be of type string or ",n,!1,void 0,t)}var J4=new RegExp("[~\\*/\\[\\]]");function Nw(n,e,t){if(e.search(J4)>=0)throw Cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jo(...e.split("."))._internalPath}catch{throw Cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cf(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new B(N.INVALID_ARGUMENT,a+n+l)}function kN(n,e){return n.some(t=>t.isEqual(e))}var Sf=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Pw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},nw=class extends Sf{data(){return super.data()}};function Pw(n,e){return typeof e=="string"?Nw(n,e):e instanceof Jo?e._internalPath:e._delegate._internalPath}function X4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new B(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ol=class{},rw=class extends ol{};function kw(n,e,...t){let r=[];e instanceof ol&&r.push(e),r=r.concat(t),function(s){let o=s.filter(l=>l instanceof iw).length,a=s.filter(l=>l instanceof Af).length;if(o>1||o>0&&a>0)throw new B(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Af=class n extends rw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return xN(e._query,t),new Zo(e.firestore,e.converter,q_(e._query,t))}_parse(e){let t=Rw(e.firestore);return function(s,o,a,l,u,h,p){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new B(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){cM(p,h);let _=[];for(let A of p)_.push(aM(l,s,A));g={arrayValue:{values:_}}}else g=aM(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||cM(p,h),g=Z4(a,o,p,h==="in"||h==="not-in");return rt.create(u,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function xw(n,e,t){let r=e,i=Pw("where",n);return Af._create(i,r,t)}var iw=class n extends ol{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:On.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let l of a)xN(o,l),o=q_(o,l)}(e._query,t),new Zo(e.firestore,e.converter,q_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function aM(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new B(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jM(e)&&t.indexOf("/")!==-1)throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Be.fromString(t));if(!Z.isDocumentKey(r))throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return SR(n,new Z(r))}if(t instanceof Bt)return SR(n,t._key);throw new B(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vf(t)}.`)}function cM(n,e){if(!Array.isArray(n)||n.length===0)throw new B(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xN(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var sw=class{convertValue(e,t="none"){switch(mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ei(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Uo].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>je(o.doubleValue));return new sl(s)}convertGeoPoint(e){return new il(je(e.latitude),je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Pf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){let t=xr(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Be.fromString(e);Se(sN(r),9688,{name:e});let i=new ef(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(t)||kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function e3(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ds=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Rf=class extends Sf{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Lo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Pw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Lo=class extends Rf{data(e={}){return super.data(e)}},ow=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lo(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let l=new Lo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new Lo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:t3(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function t3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X(61501,{type:n})}}function ON(n){n=Vr(n,Bt);let e=Vr(n.firestore,_i);return $4(Aw(e),n._key).then(t=>n3(e,n,t))}var Mf=class extends sw{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}};function Ow(n){n=Vr(n,Zo);let e=Vr(n.firestore,_i),t=Aw(e),r=new Mf(e);return X4(n._query),H4(t,n._query).then(i=>new ow(e,r,n,i))}function FN(n,e,t,...r){n=Vr(n,Bt);let i=Vr(n.firestore,_i),s=Rw(i),o;return o=typeof(e=ut(e))=="string"||e instanceof Jo?Y4(s,"updateDoc",n._key,e,t,r):Q4(s,"updateDoc",n._key,e),Fw(i,[o.toMutation(n._key,Pr.exists(!0))])}function LN(n){return Fw(Vr(n.firestore,_i),[new Zc(n._key,Pr.none())])}function VN(n,e){let t=Vr(n.firestore,_i),r=ll(n),i=e3(n.converter,e);return Fw(t,[K4(Rw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Pr.exists(!1))]).then(()=>r)}function Fw(n,e){return function(r,i){let s=new kn;return r.asyncQueue.enqueueAndForget(()=>I(null,null,function*(){return N4(yield B4(r),i,s)})),s.promise}(Aw(n),e)}function n3(n,e,t){let r=t.docs.get(e._key),i=new Mf(n);return new Rf(n,i,e._key,r,new ds(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Xo=i})(ui),li(new pn("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new _i(new D_(r.getProvider("auth-internal")),new A_(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new B(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ef(u.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Nn(yR,vR,e),Nn(yR,vR,"esm2017")})();var ra=class n{firestore;authService=P(fi);tasksSubject=new Ge([]);tasks$=this.tasksSubject.asObservable();loadingSubject=new Ge(!1);loading$=this.loadingSubject.asObservable();constructor(){this.firestore=RN(),this.loadTasks(),this.authService.user$.subscribe(e=>{e?this.loadTasks():this.tasksSubject.next([])})}loadTasks(e="date",t="asc"){console.log("Loading tasks with sort field:",e,"direction:",t);let r=this.authService.getCurrentUserId();if(console.log("User ID for task loading:",r),!r){console.log("No user ID available, returning empty task list"),this.tasksSubject.next([]);return}this.loadingSubject.next(!0);let i=jf(this.firestore,"tasks"),s=kw(i,xw("userId","==",r));console.log("Query created for tasks collection with userId filter"),Ow(s).then(o=>{console.log("Query executed, document count:",o.size);let a=[];o.forEach(u=>{let h=u.data();a.push(ae(O({},h),{id:u.id}))}),console.log("Raw tasks retrieved:",a);let l=[...a].sort((u,h)=>{if(e==="date"){let p=new Date(u.date),g=new Date(h.date);return t==="asc"?p.getTime()-g.getTime():g.getTime()-p.getTime()}else if(e==="title")return t==="asc"?u.title.localeCompare(h.title):h.title.localeCompare(u.title);return 0});console.log("Sorted tasks:",l),this.tasksSubject.next(l),this.loadingSubject.next(!1)}).catch(o=>{console.error("Error loading tasks:",o),this.loadingSubject.next(!1)})}getTask(e){return Ae(ON(ll(this.firestore,"tasks",e))).pipe(le(t=>t.exists()?O({id:t.id},t.data()):null),Rt(t=>(console.error("Error getting task:",t),nn(()=>new Error("Error getting task")))))}addTask(e){console.log("Adding new task:",e);let t=this.authService.getCurrentUserId();if(console.log("Current user ID:",t),!t)return nn(()=>new Error("User not authenticated"));let r=ae(O({},e),{userId:t});return console.log("Task with userId added:",r),Ae(VN(jf(this.firestore,"tasks"),r)).pipe(le(i=>(console.log("Task added successfully with ID:",i.id),this.loadTasks(),i.id)),Rt(i=>(console.error("Error adding task:",i),nn(()=>new Error("Error adding task")))))}updateTask(e,t){let r=ll(this.firestore,"tasks",e);return Ae(FN(r,t)).pipe(le(()=>{this.loadTasks()}),Rt(i=>(console.error("Error updating task:",i),nn(()=>new Error("Error updating task")))))}deleteTask(e){let t=ll(this.firestore,"tasks",e);return Ae(LN(t)).pipe(le(()=>{this.loadTasks()}),Rt(r=>(console.error("Error deleting task:",r),nn(()=>new Error("Error deleting task")))))}toggleTaskCompletion(e){return this.updateTask(e.id,{completed:!e.completed})}sortTasks(e,t){this.loadTasks(e,t)}filterByCompletion(e=null){this.loadingSubject.next(!0);let t=this.authService.getCurrentUserId();if(!t){this.tasksSubject.next([]);return}let r=jf(this.firestore,"tasks"),i=kw(r,xw("userId","==",t));Ow(i).then(s=>{let o=[];s.forEach(l=>{let u=l.data();o.push(ae(O({},u),{id:l.id}))});let a=o;e!==null&&(a=o.filter(l=>l.completed===e)),this.tasksSubject.next(a),this.loadingSubject.next(!1)}).catch(s=>{console.error("Error filtering tasks:",s),this.loadingSubject.next(!1)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function r3(n,e){n&1&&(V(0,"div",8)(1,"div",9)(2,"span",10),H(3,"Loading..."),F()()())}function i3(n,e){if(n&1){let t=Kn();V(0,"div",11),H(1),V(2,"button",12),be("click",function(){mt(t);let i=Ue();return yt(i.submitError=null)}),F()()}if(n&2){let t=Ue();Y(),Yn(" ",t.submitError," ")}}function s3(n,e){n&1&&(V(0,"span"),H(1,"Title is required"),F())}function o3(n,e){n&1&&(V(0,"span"),H(1,"Title cannot exceed 100 characters"),F())}function a3(n,e){if(n&1&&(V(0,"div",37),Xe(1,s3,2,0,"span",38)(2,o3,2,0,"span",38),F()),n&2){let t,r,i=Ue(2);Y(),Re("ngIf",(t=i.taskForm.get("title"))==null||t.errors==null?null:t.errors.required),Y(),Re("ngIf",(r=i.taskForm.get("title"))==null||r.errors==null?null:r.errors.maxlength)}}function c3(n,e){n&1&&(V(0,"div",37),H(1," Description is required "),F())}function l3(n,e){n&1&&(V(0,"div",37),H(1," Date is required "),F())}function u3(n,e){n&1&&(V(0,"div",37),H(1," Start time is required "),F())}function d3(n,e){n&1&&(V(0,"div",37),H(1," End time is required "),F())}function h3(n,e){n&1&&(V(0,"div",17)(1,"div",3)(2,"div",39),Oe(3,"input",40),V(4,"label",41),H(5," Mark as completed "),F()()()())}function f3(n,e){n&1&&Oe(0,"span",42)}function p3(n,e){if(n&1){let t=Kn();V(0,"div",13)(1,"div",3)(2,"div",14)(3,"div",15)(4,"form",16),be("ngSubmit",function(){mt(t);let i=Ue();return yt(i.onSubmit())}),V(5,"div",17)(6,"div",3)(7,"label",18),H(8,"Task Title*"),F(),Oe(9,"input",19),Xe(10,a3,3,2,"div",20),F()(),V(11,"div",17)(12,"div",3)(13,"label",21),H(14,"Description*"),F(),Oe(15,"textarea",22),Xe(16,c3,2,0,"div",20),F()(),V(17,"div",17)(18,"div",23)(19,"label",24),H(20,"Date*"),F(),Oe(21,"input",25),Xe(22,l3,2,0,"div",20),F(),V(23,"div",23)(24,"label",26),H(25,"Start Time*"),F(),Oe(26,"input",27),Xe(27,u3,2,0,"div",20),F(),V(28,"div",23)(29,"label",28),H(30,"End Time*"),F(),Oe(31,"input",29),Xe(32,d3,2,0,"div",20),F()(),V(33,"div",17)(34,"div",3)(35,"label",30),H(36,"Notes (Optional)"),F(),Oe(37,"textarea",31),F()(),Xe(38,h3,6,0,"div",32),V(39,"div",33)(40,"button",34),be("click",function(){mt(t);let i=Ue();return yt(i.cancel())}),H(41,"Cancel"),F(),V(42,"button",35),Xe(43,f3,1,0,"span",36),H(44),F()()()()()()()}if(n&2){let t=Ue();Y(4),Re("formGroup",t.taskForm),Y(5),vt("is-invalid",t.isFieldInvalid("title")),Y(),Re("ngIf",t.isFieldInvalid("title")),Y(5),vt("is-invalid",t.isFieldInvalid("description")),Y(),Re("ngIf",t.isFieldInvalid("description")),Y(5),vt("is-invalid",t.isFieldInvalid("date")),Y(),Re("ngIf",t.isFieldInvalid("date")),Y(4),vt("is-invalid",t.isFieldInvalid("startTime")),Y(),Re("ngIf",t.isFieldInvalid("startTime")),Y(4),vt("is-invalid",t.isFieldInvalid("endTime")),Y(),Re("ngIf",t.isFieldInvalid("endTime")),Y(6),Re("ngIf",t.editMode),Y(4),Re("disabled",t.taskForm.invalid||t.loading),Y(),Re("ngIf",t.loading),Y(),Yn(" ",t.editMode?"Update Task":"Create Task"," ")}}var Uf=class n{taskForm;editMode=!1;taskId=null;loading=!1;submitError=null;fb=P(pR);taskService=P(ra);router=P(lt);route=P(Mn);ngOnInit(){this.initForm(),this.route.queryParams.subscribe(e=>{e.id&&(this.editMode=!0,this.taskId=e.id,this.taskId&&this.loadTaskData(this.taskId))})}initForm(){let e=new Date().toISOString().split("T")[0];this.taskForm=this.fb.group({title:["",[Rr.required,Rr.maxLength(100)]],description:["",[Rr.required]],date:[e,[Rr.required]],startTime:["09:00",[Rr.required]],endTime:["10:00",[Rr.required]],notes:[""],completed:[!1]})}loadTaskData(e){this.loading=!0,this.taskService.getTask(e).subscribe({next:t=>{t?this.taskForm.patchValue({title:t.title,description:t.description,date:t.date,startTime:t.startTime,endTime:t.endTime,notes:t.notes,completed:t.completed}):this.router.navigate(["/tasks/list"]),this.loading=!1},error:t=>{console.error("Error loading task:",t),this.submitError="Could not load task data. Please try again.",this.loading=!1}})}onSubmit(){if(this.taskForm.invalid){Object.keys(this.taskForm.controls).forEach(t=>{this.taskForm.get(t)?.markAsTouched()});return}this.loading=!0;let e=this.taskForm.value;this.editMode&&this.taskId?this.taskService.updateTask(this.taskId,e).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/tasks/list"])},error:t=>{console.error("Error updating task:",t),this.submitError="Could not update task. Please try again.",this.loading=!1}}):this.taskService.addTask(e).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/tasks/list"])},error:t=>{console.error("Error creating task:",t),this.submitError="Could not create task. Please try again.",this.loading=!1}})}cancel(){this.router.navigate(["/tasks/list"])}isFieldInvalid(e){let t=this.taskForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dn({type:n,selectors:[["app-todo-create"]],decls:11,vars:5,consts:[[1,"main-content"],[1,"container"],[1,"row","mb-4"],[1,"col-md-12"],[1,"text-muted"],["class","d-flex justify-content-center my-5",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],[1,"d-flex","justify-content-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"row"],[1,"card","shadow-sm"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","What needs to be done?",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","placeholder","Describe your task",1,"form-control"],[1,"col-md-4"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control"],["for","startTime",1,"form-label"],["type","time","id","startTime","formControlName","startTime",1,"form-control"],["for","endTime",1,"form-label"],["type","time","id","endTime","formControlName","endTime",1,"form-control"],["for","notes",1,"form-label"],["id","notes","formControlName","notes","rows","2","placeholder","Any additional notes or reminders",1,"form-control"],["class","row mb-3",4,"ngIf"],[1,"d-flex","justify-content-end","mt-4"],["type","button",1,"btn","btn-outline-secondary","me-2",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"form-check"],["type","checkbox","id","completed","formControlName","completed",1,"form-check-input"],["for","completed",1,"form-check-label"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),H(5),F(),V(6,"p",4),H(7),F()()(),Xe(8,r3,4,0,"div",5)(9,i3,3,1,"div",6)(10,p3,45,20,"div",7),F()()),t&2&&(Y(5),Qn(r.editMode?"Edit Task":"Create New Task"),Y(2),Qn(r.editMode?"Update your task details":"Add a new task to your list"),Y(),Re("ngIf",r.loading),Y(),Re("ngIf",r.submitError),Y(),Re("ngIf",!r.loading))},dependencies:[fn,Qi,Vh,dR,xh,i_,oR,aR,d_,h_],styles:[`.form-label[_ngcontent-%COMP%]{font-weight:500}.card[_ngcontent-%COMP%]{border-radius:.5rem;border:none}.btn-success[_ngcontent-%COMP%]{background-color:#00008b!important;border-color:#00008b!important}.btn-success[_ngcontent-%COMP%]:hover{background-color:#08743b!important;border-color:#08743b!important}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}textarea.is-invalid[_ngcontent-%COMP%]{padding-right:calc(1.5em + .75rem);background-position:top calc(.375em + .1875rem) right calc(.375em + .1875rem)}.was-validated[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:invalid, .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;padding-right:calc(1.5em + .75rem)}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:.875em;color:#dc3545}`]})};function g3(n,e){n&1&&(V(0,"div",24)(1,"div",25)(2,"span",26),H(3,"Loading..."),F()()())}function m3(n,e){if(n&1){let t=Kn();V(0,"div",27)(1,"div",28),Oe(2,"i",29),F(),V(3,"h4",5),H(4,"No tasks found"),F(),V(5,"p"),H(6,"Get started by adding a new task"),F(),V(7,"button",30),be("click",function(){mt(t);let i=Ue();return yt(i.createTask())}),Oe(8,"i",8),H(9," Add New Task "),F()()}}function y3(n,e){if(n&1){let t=Kn();V(0,"tr",39),be("click",function(){let i=mt(t).$implicit,s=Ue(2);return yt(s.showTaskDetails(i))}),V(1,"td")(2,"div",40),be("click",function(i){return mt(t),yt(i.stopPropagation())}),V(3,"input",41),be("change",function(i){let s=mt(t).$implicit,o=Ue(2);return yt(o.toggleCompletion(s,i))}),F()()(),V(4,"td")(5,"span"),H(6),F()(),V(7,"td"),H(8),F(),V(9,"td"),H(10),F(),V(11,"td",42),H(12),F(),V(13,"td")(14,"button",43),be("click",function(i){let s=mt(t).$implicit;return Ue(2).editTask(s),yt(i.stopPropagation())}),Oe(15,"i",44),F(),V(16,"button",45),be("click",function(i){let s=mt(t).$implicit,o=Ue(2);return yt(o.deleteTask(s,i))}),Oe(17,"i",46),F()()()}if(n&2){let t=e.$implicit,r=Ue(2);vt("table-success",t.completed),Y(3),iy("id","task-",t.id,""),Re("checked",t.completed),Y(2),vt("text-decoration-line-through",t.completed),Y(),Qn(t.title),Y(2),Qn(r.formatDate(t.date)),Y(2),Qa("",t.startTime," - ",t.endTime,""),Y(2),Qn(t.description)}}function v3(n,e){if(n&1&&(V(0,"div",31)(1,"div",32)(2,"div",33)(3,"table",34)(4,"thead")(5,"tr"),Oe(6,"th",35),V(7,"th",36),H(8,"Title"),F(),V(9,"th"),H(10,"Date"),F(),V(11,"th"),H(12,"Time"),F(),V(13,"th"),H(14,"Description"),F(),V(15,"th",37),H(16,"Actions"),F()()(),V(17,"tbody"),Xe(18,y3,18,12,"tr",38),F()()()()()),n&2){let t=Ue();Y(18),Re("ngForOf",t.filteredTasks)}}function _3(n,e){n&1&&(V(0,"span",60),H(1,"Completed"),F())}function E3(n,e){n&1&&(V(0,"span",61),H(1,"Active"),F())}function w3(n,e){if(n&1&&(V(0,"div",62)(1,"h6"),H(2,"Notes"),F(),V(3,"p",4),H(4),F()()),n&2){let t=Ue(2);Y(4),Qn(t.selectedTask.notes)}}function I3(n,e){if(n&1){let t=Kn();V(0,"div",47)(1,"div",48)(2,"h5",49),H(3,"Task Details"),F(),V(4,"button",50),be("click",function(){mt(t);let i=Ue();return yt(i.closeTaskDetails())}),F()(),V(5,"div",51)(6,"h4",52),H(7),Xe(8,_3,2,0,"span",53)(9,E3,2,0,"span",54),F(),V(10,"p")(11,"strong"),H(12,"Date:"),F(),H(13),F(),V(14,"p")(15,"strong"),H(16,"Time:"),F(),H(17),F(),V(18,"h5",55),H(19,"Description"),F(),V(20,"p"),H(21),F(),Xe(22,w3,5,1,"div",56),F(),V(23,"div",57)(24,"button",58),be("click",function(){mt(t);let i=Ue();return yt(i.closeTaskDetails())}),H(25,"Close"),F(),V(26,"button",59),be("click",function(){mt(t);let i=Ue();return i.editTask(i.selectedTask),yt(i.closeTaskDetails())}),H(27,"Edit"),F()()()}if(n&2){let t=Ue();Y(7),Yn("",t.selectedTask.title," "),Y(),Re("ngIf",t.selectedTask.completed),Y(),Re("ngIf",!t.selectedTask.completed),Y(4),Yn(" ",t.formatDate(t.selectedTask.date),""),Y(4),Qa(" ",t.selectedTask.startTime," - ",t.selectedTask.endTime,""),Y(4),Qn(t.selectedTask.description),Y(),Re("ngIf",t.selectedTask.notes)}}function T3(n,e){if(n&1){let t=Kn();V(0,"div",63),be("click",function(){mt(t);let i=Ue();return yt(i.closeTaskDetails())}),F()}}var Bf=class n{tasks=[];filteredTasks=[];loading=!0;filterStatus="all";sortField="date";sortDirection="asc";selectedTask=null;taskService=P(ra);router=P(lt);ngOnInit(){this.taskService.tasks$.subscribe(e=>{this.tasks=e,this.applyFilters()}),this.taskService.loading$.subscribe(e=>{this.loading=e}),this.taskService.loadTasks()}applyFilters(){if(this.filterStatus==="all")this.filteredTasks=[...this.tasks];else{let e=this.filterStatus==="completed";this.filteredTasks=this.tasks.filter(t=>t.completed===e)}}createTask(){this.router.navigate(["/tasks/create"])}editTask(e){this.router.navigate(["/tasks/create"],{queryParams:{id:e.id}})}deleteTask(e,t){t.stopPropagation(),confirm(`Are you sure you want to delete task "${e.title}"?`)&&this.taskService.deleteTask(e.id).subscribe({next:()=>console.log("Task deleted successfully"),error:r=>console.error("Error deleting task:",r)})}toggleCompletion(e,t){t.stopPropagation(),this.taskService.toggleTaskCompletion(e).subscribe({next:()=>console.log("Task updated successfully"),error:r=>console.error("Error updating task:",r)})}changeFilter(e){this.filterStatus=e,e==="all"?this.taskService.filterByCompletion(null):this.taskService.filterByCompletion(e==="completed")}changeSort(e){this.sortField===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=e,this.sortDirection="asc"),this.taskService.sortTasks(this.sortField,this.sortDirection)}showTaskDetails(e){this.selectedTask=e}closeTaskDetails(){this.selectedTask=null}formatDate(e){return new Date(e).toLocaleDateString()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dn({type:n,selectors:[["app-todo-list"]],decls:39,vars:24,consts:[[1,"main-content"],[1,"container"],[1,"row","mb-4"],[1,"col-md-8"],[1,"mb-0"],[1,"text-muted"],[1,"col-md-4","d-flex","justify-content-md-end","align-items-center"],[1,"btn","btn-success",3,"click"],[1,"bi","bi-plus-circle","me-2"],[1,"col-md-6"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],[1,"col-md-6","d-flex","justify-content-md-end"],[1,"dropdown"],["type","button","id","sortDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle"],["aria-labelledby","sortDropdown",1,"dropdown-menu"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],["class","d-flex justify-content-center my-5",4,"ngIf"],["class","text-center my-5",4,"ngIf"],["class","row",4,"ngIf"],["tabindex","-1","role","dialog","aria-labelledby","taskDetailsModal",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],["class","modal-content",4,"ngIf"],["class","modal-backdrop fade show",3,"click",4,"ngIf"],[1,"d-flex","justify-content-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-center","my-5"],[1,"mb-3"],[1,"bi","bi-clipboard-check",2,"font-size","3rem","color","#ccc"],[1,"btn","btn-success","mt-2",3,"click"],[1,"row"],[1,"col-12"],[1,"table-responsive"],[1,"table","table-hover"],[2,"width","50px"],[2,"width","30%"],[2,"width","120px"],["style","cursor: pointer;",3,"table-success","click",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[1,"form-check",3,"click"],["type","checkbox",1,"form-check-input",3,"change","checked","id"],[1,"text-truncate",2,"max-width","200px"],[1,"btn","btn-sm","btn-outline-primary","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],[1,"modal-content"],[1,"modal-header","text-white"],["id","taskDetailsModal",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],[1,"card-title","mb-3"],["class","badge bg-success ms-2",4,"ngIf"],["class","badge bg-warning ms-2",4,"ngIf"],[1,"mt-3"],["class","notes-box mt-3",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"badge","bg-success","ms-2"],[1,"badge","bg-warning","ms-2"],[1,"notes-box","mt-3"],[1,"modal-backdrop","fade","show",3,"click"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),H(5,"My Tasks"),F(),V(6,"p",5),H(7,"Manage your tasks and stay organized"),F()(),V(8,"div",6)(9,"button",7),be("click",function(){return r.createTask()}),Oe(10,"i",8),H(11," Add New Task "),F()()(),V(12,"div",2)(13,"div",9)(14,"div",10)(15,"button",11),be("click",function(){return r.changeFilter("all")}),H(16," All Tasks "),F(),V(17,"button",11),be("click",function(){return r.changeFilter("active")}),H(18," Active "),F(),V(19,"button",11),be("click",function(){return r.changeFilter("completed")}),H(20," Completed "),F()()(),V(21,"div",12)(22,"div",13)(23,"button",14),H(24),F(),V(25,"ul",15)(26,"li")(27,"a",16),be("click",function(){return r.changeSort("title")}),H(28,"Title"),F()(),V(29,"li")(30,"a",16),be("click",function(){return r.changeSort("date")}),H(31,"Date"),F()()()()()(),Xe(32,g3,4,0,"div",17)(33,m3,10,0,"div",18)(34,v3,19,1,"div",19),F()(),V(35,"div",20)(36,"div",21),Xe(37,I3,28,8,"div",22),F()(),Xe(38,T3,1,0,"div",23)),t&2&&(Y(15),vt("btn-primary",r.filterStatus==="all")("btn-outline-primary",r.filterStatus!=="all"),Y(2),vt("btn-primary",r.filterStatus==="active")("btn-outline-primary",r.filterStatus!=="active"),Y(2),vt("btn-primary",r.filterStatus==="completed")("btn-outline-primary",r.filterStatus!=="completed"),Y(5),Qa(" Sort By: ",r.sortField.charAt(0).toUpperCase()+r.sortField.slice(1)," (",r.sortDirection==="asc"?"Ascending":"Descending",") "),Y(8),Re("ngIf",r.loading),Y(),Re("ngIf",!r.loading&&r.filteredTasks.length===0),Y(),Re("ngIf",!r.loading&&r.filteredTasks.length>0),Y(),ty("display",r.selectedTask?"block":"none"),vt("show",r.selectedTask),Ka("aria-hidden",!r.selectedTask),Y(2),Re("ngIf",r.selectedTask),Y(),Re("ngIf",r.selectedTask))},dependencies:[fn,fd,Qi,Lh],styles:[".btn-outline-primary.active[_ngcontent-%COMP%], .btn-outline-primary[_ngcontent-%COMP%]:active, .btn-primary[_ngcontent-%COMP%]{background-color:#00008b!important;border-color:#00008b!important}.table-success[_ngcontent-%COMP%]{background-color:#0d5a2b1a!important}.modal-header[_ngcontent-%COMP%]{background-color:#00008b!important}.notes-box[_ngcontent-%COMP%]{background:#f8f9fa;padding:.5rem .75rem;border-left:3px solid darkblue;border-radius:.25rem;font-size:.9rem}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem}.text-truncate[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.modal-dialog[_ngcontent-%COMP%]{max-width:500px}@media (max-width: 768px){.btn-group[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:1rem}.dropdown[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;text-align:left}}"]})};var jN=[{path:"",component:Ih},{path:"tasks",component:bh,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Bf},{path:"create",component:Uf}]},{path:"**",redirectTo:""}];var fe=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(fe||{}),Fn="*";function UN(n,e=null){return{type:fe.Sequence,steps:n,options:e}}function Lw(n){return{type:fe.Style,styles:n,offset:null}}var jr=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ia=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},dl="!";function BN(n){return new x(3e3,!1)}function b3(){return new x(3100,!1)}function D3(){return new x(3101,!1)}function C3(n){return new x(3001,!1)}function S3(n){return new x(3003,!1)}function A3(n){return new x(3004,!1)}function HN(n,e){return new x(3005,!1)}function zN(){return new x(3006,!1)}function qN(){return new x(3007,!1)}function GN(n,e){return new x(3008,!1)}function WN(n){return new x(3002,!1)}function KN(n,e,t,r,i){return new x(3010,!1)}function QN(){return new x(3011,!1)}function YN(){return new x(3012,!1)}function ZN(){return new x(3200,!1)}function JN(){return new x(3202,!1)}function XN(){return new x(3013,!1)}function eP(n){return new x(3014,!1)}function tP(n){return new x(3015,!1)}function nP(n){return new x(3016,!1)}function rP(n,e){return new x(3404,!1)}function R3(n){return new x(3502,!1)}function iP(n){return new x(3503,!1)}function sP(){return new x(3300,!1)}function oP(n){return new x(3504,!1)}function aP(n){return new x(3301,!1)}function cP(n,e){return new x(3302,!1)}function lP(n){return new x(3303,!1)}function uP(n,e){return new x(3400,!1)}function dP(n){return new x(3401,!1)}function hP(n){return new x(3402,!1)}function fP(n,e){return new x(3505,!1)}function Ur(n){switch(n.length){case 0:return new jr;case 1:return n[0];default:return new ia(n)}}function Bw(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),h=u==o,p=h&&a||new Map;l.forEach((g,y)=>{let _=y,A=g;if(y!=="offset")switch(_=n.normalizePropertyName(_,i),A){case dl:A=t.get(y);break;case Fn:A=r.get(y);break;default:A=n.normalizeStyleValue(y,_,A,i);break}p.set(_,A)}),h||s.push(p),a=p,o=u}),i.length)throw R3(i);return s}function $f(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Vw(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Vw(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Vw(t,"destroy",n)));break}}function Vw(n,e,t){let r=t.totalTime,i=!!t.disabled,s=Hf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function Hf(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function $t(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function $w(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var M3=typeof document>"u"?null:document.documentElement;function zf(n){let e=n.parentNode||n.host||null;return e===M3?null:e}function N3(n){return n.substring(1,6)=="ebkit"}var Es=null,$N=!1;function pP(n){Es||(Es=P3()||{},$N=Es.style?"WebkitAppearance"in Es.style:!1);let e=!0;return Es.style&&!N3(n)&&(e=n in Es.style,!e&&$N&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Es.style)),e}function P3(){return typeof document<"u"?document.body:null}function Hw(n,e){for(;e;){if(e===n)return!0;e=zf(e)}return!1}function zw(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var k3=1e3,qw="{{",x3="}}",Gw="ng-enter",qf="ng-leave",hl="ng-trigger",fl=".ng-trigger",Ww="ng-animating",Gf=".ng-animating";function ur(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:jw(parseFloat(e[1]),e[2])}function jw(n,e){switch(e){case"s":return n*k3;default:return n}}function pl(n,e,t){return n.hasOwnProperty("duration")?n:O3(n,e,t)}function O3(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(BN(n)),{duration:0,delay:0,easing:""};i=jw(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=jw(parseFloat(l),a[4]));let u=a[5];u&&(o=u)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(b3()),a=!0),s<0&&(e.push(D3()),a=!0),a&&e.splice(l,0,BN(n))}return{duration:i,delay:s,easing:o}}function gP(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ln(n,e,t){e.forEach((r,i)=>{let s=Wf(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function wi(n,e){e.forEach((t,r)=>{let i=Wf(r);n.style[i]=""})}function sa(n){return Array.isArray(n)?n.length==1?n[0]:UN(n):n}function mP(n,e,t){let r=e.params||{},i=Kw(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(C3(s))})}var Uw=new RegExp(`${qw}\\s*(.+?)\\s*${x3}`,"g");function Kw(n){let e=[];if(typeof n=="string"){let t;for(;t=Uw.exec(n);)e.push(t[1]);Uw.lastIndex=0}return e}function oa(n,e,t){let r=`${n}`,i=r.replace(Uw,(s,o)=>{let a=e[o];return a==null&&(t.push(S3(o)),a=""),a.toString()});return i==r?n:i}var F3=/-+([a-z0-9])/g;function Wf(n){return n.replace(F3,(...e)=>e[1].toUpperCase())}function yP(n,e){return n===0||e===0}function vP(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,Kf(n,a)))}}return e}function Ht(n,e,t){switch(e.type){case fe.Trigger:return n.visitTrigger(e,t);case fe.State:return n.visitState(e,t);case fe.Transition:return n.visitTransition(e,t);case fe.Sequence:return n.visitSequence(e,t);case fe.Group:return n.visitGroup(e,t);case fe.Animate:return n.visitAnimate(e,t);case fe.Keyframes:return n.visitKeyframes(e,t);case fe.Style:return n.visitStyle(e,t);case fe.Reference:return n.visitReference(e,t);case fe.AnimateChild:return n.visitAnimateChild(e,t);case fe.AnimateRef:return n.visitAnimateRef(e,t);case fe.Query:return n.visitQuery(e,t);case fe.Stagger:return n.visitStagger(e,t);default:throw A3(e.type)}}function Kf(n,e){return window.getComputedStyle(n)[e]}var dI=(()=>{class n{validateStyleProperty(t){return pP(t)}containsElement(t,r){return Hw(t,r)}getParentElement(t){return zf(t)}query(t,r,i){return zw(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new jr(i,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),Is=class{static NOOP=new dI},Ts=class{};var L3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Xf=class extends Ts{normalizePropertyName(e,t){return Wf(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(L3.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(HN(e,r))}return o+s}};var ep="*";function V3(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>j3(r,t,e)):t.push(n),t}function j3(n,e,t){if(n[0]==":"){let l=U3(n,t);if(typeof l=="function"){e.push(l);return}n=l}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(tP(n)),e;let i=r[1],s=r[2],o=r[3];e.push(_P(i,o));let a=i==ep&&o==ep;s[0]=="<"&&!a&&e.push(_P(o,i))}function U3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(nP(n)),"* => *"}}var Qf=new Set(["true","1"]),Yf=new Set(["false","0"]);function _P(n,e){let t=Qf.has(n)||Yf.has(n),r=Qf.has(e)||Yf.has(e);return(i,s)=>{let o=n==ep||n==i,a=e==ep||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?Qf.has(n):Yf.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?Qf.has(e):Yf.has(e)),o&&a}}var RP=":self",B3=new RegExp(`s*${RP}s*,?`,"g");function MP(n,e,t,r){return new eI(n).build(e,t,r)}var EP="",eI=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new tI(t);return this._resetContextStyleTimingState(i),Ht(this,sa(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=EP,e.collectedStyles=new Map,e.collectedStyles.set(EP,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(zN()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==fe.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=u}else if(a.type==fe.Transition){let l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(qN())}),{type:fe.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Kw(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&t.errors.push(GN(e.name,[...s.values()]))}return{type:fe.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=Ht(this,sa(e.animation),t),i=V3(e.expr,t.errors);return{type:fe.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ws(e.options)}}visitSequence(e,t){return{type:fe.Sequence,steps:e.steps.map(r=>Ht(this,r,t)),options:ws(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=Ht(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:fe.Group,steps:s,options:ws(e.options)}}visitAnimate(e,t){let r=q3(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Lw({});if(s.type==fe.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};r.easing&&(u.easing=r.easing),o=Lw(u)}t.currentTime+=r.duration+r.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:fe.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Fn?r.push(a):t.errors.push(WN(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(qw)>=0){s=!0;break}}}),{type:fe.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),h=u.get(l),p=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(KN(l,h.startTime,h.endTime,s,i)),p=!1),s=h.startTime),p&&u.set(l,{startTime:s,endTime:i}),t.options&&mP(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:fe.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(QN()),r;let i=1,s=0,o=[],a=!1,l=!1,u=0,h=e.steps.map(L=>{let $=this._makeStyleAst(L,t),G=$.offset!=null?$.offset:z3($.styles),ne=0;return G!=null&&(s++,ne=$.offset=G),l=l||ne<0||ne>1,a=a||ne<u,u=ne,o.push(ne),$});l&&t.errors.push(YN()),a&&t.errors.push(ZN());let p=e.steps.length,g=0;s>0&&s<p?t.errors.push(JN()):s==0&&(g=i/(p-1));let y=p-1,_=t.currentTime,A=t.currentAnimateTimings,M=A.duration;return h.forEach((L,$)=>{let G=g>0?$==y?1:g*$:o[$],ne=G*M;t.currentTime=_+A.delay+ne,A.duration=ne,this._validateStyleAst(L,t),L.offset=G,r.styles.push(L)}),r}visitReference(e,t){return{type:fe.Reference,animation:Ht(this,sa(e.animation),t),options:ws(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:fe.AnimateChild,options:ws(e.options)}}visitAnimateRef(e,t){return{type:fe.AnimateRef,animation:this.visitReference(e.animation,t),options:ws(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=$3(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,$t(t.collectedStyles,t.currentQuerySelector,new Map);let a=Ht(this,sa(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:fe.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:ws(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(XN());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:pl(e.timings,t.errors,!0);return{type:fe.Stagger,animation:Ht(this,sa(e.animation),t),timings:r,options:null}}};function $3(n){let e=!!n.split(/\s*,\s*/).find(t=>t==RP);return e&&(n=n.replace(B3,"")),n=n.replace(/@\*/g,fl).replace(/@\w+/g,t=>fl+"-"+t.slice(1)).replace(/:animating/g,Gf),[n,e]}function H3(n){return n?O({},n):null}var tI=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function z3(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function q3(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=pl(n,e).duration;return Qw(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Qw(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=pl(t,e);return Qw(i.duration,i.delay,i.easing)}function ws(n){return n?(n=O({},n),n.params&&(n.params=H3(n.params))):n={},n}function Qw(n,e,t){return{duration:n,delay:e,easing:t}}function hI(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var ml=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},G3=1,W3=":enter",K3=new RegExp(W3,"g"),Q3=":leave",Y3=new RegExp(Q3,"g");function NP(n,e,t,r,i,s=new Map,o=new Map,a,l,u=[]){return new nI().buildKeyframes(n,e,t,r,i,s,o,a,l,u)}var nI=class{buildKeyframes(e,t,r,i,s,o,a,l,u,h=[]){u=u||new ml;let p=new rI(e,t,u,i,s,h,[]);p.options=l;let g=l.delay?ur(l.delay):0;p.currentTimeline.delayNextStep(g),p.currentTimeline.setStyles([o],null,p.errors,l),Ht(this,r,p);let y=p.timelines.filter(_=>_.containsAnimation());if(y.length&&a.size){let _;for(let A=y.length-1;A>=0;A--){let M=y[A];if(M.element===t){_=M;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,p.errors,l)}return y.length?y.map(_=>_.buildKeyframes()):[hI(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:ur(oa(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?ur(r.duration):null,a=r.delay!=null?ur(r.delay):null;return o!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ht(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==fe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=tp);let o=ur(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ht(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?ur(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ht(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?oa(r,t.params,t.errors):r;return pl(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==fe.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?ur(i.delay):0;s&&(t.previousNode.type===fe.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=tp);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,h)=>{t.currentQueryIndex=h;let p=t.createSubContext(e.options,u);s&&p.delayNextStep(s),u===t.element&&(l=p.currentTimeline),Ht(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let g=p.currentTimeline.currentTime;o=Math.max(o,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime;break}let h=t.currentTimeline;l&&h.delayNextStep(l);let p=h.currentTime;Ht(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},tp={},rI=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=tp;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=l||new np(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=ur(r.duration)),r.delay!=null&&(i.delay=ur(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=oa(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=tp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new iI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(K3,"."+this._enterClassName),e=e.replace(Y3,"."+this._leaveClassName);let l=r!=1,u=this._driver.query(this.element,e,l);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&a.length==0&&o.push(eP(t)),a}},np=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=G3,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Fn),this._currentKeyframe.set(t,Fn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=Z3(e,this._globalTimelineStyles);for(let[a,l]of o){let u=oa(l,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Fn),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((h,p)=>{h===dl?e.add(p):h===Fn&&t.add(p)}),r||u.set("offset",l/this.duration),i.push(u)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return hI(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},iI=class extends np{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let u=new Map(e[0]);u.set("offset",wP(a)),s.push(u);let h=e.length-1;for(let p=1;p<=h;p++){let g=new Map(e[p]),y=g.get("offset"),_=t+y*r;g.set("offset",wP(_/o)),s.push(g)}r=o,t=0,i="",e=s}return hI(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function wP(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Z3(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,Fn)}else for(let[s,o]of i)t.set(s,o)}),t}function IP(n,e,t,r,i,s,o,a,l,u,h,p,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:h,totalTime:p,errors:g}}var Yw={},rp=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return J3(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,u,h){let p=[],g=this.ast.options&&this.ast.options.params||Yw,y=a&&a.params||Yw,_=this.buildStyles(r,y,p),A=l&&l.params||Yw,M=this.buildStyles(i,A,p),L=new Set,$=new Map,G=new Map,ne=i==="void",$e={params:PP(A,g),delay:this.ast.options?.delay},de=h?[]:NP(e,t,this.ast.animation,s,o,_,M,$e,u,p),T=0;return de.forEach(v=>{T=Math.max(v.duration+v.delay,T)}),p.length?IP(t,this._triggerName,r,i,ne,_,M,[],[],$,G,T,p):(de.forEach(v=>{let E=v.element,b=$t($,E,new Set);v.preStyleProps.forEach(S=>b.add(S));let D=$t(G,E,new Set);v.postStyleProps.forEach(S=>D.add(S)),E!==t&&L.add(E)}),IP(t,this._triggerName,r,i,ne,_,M,de,[...L.values()],$,G,T))}};function J3(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function PP(n,e){let t=O({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var sI=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=PP(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=oa(o,i,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}};function X3(n,e,t){return new oI(n,e,t)}var oI=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new sI(i.style,s,r))}),TP(this.states,"true","1"),TP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new rp(e,i,this.states))}),this.fallbackTransition=ez(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function ez(n,e,t){let r=[(o,a)=>!0],i={type:fe.Sequence,steps:[],options:null},s={type:fe.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new rp(n,s,e)}function TP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var tz=new ml,aI=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],s=MP(this._driver,t,r,i);if(r.length)throw iP(r);this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=Bw(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=NP(this._driver,t,s,Gw,qf,new Map,new Map,r,tz,i),o.forEach(h=>{let p=$t(a,h.element,new Map);h.postStyleProps.forEach(g=>p.set(g,null))})):(i.push(sP()),o=[]),i.length)throw oP(i);a.forEach((h,p)=>{h.forEach((g,y)=>{h.set(y,this._driver.computeStyle(p,y,Fn))})});let l=o.map(h=>{let p=a.get(h.element);return this._buildPlayer(h,new Map,p)}),u=Ur(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw aP(e);return t}listen(e,t,r,i){let s=Hf(t,"","","");return $f(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},bP="ng-animate-queued",nz=".ng-animate-queued",Zw="ng-animate-disabled",rz=".ng-animate-disabled",iz="ng-star-inserted",sz=".ng-star-inserted",oz=[],kP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},az={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vn="__ng_removed",yl=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=lz(i),r){let s=e,{value:o}=s,a=mT(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},gl="void",Jw=new yl(gl),cI=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,yn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw cP(r,t);if(r==null||r.length==0)throw lP(t);if(!uz(r))throw uP(r,t);let s=$t(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=$t(this._engine.statesByElement,e,new Map);return a.has(t)||(yn(e,hl),yn(e,hl+"-"+t),a.set(t,Jw)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw dP(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new vl(this.id,t,e),a=this._engine.statesByElement.get(e);a||(yn(e,hl),yn(e,hl+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new yl(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=Jw),!(u.value===gl)&&l.value===u.value){if(!fz(l.params,u.params)){let A=[],M=s.matchStyles(l.value,l.params,A),L=s.matchStyles(u.value,u.params,A);A.length?this._engine.reportError(A):this._engine.afterFlush(()=>{wi(e,M),Ln(e,L)})}return}let g=$t(this._engine.playersByElement,e,[]);g.forEach(A=>{A.namespaceId==this.id&&A.triggerName==t&&A.queued&&A.destroy()});let y=s.matchTransition(l.value,u.value,e,u.params),_=!1;if(!y){if(!i)return;y=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:l,toState:u,player:o,isFallbackTransition:_}),_||(yn(e,bP),o.onStart(()=>{aa(e,bP)})),o.onDone(()=>{let A=this.players.indexOf(o);A>=0&&this.players.splice(A,1);let M=this._engine.playersByElement.get(e);if(M){let L=M.indexOf(o);L>=0&&M.splice(L,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,fl,!0);r.forEach(i=>{if(i[Vn])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){let h=this.trigger(e,u,gl,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ur(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let l=this._triggers.get(o).fallbackTransition,u=r.get(o)||Jw,h=new yl(gl),p=new vl(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:u,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Vn];(!s||s===kP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){yn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let l=Hf(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,$f(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},lI=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new cI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=i.get(a);if(l){let u=r.indexOf(l);r.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(Zf(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Zf(t))return;let s=t[Vn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),yn(e,Zw)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),aa(e,Zw))}removeNode(e,t,r){if(Zf(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Vn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Zf(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,fl,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Gf,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ur(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Vn];if(t&&t.setForRemoval){if(e[Vn]=kP,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Zw)&&this.markElementAsDisabled(e,!1),this.driver.query(e,rz,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];yn(i,iz)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ur(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw hP(e)}_flushAnimations(e,t){let r=new ml,i=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,h=new Set;this.disabledNodes.forEach(z=>{h.add(z);let W=this.driver.query(z,nz,!0);for(let Q=0;Q<W.length;Q++)h.add(W[Q])});let p=this.bodyNode,g=Array.from(this.statesByElement.keys()),y=SP(g,this.collectedEnterElements),_=new Map,A=0;y.forEach((z,W)=>{let Q=Gw+A++;_.set(W,Q),z.forEach(ge=>yn(ge,Q))});let M=[],L=new Set,$=new Set;for(let z=0;z<this.collectedLeaveElements.length;z++){let W=this.collectedLeaveElements[z],Q=W[Vn];Q&&Q.setForRemoval&&(M.push(W),L.add(W),Q.hasAnimation?this.driver.query(W,sz,!0).forEach(ge=>L.add(ge)):$.add(W))}let G=new Map,ne=SP(g,Array.from(L));ne.forEach((z,W)=>{let Q=qf+A++;G.set(W,Q),z.forEach(ge=>yn(ge,Q))}),e.push(()=>{y.forEach((z,W)=>{let Q=_.get(W);z.forEach(ge=>aa(ge,Q))}),ne.forEach((z,W)=>{let Q=G.get(W);z.forEach(ge=>aa(ge,Q))}),M.forEach(z=>{this.processLeaveNode(z)})});let $e=[],de=[];for(let z=this._namespaceList.length-1;z>=0;z--)this._namespaceList[z].drainQueuedTransitions(t).forEach(Q=>{let ge=Q.player,Qe=Q.element;if($e.push(ge),this.collectedEnterElements.length){let ze=Qe[Vn];if(ze&&ze.setForMove){if(ze.previousTriggersValues&&ze.previousTriggersValues.has(Q.triggerName)){let dr=ze.previousTriggersValues.get(Q.triggerName),kt=this.statesByElement.get(Q.element);if(kt&&kt.has(Q.triggerName)){let hr=kt.get(Q.triggerName);hr.value=dr,kt.set(Q.triggerName,hr)}}ge.destroy();return}}let tn=!p||!this.driver.containsElement(p,Qe),He=G.get(Qe),Fe=_.get(Qe),Le=this._buildInstruction(Q,r,Fe,He,tn);if(Le.errors&&Le.errors.length){de.push(Le);return}if(tn){ge.onStart(()=>wi(Qe,Le.fromStyles)),ge.onDestroy(()=>Ln(Qe,Le.toStyles)),i.push(ge);return}if(Q.isFallbackTransition){ge.onStart(()=>wi(Qe,Le.fromStyles)),ge.onDestroy(()=>Ln(Qe,Le.toStyles)),i.push(ge);return}let $r=[];Le.timelines.forEach(ze=>{ze.stretchStartingKeyframe=!0,this.disabledNodes.has(ze.element)||$r.push(ze)}),Le.timelines=$r,r.append(Qe,Le.timelines);let lp={instruction:Le,player:ge,element:Qe};o.push(lp),Le.queriedElements.forEach(ze=>$t(a,ze,[]).push(ge)),Le.preStyleProps.forEach((ze,dr)=>{if(ze.size){let kt=l.get(dr);kt||l.set(dr,kt=new Set),ze.forEach((hr,Hr)=>kt.add(Hr))}}),Le.postStyleProps.forEach((ze,dr)=>{let kt=u.get(dr);kt||u.set(dr,kt=new Set),ze.forEach((hr,Hr)=>kt.add(Hr))})});if(de.length){let z=[];de.forEach(W=>{z.push(fP(W.triggerName,W.errors))}),$e.forEach(W=>W.destroy()),this.reportError(z)}let T=new Map,v=new Map;o.forEach(z=>{let W=z.element;r.has(W)&&(v.set(W,W),this._beforeAnimationBuild(z.player.namespaceId,z.instruction,T))}),i.forEach(z=>{let W=z.element;this._getPreviousPlayers(W,!1,z.namespaceId,z.triggerName,null).forEach(ge=>{$t(T,W,[]).push(ge),ge.destroy()})});let E=M.filter(z=>AP(z,l,u)),b=new Map;CP(b,this.driver,$,u,Fn).forEach(z=>{AP(z,l,u)&&E.push(z)});let S=new Map;y.forEach((z,W)=>{CP(S,this.driver,new Set(z),l,dl)}),E.forEach(z=>{let W=b.get(z),Q=S.get(z);b.set(z,new Map([...W?.entries()??[],...Q?.entries()??[]]))});let w=[],en=[],Br={};o.forEach(z=>{let{element:W,player:Q,instruction:ge}=z;if(r.has(W)){if(h.has(W)){Q.onDestroy(()=>Ln(W,ge.toStyles)),Q.disabled=!0,Q.overrideTotalTime(ge.totalTime),i.push(Q);return}let Qe=Br;if(v.size>1){let He=W,Fe=[];for(;He=He.parentNode;){let Le=v.get(He);if(Le){Qe=Le;break}Fe.push(He)}Fe.forEach(Le=>v.set(Le,Qe))}let tn=this._buildAnimation(Q.namespaceId,ge,T,s,S,b);if(Q.setRealPlayer(tn),Qe===Br)w.push(Q);else{let He=this.playersByElement.get(Qe);He&&He.length&&(Q.parentPlayer=Ur(He)),i.push(Q)}}else wi(W,ge.fromStyles),Q.onDestroy(()=>Ln(W,ge.toStyles)),en.push(Q),h.has(W)&&i.push(Q)}),en.forEach(z=>{let W=s.get(z.element);if(W&&W.length){let Q=Ur(W);z.setRealPlayer(Q)}}),i.forEach(z=>{z.parentPlayer?z.syncPlayerEvents(z.parentPlayer):z.destroy()});for(let z=0;z<M.length;z++){let W=M[z],Q=W[Vn];if(aa(W,qf),Q&&Q.hasAnimation)continue;let ge=[];if(a.size){let tn=a.get(W);tn&&tn.length&&ge.push(...tn);let He=this.driver.query(W,Gf,!0);for(let Fe=0;Fe<He.length;Fe++){let Le=a.get(He[Fe]);Le&&Le.length&&ge.push(...Le)}}let Qe=ge.filter(tn=>!tn.destroyed);Qe.length?dz(this,W,Qe):this.processLeaveNode(W)}return M.length=0,w.forEach(z=>{this.players.push(z),z.onDone(()=>{z.destroy();let W=this.players.indexOf(z);this.players.splice(W,1)}),z.play()}),w}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==gl;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let l of t.timelines){let u=l.element,h=u!==s,p=$t(r,u,[]);this._getPreviousPlayers(u,h,o,a,t.toState).forEach(y=>{let _=y.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),y.destroy(),p.push(y)})}wi(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,l=t.element,u=[],h=new Set,p=new Set,g=t.timelines.map(_=>{let A=_.element;h.add(A);let M=A[Vn];if(M&&M.removedBeforeQueried)return new jr(_.duration,_.delay);let L=A!==l,$=hz((r.get(A)||oz).map(T=>T.getRealPlayer())).filter(T=>{let v=T;return v.element?v.element===A:!1}),G=s.get(A),ne=o.get(A),$e=Bw(this._normalizer,_.keyframes,G,ne),de=this._buildPlayer(_,$e,$);if(_.subTimeline&&i&&p.add(A),L){let T=new vl(e,a,A);T.setRealPlayer(de),u.push(T)}return de});u.forEach(_=>{$t(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>cz(this.playersByQueriedElement,_.element,_))}),h.forEach(_=>yn(_,Ww));let y=Ur(g);return y.onDestroy(()=>{h.forEach(_=>aa(_,Ww)),Ln(l,t.toStyles)}),p.forEach(_=>{$t(i,_,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new jr(e.duration,e.delay)}},vl=class{namespaceId;triggerName;element;_player=new jr;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>$f(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$t(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function cz(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function lz(n){return n??null}function Zf(n){return n&&n.nodeType===1}function uz(n){return n=="start"||n=="done"}function DP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function CP(n,e,t,r,i){let s=[];t.forEach(l=>s.push(DP(l)));let o=[];r.forEach((l,u)=>{let h=new Map;l.forEach(p=>{let g=e.computeStyle(u,p,i);h.set(p,g),(!g||g.length==0)&&(u[Vn]=az,o.push(u))}),n.set(u,h)});let a=0;return t.forEach(l=>DP(l,s[a++])),o}function SP(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let l=s.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:i.has(u)?l=r:l=o(u),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==r&&t.get(l).push(a)}),t}function yn(n,e){n.classList?.add(e)}function aa(n,e){n.classList?.remove(e)}function dz(n,e,t){Ur(t).onDone(()=>n.processLeaveNode(e))}function hz(n){let e=[];return xP(n,e),e}function xP(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof ia?xP(r.players,e):e.push(r)}}function fz(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function AP(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var ca=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new lI(e.body,t,r),this._timelineEngine=new aI(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let l=[],u=[],h=MP(this._driver,s,l,u);if(l.length)throw rP(i,l);a=X3(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=$w(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=$w(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function pz(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Xw(e[0]),e.length>1&&(r=Xw(e[e.length-1]))):e instanceof Map&&(t=Xw(e)),t||r?new gz(n,t,r):null}var gz=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ln(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ln(this._element,this._initialStyles),this._endStyles&&(Ln(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(wi(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wi(this._element,this._endStyles),this._endStyles=null),Ln(this._element,this._initialStyles),this._state=3)}}return n})();function Xw(n){let e=null;return n.forEach((t,r)=>{mz(r)&&(e=e||new Map,e.set(r,t))}),e}function mz(n){return n==="display"||n==="position"}var ip=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Kf(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},sp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Hw(e,t)}getParentElement(e){return zf(e)}query(e,t,r){return zw(e,t,r)}computeStyle(e,t,r){return Kf(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",l={duration:r,delay:i,fill:a};s&&(l.easing=s);let u=new Map,h=o.filter(y=>y instanceof ip);yP(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((_,A)=>u.set(A,_))});let p=gP(t).map(y=>new Map(y));p=vP(e,p,u);let g=pz(e,p);return new ip(e,p,l,g)}};var Jf="@",OP="@.disabled",op=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==Jf&&t==OP?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},uI=class extends op{factory;constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==Jf?t.charAt(1)=="."&&t==OP?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==Jf){let s=yz(e),o=t.slice(1),a="";return o.charAt(0)!=Jf&&([o,a]=vz(o)),this.engine.listen(this.namespaceId,s,o,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,r,l)})}return this.delegate.listen(e,t,r,i)}};function yz(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function vz(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var ap=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,s)=>{s?.removeChild(null,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,h=u.get(i);if(!h){let p=()=>u.delete(i);h=new op(r,i,this.engine,p),u.set(i,h)}return h}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return t.data.animation.forEach(a),new uI(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Ez=(()=>{class n extends ca{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(J(et),J(Is),J(Ts))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function wz(){return new Xf}function Iz(n,e,t){return new ap(n,e,t)}var FP=[{provide:Ts,useFactory:wz},{provide:ca,useClass:Ez},{provide:ei,useFactory:Iz,deps:[ic,ca,We]}],pX=[{provide:Is,useClass:dI},{provide:xm,useValue:"NoopAnimations"},...FP],Tz=[{provide:Is,useFactory:()=>new sp},{provide:xm,useFactory:()=>"BrowserAnimations"},...FP];function LP(){return Wi("NgEagerAnimations"),[...Tz]}var VP={providers:[Zy(jN),LP(),vm(Vh,Lh)]};var cp=class n{title="Todo App";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Oe(0,"router-outlet")},dependencies:[fn,ts],encapsulation:2})};Ty(cp,VP).catch(n=>console.error(n));
